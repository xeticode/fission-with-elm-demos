var commonjsGlobal$1="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}function commonjsRequire$1(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var localforage$2={exports:{}};
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/localforage$2.exports=function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof commonjsRequire$1&&commonjsRequire$1;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,(function(e){var r=t[a][1][e];return o(r||e)}),l,l.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof commonjsRequire$1&&commonjsRequire$1,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){(function(e){var r,n,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,r=function(){u.port2.postMessage(0)}}var c=[];function l(){var e,t;n=!0;for(var r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}n=!1}function f(e){1!==c.push(e)||n||r()}t.exports=f}).call(this,void 0!==commonjsGlobal$1?commonjsGlobal$1:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){var n=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==o&&d(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,t,r){n((function(){var n;try{n=t(r)}catch(o){return i.reject(e,o)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var r=!1;function n(t){r||(r=!0,i.reject(e,t))}function o(t){r||(r=!0,i.resolve(e,t))}function a(){t(o,n)}var s=p(a);"error"===s.status&&n(s.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}function y(e){return e instanceof this?e:i.resolve(new this(o),e)}function m(e){var t=new this(o);return i.reject(t,e)}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,u=-1,c=new this(o);++u<r;)l(e[u],u);return c;function l(e,o){function u(e){a[o]=e,++s!==r||n||(n=!0,i.resolve(c,a))}t.resolve(e).then(u,(function(e){n||(n=!0,i.reject(c,e))}))}}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=-1,s=new this(o);++a<r;)u(e[a]);return s;function u(e){t.resolve(e).then((function(e){n||(n=!0,i.resolve(s,e))}),(function(e){n||(n=!0,i.reject(s,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(o);return this.state!==u?f(r,this.state===s?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=p(h,t);if("error"===r.status)return i.reject(e,r.value);var n=r.value;if(n)d(e,n);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},c.resolve=y,c.reject=m,c.all=_,c.race=g},{1:1}],3:[function(e,t,r){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==commonjsGlobal$1?commonjsGlobal$1:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=i();function s(){try{if(!a||!a.open)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(r){return!1}}function u(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function l(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function f(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function d(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",y=void 0,m={},_=Object.prototype.toString,g="readonly",b="readwrite";function v(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}function w(e){return new c((function(t){var r=e.transaction(p,b),n=u([""]);r.objectStore(p).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function $(e){return"boolean"==typeof y?c.resolve(y):w(e).then((function(e){return y=e}))}function k(e){var t=m[e.name],r={};r.promise=new c((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function A(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function E(e,t){var r=m[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function S(e,t){return new c((function(r,n){if(m[e.name]=m[e.name]||L(),e.db){if(!t)return r(e.db);k(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var r=i.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(p)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),n(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},r(t),A(e)}}))}function T(e){return S(e,!1)}function B(e){return S(e,!0)}function x(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function I(e){return new c((function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)}))}function C(e){return u([v(atob(e.data))],{type:e.type})}function D(e){return e&&e.__local_forage_encoded_blob}function R(e){var t=this,r=t._initReady().then((function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return f(r,e,e),r}function N(e){k(e);for(var t=m[e.name],r=t.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,T(e).then((function(t){return e.db=t,x(e)?B(e):t})).then((function(n){e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n})).catch((function(t){throw E(e,t),t}))}function j(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(i){if(n>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),B(e)})).then((function(){return N(e).then((function(){j(e,t,r,n-1)}))})).catch(r);r(i)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function P(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=m[r.name];o||(o=L(),m[r.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=R);var i=[];function a(){return c.resolve()}for(var s=0;s<o.forages.length;s++){var u=o.forages[s];u!==t&&i.push(u._initReady().catch(a))}var l=o.forages.slice(0);return c.all(i).then((function(){return r.db=o.db,T(r)})).then((function(e){return r.db=e,x(r,t._defaultConfig.version)?B(r):e})).then((function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<l.length;n++){var i=l[n];i!==t&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))}function O(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),D(e)&&(e=C(e)),t(e)},a.onerror=function(){n(a.error)}}catch(s){n(s)}}))})).catch(n)}));return l(n,t),n}function U(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;D(n)&&(n=C(n));var o=e(n,r.key,s++);void 0!==o?t(o):r.continue()}else t()},a.onerror=function(){n(a.error)}}catch(u){n(u)}}))})).catch(n)}));return l(n,t),n}function M(e,t,r){var n=this;e=h(e);var o=new c((function(r,o){var i;n.ready().then((function(){return i=n._dbInfo,"[object Blob]"===_.call(t)?$(i.db).then((function(e){return e?t:I(t)})):t})).then((function(t){j(n._dbInfo,b,(function(i,a){if(i)return o(i);try{var s=a.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var u=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),r(t)},a.onabort=a.onerror=function(){var e=u.error?u.error:u.transaction.error;o(e)}}catch(c){o(c)}}))})).catch(o)}));return l(o,r),o}function F(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,b,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){n(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(s){n(s)}}))})).catch(n)}));return l(n,t),n}function z(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,b,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(a){r(a)}}))})).catch(r)}));return l(r,e),r}function K(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,g,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}catch(a){r(a)}}))})).catch(r)}));return l(r,e),r}function G(e,t){var r=this,n=new c((function(t,n){e<0?t(null):r.ready().then((function(){j(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName),s=!1,u=a.openKeyCursor();u.onsuccess=function(){var r=u.result;r?0===e||s?t(r.key):(s=!0,r.advance(e)):t(null)},u.onerror=function(){n(u.error)}}catch(c){n(c)}}))})).catch(n)}));return l(n,t),n}function H(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,g,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){r(i.error)}}catch(s){r(s)}}))})).catch(r)}));return l(r,e),r}function W(e,t){t=d.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;if(e.name){var i=e.name===r.name&&o._dbInfo.db?c.resolve(o._dbInfo.db):T(e).then((function(t){var r=m[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t}));n=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;k(e);var n=m[e.name],o=n.forages;t.close();for(var i=0;i<o.length;i++){var s=o[i];s._dbInfo.db=null,s._dbInfo.version=r}return new c((function(t,n){var o=a.open(e.name,r);o.onerror=function(e){o.result.close(),n(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<o.length;t++){var r=o[t];r._dbInfo.db=e,A(r._dbInfo)}})).catch((function(t){throw(E(e,t)||c.resolve()).catch((function(){})),t}))}})):i.then((function(t){k(e);var r=m[e.name],n=r.forages;t.close();for(var o=0;o<n.length;o++)n[o]._dbInfo.db=null;return new c((function(t,r){var n=a.deleteDatabase(e.name);n.onerror=function(){var e=n.result;e&&e.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)A(n[t]._dbInfo)})).catch((function(t){throw(E(e,t)||c.resolve()).catch((function(){})),t}))}))}else n=c.reject("Invalid arguments");return l(n,t),n}var q={_driver:"asyncStorage",_initStorage:P,_support:s(),iterate:U,getItem:O,setItem:M,removeItem:F,clear:z,length:K,key:G,keys:H,dropInstance:W};function V(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,Z="__lfsc__:",Q=Z.length,ee="arbf",te="blob",re="si08",ne="ui08",oe="uic8",ie="si16",ae="si32",se="ur16",ue="ui32",ce="fl32",le="fl64",fe=Q+ee.length,he=Object.prototype.toString;function de(e){var t,r,n,o,i,a=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),l=new Uint8Array(c);for(t=0;t<s;t+=4)r=Y.indexOf(e[t]),n=Y.indexOf(e[t+1]),o=Y.indexOf(e[t+2]),i=Y.indexOf(e[t+3]),l[u++]=r<<2|n>>4,l[u++]=(15&n)<<4|o>>2,l[u++]=(3&o)<<6|63&i;return c}function pe(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=Y[r[t]>>2],n+=Y[(3&r[t])<<4|r[t+1]>>4],n+=Y[(15&r[t+1])<<2|r[t+2]>>6],n+=Y[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function ye(e,t){var r="";if(e&&(r=he.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var n,o=Z;e instanceof ArrayBuffer?(n=e,o+=ee):(n=e.buffer,"[object Int8Array]"===r?o+=re:"[object Uint8Array]"===r?o+=ne:"[object Uint8ClampedArray]"===r?o+=oe:"[object Int16Array]"===r?o+=ie:"[object Uint16Array]"===r?o+=se:"[object Int32Array]"===r?o+=ae:"[object Uint32Array]"===r?o+=ue:"[object Float32Array]"===r?o+=ce:"[object Float64Array]"===r?o+=le:t(new Error("Failed to get type for BinaryArray"))),t(o+pe(n))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r=X+e.type+"~"+pe(this.result);t(Z+te+r)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(a){console.error("Couldn't convert value into a JSON string: ",e),t(null,a)}}function me(e){if(e.substring(0,Q)!==Z)return JSON.parse(e);var t,r=e.substring(fe),n=e.substring(Q,fe);if(n===te&&J.test(r)){var o=r.match(J);t=o[1],r=r.substring(o[0].length)}var i=de(r);switch(n){case ee:return i;case te:return u([i],{type:t});case re:return new Int8Array(i);case ne:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case se:return new Uint16Array(i);case ae:return new Int32Array(i);case ue:return new Uint32Array(i);case ce:return new Float32Array(i);case le:return new Float64Array(i);default:throw new Error("Unkown type: "+n)}}var _e={serialize:ye,deserialize:me,stringToBuffer:de,bufferToString:pe};function ge(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function be(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new c((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(o){return n(o)}r.db.transaction((function(o){ge(o,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=_e,o}function ve(e,t,r,n,o,i){e.executeSql(r,n,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):ge(e,t,(function(){e.executeSql(r,n,o,i)}),i)}),i):i(e,a)}),i)}function we(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){ve(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,t),n}function $e(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){ve(r,o,"SELECT * FROM "+o.storeName,[],(function(r,n){for(var i=n.rows,a=i.length,s=0;s<a;s++){var u=i.item(s),c=u.value;if(c&&(c=o.serializer.deserialize(c)),void 0!==(c=e(c,u.key,s+1)))return void t(c)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,t),n}function ke(e,t,r,n){var o=this;e=h(e);var i=new c((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,u=o._dbInfo;u.serializer.serialize(t,(function(t,c){c?a(c):u.db.transaction((function(r){ve(r,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void i(ke.apply(o,[e,s,r,n-1]));a(t)}}))}))})).catch(a)}));return l(i,r),i}function Ae(e,t,r){return ke.apply(this,[e,t,r,1])}function Ee(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){ve(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,t),n}function Se(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ve(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,e),r}function Te(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ve(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,e),r}function Be(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){ve(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,t),n}function xe(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ve(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,e),r}function Ie(e){return new c((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}function Ce(e,t){t=d.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;return l(n=e.name?new c((function(t){var n;n=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(Ie(n))})).then((function(e){return new c((function(t,r){e.db.transaction((function(n){function o(e){return new c((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var i=[],a=0,s=e.storeNames.length;a<s;a++)i.push(o(e.storeNames[a]));c.all(i).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):c.reject("Invalid arguments"),t),n}var De={_driver:"webSQLStorage",_initStorage:be,_support:V(),iterate:$e,getItem:we,setItem:Ae,removeItem:Ee,clear:Se,length:Te,key:Be,keys:xe,dropInstance:Ce};function Re(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Ne(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function je(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function Le(){return!je()||localStorage.length>0}function Pe(e){var t=this,r={};if(e)for(var n in e)r[n]=e[n];return r.keyPrefix=Ne(e,t._defaultConfig),Le()?(t._dbInfo=r,r.serializer=_e,c.resolve()):c.reject()}function Oe(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return l(r,e),r}function Ue(e,t){var r=this;e=h(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return l(n,t),n}function Me(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,i=localStorage.length,a=1,s=0;s<i;s++){var u=localStorage.key(s);if(0===u.indexOf(n)){var c=localStorage.getItem(u);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,u.substring(o),a++)))return c}}}));return l(n,t),n}function Fe(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return l(n,t),n}function ze(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n}));return l(r,e),r}function Ke(e){var t=this.keys().then((function(e){return e.length}));return l(t,e),t}function Ge(e,t){var r=this;e=h(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return l(n,t),n}function He(e,t,r){var n=this;e=h(e);var o=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new c((function(o,i){var a=n._dbInfo;a.serializer.serialize(t,(function(t,n){if(n)i(n);else try{localStorage.setItem(a.keyPrefix+e,t),o(r)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||i(s),i(s)}}))}))}));return l(o,r),o}function We(e,t){if(t=d.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,o=this;return l(n=e.name?new c((function(t){e.storeName?t(Ne(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):c.reject("Invalid arguments"),t),n}var qe={_driver:"localStorageWrapper",_initStorage:Pe,_support:Re(),iterate:Me,getItem:Ue,setItem:He,removeItem:Ge,clear:Oe,length:Ke,key:Fe,keys:ze,dropInstance:We},Ve=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ye=function(e,t){for(var r=e.length,n=0;n<r;){if(Ve(e[n],t))return!0;n++}return!1},Xe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je={},Ze={},Qe={INDEXEDDB:q,WEBSQL:De,LOCALSTORAGE:qe},et=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],tt=["dropInstance"],rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),nt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(Xe(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var at=new(function(){function e(t){for(var r in o(this,e),Qe)if(Qe.hasOwnProperty(r)){var n=Qe[r],i=n._driver;this[r]=i,Je[i]||this.defineDriver(n)}this._defaultConfig=it({},nt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new c((function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);for(var i=rt.concat("_initStorage"),a=0,s=i.length;a<s;a++){var u=i[a];if((!Ye(tt,u)||e[u])&&"function"!=typeof e[u])return void r(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=c.reject(t);return l(r,arguments[arguments.length-1]),r}},r=0,n=tt.length;r<n;r++){var o=tt[r];e[o]||(e[o]=t(o))}}();var f=function(r){Je[n]&&console.info("Redefining LocalForage driver: "+n),Je[n]=e,Ze[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,r):f(!!e._support):f(!0)}catch(h){r(h)}}));return f(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=Je[e]?c.resolve(Je[e]):c.reject(new Error("Driver not found."));return f(n,t,r),n},e.prototype.getSerializer=function(e){var t=c.resolve(_e);return f(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return f(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;Xe(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){n._config.driver=n.driver()}function a(e){return n._extend(e),i(),n._ready=n._initStorage(n._config),n._ready}function s(e){return function(){var t=0;function r(){for(;t<e.length;){var o=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(a).catch(r)}i();var s=new Error("No available storage method found.");return n._driverSet=c.reject(s),n._driverSet}return r()}}var u=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=u.then((function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,i(),n._wrapLibraryMethodsWithReady(),n._initDriver=s(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return n._driverSet=c.reject(e),n._driverSet})),f(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!Ze[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=rt.length;e<t;e++)ot(this,rt[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=at},{3:3}]},{},[4])(4);var localforage$1=localforage$2.exports;async function lookupTxtRecord(e){return Promise.any([googleLookup(e),cloudflareLookup(e)])}async function googleLookup(e){return dnsOverHttps(`https://dns.google/resolve?name=${e}&type=txt`)}function cloudflareLookup(e){return dnsOverHttps(`https://cloudflare-dns.com/dns-query?name=${e}&type=txt`)}function dnsOverHttps(e){return fetch(e,{headers:{accept:"application/dns-json"}}).then((e=>e.json())).then((e=>{if(e.Answer){const t=e.Answer.map((e=>(e.data||"").replace(/^"+|"+$/g,"")));return";"===t[0][3]?t.sort(((e,t)=>e.slice(0,4).localeCompare(t.slice(0,4)))).map((e=>e.slice(4))).join(""):t.join("")}return null}))}async function lookupDnsLink(e){const t=await lookupTxtRecord(e.startsWith("_dnslink.")?e:`_dnslink.${e}`);return t&&!t.includes("/ipns/")?t.replace(/^dnslink=/,"").replace(/^\/ipfs\//,""):null}var index$7=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",lookupTxtRecord:lookupTxtRecord,googleLookup:googleLookup,cloudflareLookup:cloudflareLookup,dnsOverHttps:dnsOverHttps,lookupDnsLink:lookupDnsLink});const setup$1={debug:!1,endpoints:{api:"https://runfission.com",lobby:"https://auth.fission.codes",user:"fission.name"},shouldPin:!0},didCache={did:null,host:null,lastFetched:0};async function did$1(){const e=setup$1.endpoints.api.replace(/^https?:\/\//,"").replace(/\/$/,""),t=Date.now();if((didCache.host!==e||didCache.lastFetched+108e5<=t)&&(didCache.did=await lookupTxtRecord("_did."+e),didCache.host=e,didCache.lastFetched=t),!didCache.did)throw new Error("Couldn't get the Fission API DID");return didCache.did}var api$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",did:did$1});const equal=(e,t)=>{const r=new Uint8Array(e),n=new Uint8Array(t);if(r.length!==n.length)return!1;for(let o=0;o<r.length;o++)if(r[o]!==n[o])return!1;return!0};var arrbufs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",equal:equal});function compare$2(e,t){for(let r=0;r<e.byteLength;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return e.byteLength>t.byteLength?1:e.byteLength<t.byteLength?-1:0}var compare_1=compare$2;function concat$9(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return r}var concat_1=concat$9;function equals$8(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var equals_1=equals$8;function base$3(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var o=0;o<e.length;o++){var i=e.charAt(o),a=i.charCodeAt(0);if(255!==r[a])throw new TypeError(i+" is ambiguous");r[a]=o}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,o=0;e[t]===u;)n++,t++;for(var i=(e.length-t)*c+1>>>0,a=new Uint8Array(i);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<o)&&-1!==h;h--,f++)l+=s*a[h]>>>0,a[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=f,t++}if(" "!==e[t]){for(var d=i-o;d!==i&&0===a[d];)d++;for(var p=new Uint8Array(n+(i-d)),y=n;d!==i;)p[y++]=a[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,o=0,i=t.length;o!==i&&0===t[o];)o++,r++;for(var a=(i-o)*l+1>>>0,c=new Uint8Array(a);o!==i;){for(var f=t[o],h=0,d=a-1;(0!==f||h<n)&&-1!==d;d--,h++)f+=256*c[d]>>>0,c[d]=f%s>>>0,f=f/s>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,o++}for(var p=a-n;p!==a&&0===c[p];)p++;for(var y=u.repeat(r);p<a;++p)y+=e.charAt(c[p]);return y},decodeUnsafe:f,decode:function(e){var r=f(e);if(r)return r;throw new Error(`Non-${t} character`)}}}var src$9=base$3,_brrp__multiformats_scope_baseX=src$9;const empty$1=new Uint8Array(0),toHex$3=e=>e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),""),fromHex$1=e=>{const t=e.match(/../g);return t?new Uint8Array(t.map((e=>parseInt(e,16)))):empty$1},equals$7=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},coerce=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},isBinary=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),fromString$a=e=>(new TextEncoder).encode(e),toString$b=e=>(new TextDecoder).decode(e);var bytes=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",equals:equals$7,coerce:coerce,isBinary:isBinary,fromHex:fromHex$1,toHex:toHex$3,fromString:fromString$a,toString:toString$b,empty:empty$1});class Encoder{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,t,r){this.name=e,this.prefix=t,this.baseDecode=r}decode(e){if("string"!=typeof e)throw Error("Can only multibase decode strings");switch(e[0]){case this.prefix:return this.baseDecode(e.slice(1));default:throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`)}}or(e){const t={[this.prefix]:this,...e.decoders||{[e.prefix]:e}};return new ComposedDecoder(t)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){const t=e.decoders||{[e.prefix]:e};return new ComposedDecoder({...this.decoders,...t})}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}class Codec{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Encoder(e,t,r),this.decoder=new Decoder(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from$2=({name:e,prefix:t,encode:r,decode:n})=>new Codec(e,t,r,n),baseX$1=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:o}=_brrp__multiformats_scope_baseX(r,t);return from$2({prefix:e,name:t,encode:n,decode:e=>coerce(o(e))})},decode$c=(e,t,r,n)=>{const o={};for(let l=0;l<t.length;++l)o[t[l]]=l;let i=e.length;for(;"="===e[i-1];)--i;const a=new Uint8Array(i*r/8|0);let s=0,u=0,c=0;for(let l=0;l<i;++l){const t=o[e[l]];if(void 0===t)throw new SyntaxError(`Non-${n} character`);u=u<<r|t,s+=r,s>=8&&(s-=8,a[c++]=255&u>>s)}if(s>=r||255&u<<8-s)throw new SyntaxError("Unexpected end of data");return a},encode$c=(e,t,r)=>{const n="="===t[t.length-1],o=(1<<r)-1;let i="",a=0,s=0;for(let u=0;u<e.length;++u)for(s=s<<8|e[u],a+=8;a>r;)a-=r,i+=t[o&s>>a];if(a&&(i+=t[o&s<<r-a]),n)for(;i.length*r&7;)i+="=";return i},rfc4648$2=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>from$2({prefix:t,name:e,encode:e=>encode$c(e,n,r),decode:t=>decode$c(t,n,r,e)}),identity$5=from$2({prefix:"\0",name:"identity",encode:e=>toString$b(e),decode:e=>fromString$a(e)});var identityBase=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",identity:identity$5});const base2=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var base2$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base2:base2});const base8=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var base8$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base8:base8});const base10=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"});var base10$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base10:base10});const base16=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var base16$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base16:base16,base16upper:base16upper});const base32=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var base32$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base32:base32,base32upper:base32upper,base32pad:base32pad,base32padupper:base32padupper,base32hex:base32hex,base32hexupper:base32hexupper,base32hexpad:base32hexpad,base32hexpadupper:base32hexpadupper,base32z:base32z});const base36=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var base36$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base36:base36,base36upper:base36upper});const base58btc=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var base58=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base58btc:base58btc,base58flickr:base58flickr});const base64$3=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var base64$4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",base64:base64$3,base64pad:base64pad,base64url:base64url,base64urlpad:base64urlpad}),encode_1$2=encode$b,MSB$4=128,REST$4=127,MSBALL$2=~REST$4,INT$2=Math.pow(2,31);function encode$b(e,t,r){t=t||[];for(var n=r=r||0;e>=INT$2;)t[r++]=255&e|MSB$4,e/=128;for(;e&MSBALL$2;)t[r++]=255&e|MSB$4,e>>>=7;return t[r]=0|e,encode$b.bytes=r-n+1,t}var decode$b=read$3,MSB$1$1=128,REST$1$1=127;function read$3(e,t){var r,n=0,o=0,i=t=t||0,a=e.length;do{if(i>=a)throw read$3.bytes=0,new RangeError("Could not decode varint");r=e[i++],n+=o<28?(r&REST$1$1)<<o:(r&REST$1$1)*Math.pow(2,o),o+=7}while(r>=MSB$1$1);return read$3.bytes=i-t,n}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$2=function(e){return e<N1$2?1:e<N2$2?2:e<N3$2?3:e<N4$2?4:e<N5$2?5:e<N6$2?6:e<N7$2?7:e<N8$2?8:e<N9$2?9:10},varint$6={encode:encode_1$2,decode:decode$b,encodingLength:length$2},_brrp_varint=varint$6;const decode$a=e=>[_brrp_varint.decode(e),_brrp_varint.decode.bytes],encodeTo=(e,t,r=0)=>(_brrp_varint.encode(e,t,r),t),encodingLength=e=>_brrp_varint.encodingLength(e);var varint$5=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",decode:decode$a,encodeTo:encodeTo,encodingLength:encodingLength});const create$4=(e,t)=>{const r=t.byteLength,n=encodingLength(e),o=n+encodingLength(r),i=new Uint8Array(o+r);return encodeTo(e,i,0),encodeTo(r,i,n),i.set(t,o),new Digest(e,r,t,i)},decode$9=e=>{const t=coerce(e),[r,n]=decode$a(t),[o,i]=decode$a(t.subarray(n)),a=t.subarray(n+i);if(a.byteLength!==o)throw new Error("Incorrect length");return new Digest(r,o,a,t)},equals$6=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&equals$7(e.bytes,t.bytes);class Digest{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}var digest$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",create:create$4,decode:decode$9,equals:equals$6,Digest:Digest});const from$1=({name:e,code:t,encode:r})=>new Hasher(e,t,r);class Hasher{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}async digest(e){if(e instanceof Uint8Array){const t=await this.encode(e);return create$4(this.code,t)}throw Error("Unknown type, must be binary type")}}var hasher=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",from:from$1,Hasher:Hasher});const sha$1=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),sha256$1=from$1({name:"sha2-256",code:18,encode:sha$1("SHA-256")}),sha512=from$1({name:"sha2-512",code:19,encode:sha$1("SHA-512")});var sha2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",sha256:sha256$1,sha512:sha512});const identity$3=from$1({name:"identity",code:0,encode:e=>coerce(e)});var identity$4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",identity:identity$3});const raw=e=>coerce(e),{name:name$2,code:code$2,encode:encode$a,decode:decode$8}={name:"raw",code:85,decode:raw,encode:raw};var raw$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:name$2,code:code$2,encode:encode$a,decode:decode$8});const{name:name$1,code:code$1,encode:encode$9,decode:decode$7}={name:"json",code:512,encode:e=>(new TextEncoder).encode(JSON.stringify(e)),decode:e=>JSON.parse((new TextDecoder).decode(e))};var json=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",name:name$1,code:code$1,encode:encode$9,decode:decode$7});class CID$b{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$1,version:readonly$1,multihash:readonly$1,bytes:readonly$1,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:t}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$b.createV0(t)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:t}=this.multihash,r=create$4(e,t);return CID$b.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals$6(this.multihash,e.multihash)}toString(e){const{bytes:t,version:r,_baseCache:n}=this;switch(r){case 0:return toStringV0(t,n,e||base58btc.encoder);default:return toStringV1(t,n,e||base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate$1(/^0\.0/,IS_CID_DEPRECATION),!(!e||!e[cidSymbol]&&e.asCID!==e)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$b)return e;if(null!=e&&e.asCID===e){const{version:t,code:r,multihash:n,bytes:o}=e;return new CID$b(t,r,n,o||encodeCID$6(t,r,n.bytes))}if(null!=e&&!0===e[cidSymbol]){const{version:t,multihash:r,code:n}=e,o=decode$9(r);return CID$b.create(t,n,o)}return null}static create(e,t,r){if("number"!=typeof t)throw new Error("String codecs are no longer supported");switch(e){case 0:if(t!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID$b(e,t,r,r.bytes);case 1:{const n=encodeCID$6(e,t,r.bytes);return new CID$b(e,t,r,n)}default:throw new Error("Invalid version")}}static createV0(e){return CID$b.create(0,DAG_PB_CODE,e)}static createV1(e,t){return CID$b.create(1,e,t)}static decode(e){const[t,r]=CID$b.decodeFirst(e);if(r.length)throw new Error("Incorrect length");return t}static decodeFirst(e){const t=CID$b.inspectBytes(e),r=t.size-t.multihashSize,n=coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw new Error("Incorrect length");const o=n.subarray(t.multihashSize-t.digestSize),i=new Digest(t.multihashCode,t.digestSize,o,n);return[0===t.version?CID$b.createV0(i):CID$b.createV1(t.codec,i),e.subarray(t.size)]}static inspectBytes(e){let t=0;const r=()=>{const[r,n]=decode$a(e.subarray(t));return t+=n,r};let n=r(),o=DAG_PB_CODE;if(18===n?(n=0,t=0):1===n&&(o=r()),0!==n&&1!==n)throw new RangeError(`Invalid CID version ${n}`);const i=t,a=r(),s=r(),u=t+s;return{version:n,codec:o,multihashCode:a,digestSize:s,multihashSize:u-i,size:u}}static parse(e,t){const[r,n]=parseCIDtoBytes(e,t),o=CID$b.decode(n);return o._baseCache.set(r,e),o}}const parseCIDtoBytes=(e,t)=>{switch(e[0]){case"Q":{const r=t||base58btc;return[base58btc.prefix,r.decode(`${base58btc.prefix}${e}`)]}case base58btc.prefix:{const r=t||base58btc;return[base58btc.prefix,r.decode(e)]}case base32.prefix:{const r=t||base32;return[base32.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},toStringV0=(e,t,r)=>{const{prefix:n}=r;if(n!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const o=t.get(n);if(null==o){const o=r.encode(e).slice(1);return t.set(n,o),o}return o},toStringV1=(e,t,r)=>{const{prefix:n}=r,o=t.get(n);if(null==o){const o=r.encode(e);return t.set(n,o),o}return o},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID$6=(e,t,r)=>{const n=encodingLength(e),o=n+encodingLength(t),i=new Uint8Array(o+r.byteLength);return encodeTo(e,i,0),encodeTo(t,i,n),i.set(r,o),i},cidSymbol=Symbol.for("@ipld/js-cid/CID"),readonly$1={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version$2="0.0.0-dev",deprecate$1=(e,t)=>{if(!e.test(version$2))throw new Error(t);console.warn(t)},IS_CID_DEPRECATION="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n",bases$3={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$1,...base36$1,...base58,...base64$4},hashes={...sha2,...identity$4},codecs$1={raw:raw$1,json:json};var basics=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",CID:CID$b,hasher:hasher,digest:digest$1,varint:varint$5,bytes:bytes,hashes:hashes,bases:bases$3,codecs:codecs$1}),require$$0$2=getAugmentedNamespace(basics);const{bases:bases$2}=require$$0$2;function createCodec$4(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$4=createCodec$4("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),ascii$4=createCodec$4("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),BASES$4={utf8:string$4,"utf-8":string$4,hex:bases$2.base16,latin1:ascii$4,ascii:ascii$4,binary:ascii$4,...bases$2};var bases_1=BASES$4;const bases$1=bases_1;function fromString$9(e,t="utf8"){const r=bases$1[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}var fromString_1=fromString$9;const bases=bases_1;function toString$a(e,t="utf8"){const r=bases[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var toString_1=toString$a;function xor$1(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");const r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}var xor_1=xor$1;const compare$1=compare_1,concat$8=concat_1,equals$5=equals_1,fromString$8=fromString_1,toString$9=toString_1,xor=xor_1;var uint8arrays={compare:compare$1,concat:concat$8,equals:equals$5,fromString:fromString$8,toString:toString$9,xor:xor};function decode$6(e){return uint8arrays.toString(uint8arrays.fromString(e,"base64pad"))}function encode$8(e){return uint8arrays.toString(uint8arrays.fromString(e),"base64pad")}function urlDecode(e){return decode$6(makeUrlUnsafe(e))}function urlEncode(e){return makeUrlSafe(encode$8(e))}function makeUrlSafe(e){return e.replace(/\//g,"_").replace(/\+/g,"-").replace(/=+$/,"")}function makeUrlUnsafe(e){return e.replace(/_/g,"/").replace(/-/g,"+")}var base64$2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",decode:decode$6,encode:encode$8,urlDecode:urlDecode,urlEncode:urlEncode,makeUrlSafe:makeUrlSafe,makeUrlUnsafe:makeUrlUnsafe});const toUint8Array=async e=>new Promise(((t,r)=>{const n=()=>r(new Error("Failed to read file")),o=new FileReader;o.addEventListener("load",(e=>{const r=e?.target?.result||null;null!=r?t("string"!=typeof r?new Uint8Array(r):uint8arrays.fromString(r)):n()})),o.addEventListener("error",(()=>o.abort())),o.addEventListener("abort",n),o.readAsArrayBuffer(e)}));var blob=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toUint8Array:toUint8Array}),nobleEd25519={},__viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:__viteBrowserExternal}),require$$0$1=getAugmentedNamespace(__viteBrowserExternal$1);!function(e){
/*! noble-ed25519 - MIT License (c) Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.verify=e.sign=e.getPublicKey=e.SignResult=e.Signature=e.Point=e.ExtendedPoint=e.CURVE=void 0;const t={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,P:2n**255n-19n,n:2n**252n+27742317777372353535851937790883648493n,h:8n,Gx:15112221349535400772501151409588531511454012693041857206046113283949847762202n,Gy:46316835694926478169428394003475163141307993866256225615783033603165251855960n};e.CURVE=t;const r=32,n=19681161376707505956807079304988542015446066515923890162744021073123829784752n,o=25063068953384623474111414158702152701244531502492656460079210482610430750235n,i=54469307008909316920995813868745141605393597292927456921205312896311721017578n,a=1159843021668779879193775521855586647937357759715417654439879720876111806838n,s=40440834346308536858101042469323190826248399146238708352240133220865137265952n;class u{constructor(e,t,r,n){this.x=e,this.y=t,this.z=r,this.t=n}static fromAffine(e){if(!(e instanceof l))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(l.ZERO)?u.ZERO:new u(e.x,e.y,1n,v(e.x*e.y))}static toAffineBatch(e){const r=function(e,r=t.P){const n=e.length,o=new Array(n);let i=1n;for(let t=0;t<n;t++)0n!==e[t]&&(o[t]=i,i=v(i*e[t],r));i=w(i,r);for(let t=n-1;t>=0;t--){if(0n===e[t])continue;let n=v(i*e[t],r);e[t]=v(i*o[t],r),i=n}return e}(e.map((e=>e.z)));return e.map(((e,t)=>e.toAffine(r[t])))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}static fromRistrettoHash(e){const t=b(e.slice(0,r)),n=this.calcElligatorRistrettoMap(t),o=b(e.slice(r,64)),i=this.calcElligatorRistrettoMap(o);return n.add(i)}static calcElligatorRistrettoMap(e){const{d:r}=t,i=v(n*e*e),c=v((i+1n)*a);let l=-1n;const f=v((l-r*i)*v(i+r));let{isValid:h,value:d}=k(c,f),p=v(d*e);m(p)||(p=v(-p)),h||(d=p),h||(l=i);const y=v(l*(i-1n)*s-f),_=d*d,g=v((d+d)*f),b=v(y*o),w=v(1n-_),$=v(1n+_);return new u(v(g*$),v(w*b),v(b*$),v(g*w))}static fromRistrettoBytes(e){const{a:n,d:o}=t,i="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",a=b(e);if(!function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(y(a,r),e)||m(a))throw new Error(i);const s=v(a*a),c=v(1n+n*s),l=v(1n-n*s),f=v(c*c),h=v(l*l),d=v(n*o*f-h),{isValid:p,value:_}=A(v(d*h)),g=v(_*l),w=v(_*g*d);let $=v((a+a)*g);m($)&&($=v(-$));const k=v(c*w),E=v($*k);if(!p||m(E)||0n===k)throw new Error(i);return new u($,k,1n,E)}toRistrettoBytes(){let{x:e,y:t,z:o,t:a}=this;const s=v((o+t)*(o-t)),u=v(e*t),{value:c}=A(v(s*u**2n)),l=v(c*s),f=v(c*u),h=v(l*f*a);let d;m(a*h)?([e,t]=[v(t*n),v(e*n)],d=v(l*i)):d=f,m(e*h)&&(t=v(-t));let p=v((o-t)*d);return m(p)&&(p=v(-p)),y(p,r)}equals(e){const t=e,[r,n,o,i]=[this.t,t.t,this.z,t.z];return v(r*i)===v(n*o)}negate(){return new u(v(-this.x),this.y,this.z,v(-this.t))}double(){const e=this.x,r=this.y,n=this.z,{a:o}=t,i=v(e**2n),a=v(r**2n),s=v(2n*n**2n),c=v(o*i),l=v((e+r)**2n-i-a),f=v(c+a),h=v(f-s),d=v(c-a),p=v(l*h),y=v(f*d),m=v(l*d),_=v(h*f);return new u(p,y,_,m)}add(e){const t=this.x,r=this.y,n=this.z,o=this.t,i=e.x,a=e.y,s=e.z,c=e.t,l=v((r-t)*(a+i)),f=v((r+t)*(a-i)),h=v(f-l);if(0n===h)return this.double();const d=v(2n*n*c),p=v(2n*o*s),y=v(p+d),m=v(f+l),_=v(p-d),g=v(y*h),b=v(m*_),w=v(y*_),$=v(h*m);return new u(g,b,$,w)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){if(!_(e))throw new TypeError("Point#multiply: expected number or bigint");let r=v(BigInt(e),t.n);if(1n===r)return this;let n=u.ZERO,o=this;for(;r>0n;)1n&r&&(n=n.add(o)),o=o.double(),r>>=1n;return n}precomputeWindow(e){const t=256/e+1;let r=[],n=this,o=n;for(let i=0;i<t;i++){o=n,r.push(o);for(let t=1;t<2**(e-1);t++)o=o.add(n),r.push(o);n=o.double()}return r}wNAF(e,t){!t&&this.equals(u.BASE)&&(t=l.BASE);const r=t&&t._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let n=t&&c.get(t);n||(n=this.precomputeWindow(r),t&&1!==r&&(n=u.normalizeZ(n),c.set(t,n)));let o=u.ZERO,i=u.ZERO;const a=256/r+1,s=2**(r-1),f=BigInt(2**r-1),h=2**r,d=BigInt(r);for(let u=0;u<a;u++){const t=u*s;let r=Number(e&f);if(e>>=d,r>s&&(r-=h,e+=1n),0===r)i=i.add(u%2?n[t].negate():n[t]);else{const e=n[t+Math.abs(r)-1];o=o.add(r<0?e.negate():e)}}return[o,i]}multiply(e,r){if(!_(e))throw new TypeError("Point#multiply: expected number or bigint");const n=v(BigInt(e),t.n);return u.normalizeZ(this.wNAF(n,r))[0]}toAffine(e=w(this.z)){const t=v(this.x*e),r=v(this.y*e);return new l(t,r)}}e.ExtendedPoint=u,u.BASE=new u(t.Gx,t.Gy,1n,v(t.Gx*t.Gy)),u.ZERO=new u(0n,1n,1n,0n);const c=new WeakMap;class l{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}static fromHex(e){const{d:r,P:n}=t,o=e instanceof Uint8Array?e:d(e);if(32!==o.length)throw new Error("Point.fromHex: expected 32 bytes");const i=o[31],a=-129&i,s=0!=(128&i),u=g(Uint8Array.from(Array.from(o.slice(0,31)).concat(a)));if(u>=n)throw new Error("Point.fromHex expects hex <= Fp");const c=v(u*u),f=v(c-1n),h=v(r*c+1n);let{isValid:p,value:y}=k(f,h);if(!p)throw new Error("Point.fromHex: invalid y coordinate");return s!==(1n===(1n&y))&&(y=v(-y)),new l(y,u)}static async fromPrivateKey(t){const r=await e.utils.sha512(B(t));return l.BASE.multiply(S(r))}toRawBytes(){const e=p(this.y),t=new Uint8Array(r);for(let o=e.length-2,i=0;i<r&&o>=0;o-=2,i++)t[i]=Number.parseInt(e[o]+e[o+1],16);const n=1n&this.x?128:0;return t[31]|=n,t}toHex(){return h(this.toRawBytes())}toX25519(){return v((1n+this.y)*w(1n-this.y))}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new l(v(-this.x),this.y)}add(e){return u.fromAffine(this).add(u.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return u.fromAffine(this).multiply(e,this).toAffine()}}e.Point=l,l.BASE=new l(t.Gx,t.Gy),l.ZERO=new l(0n,1n);class f{constructor(e,t){this.r=e,this.s=t}static fromHex(e){e=T(e);const r=l.fromHex(e.slice(0,32)),n=g(e.slice(32));if(!(0<(o=n)&&o<t.n))throw new Error("Signature.fromHex expects s <= CURVE.n");var o;return new f(r,n)}toRawBytes(){const e=d(p(this.s)).reverse(),t=new Uint8Array(r);t.set(e);const n=new Uint8Array(64);return n.set(this.r.toRawBytes()),n.set(t,32),n}toHex(){return h(this.toRawBytes())}}function h(e){let t="";for(let r=0;r<e.length;r++)t+=e[r].toString(16).padStart(2,"0");return t}function d(e){if("string"!=typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){const n=2*r;t[r]=Number.parseInt(e.slice(n,n+2),16)}return t}function p(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function y(e,t=32){return d(p(e).padStart(2*t,"0")).reverse()}function m(e){return 1n===(1n&v(e))}function _(e){return"bigint"==typeof e&&e>0n||!!("number"==typeof e&&e>0&&Number.isSafeInteger(e))}function g(e){let t=0n;for(let r=0;r<e.length;r++)t+=BigInt(e[r])<<8n*BigInt(r);return t}function b(e){return v(g(e)&2n**255n-1n)}function v(e,r=t.P){const n=e%r;return n>=0n?n:r+n}function w(e,r=t.P){if(0n===e||r<=0n)throw new Error(`invert: expected positive integers, got n=${e} mod=${r}`);let n=v(e,r),o=r,[i,a,s,u]=[0n,1n,1n,0n];for(;0n!==n;){const e=o/n,t=o%n,r=i-s*e,c=a-u*e;[o,n]=[n,t],[i,a]=[s,u],[s,u]=[r,c]}if(1n!==o)throw new Error("invert: does not exist");return v(i,r)}function $(e,r){const{P:n}=t;let o=e;for(;r-- >0n;)o*=o,o%=n;return o}function k(e,r){const o=v(r*r*r),i=v(o*o*r);let a=v(e*o*function(e){const{P:r}=t,n=e*e%r*e%r,o=$(n,2n)*n%r,i=$(o,1n)*e%r,a=$(i,5n)*i%r,s=$(a,10n)*a%r,u=$(s,20n)*s%r,c=$(u,40n)*u%r,l=$(c,80n)*c%r,f=$(l,80n)*c%r,h=$(f,10n)*a%r;return $(h,2n)*e%r}(e*i));const s=v(r*a*a),u=a,c=v(a*n),l=s===e,f=s===v(-e),h=s===v(-e*n);return l&&(a=u),(f||h)&&(a=c),m(a)&&(a=v(-a)),{isValid:l||f,value:a}}function A(e){return k(1n,e)}async function E(...r){const n=function(...e){if(1===e.length)return e[0];const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){const t=e[n];r.set(t,o),o+=t.length}return r}(...r);return v(g(await e.utils.sha512(n)),t.n)}function S(e){const n=e.slice(0,r);return n[0]&=248,n[31]&=127,n[31]|=64,v(g(n),t.n)}function T(e){return e instanceof Uint8Array?e:d(e)}function B(e){let t;if("bigint"==typeof e||"number"==typeof e&&Number.isSafeInteger(e)){if(t=BigInt(e),t<0n||t>2n**256n)throw new Error("Expected 32 bytes of private key");e=t.toString(16).padStart(64,"0")}if("string"==typeof e){if(64!==e.length)throw new Error("Expected 32 bytes of private key");return d(e)}if(e instanceof Uint8Array){if(32!==e.length)throw new Error("Expected 32 bytes of private key");return e}throw new TypeError("Expected valid private key")}e.Signature=f,e.SignResult=f,e.getPublicKey=async function(e){const t=await l.fromPrivateKey(e);return"string"==typeof e?t.toHex():t.toRawBytes()},e.sign=async function(n,o){const i=await e.utils.sha512(B(o)),a=S(i),s=l.BASE.multiply(a),u=T(n),c=await E((h=i,h.slice(r)),u);var h;const d=l.BASE.multiply(c),p=v(c+await E(d.toRawBytes(),s.toRawBytes(),u)*a,t.n),y=new f(d,p);return"string"==typeof n?y.toHex():y.toRawBytes()},e.verify=async function(e,t,r){t=T(t),r instanceof l||(r=l.fromHex(r)),e instanceof f||(e=f.fromHex(e));const n=await E(e.r.toRawBytes(),r.toRawBytes(),t),o=u.fromAffine(r).multiplyUnsafe(n),i=u.BASE.multiply(e.s);return u.fromAffine(e.r).add(o).subtract(i).multiplyUnsafe(8n).equals(u.ZERO)},l.BASE._setWindowSize(8),e.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],randomPrivateKey:(e=32)=>{if("object"==typeof self&&"crypto"in self)return self.crypto.getRandomValues(new Uint8Array(e));if("object"==typeof process&&"node"in process.versions){const{randomBytes:t}=require$$0$1;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},sha512:async e=>{if("object"==typeof self&&"crypto"in self){const t=await self.crypto.subtle.digest("SHA-512",e.buffer);return new Uint8Array(t)}if("object"==typeof process&&"node"in process.versions){const{createHash:t}=require$$0$1,r=t("sha512");return r.update(e),Uint8Array.from(r.digest())}throw new Error("The environment doesn't have sha512 function")},precompute(e=8,t=l.BASE){const r=t.equals(l.BASE)?t:new l(t.x,t.y);return r._setWindowSize(e),r.multiply(1n),r}}}(nobleEd25519);var rsa$2={},keys$5={},constants$3={},types$2={},exports,CryptoSystem2,EccCurve2,RsaSize2,SymmAlg2,SymmKeyLength2,HashAlg2,CharSize2,KeyUse2;exports=types$2,Object.defineProperty(exports,"__esModule",{value:!0}),(CryptoSystem2=exports.CryptoSystem||(exports.CryptoSystem={})).ECC="ecc",CryptoSystem2.RSA="rsa",(EccCurve2=exports.EccCurve||(exports.EccCurve={})).P_256="P-256",EccCurve2.P_384="P-384",EccCurve2.P_521="P-521",(RsaSize2=exports.RsaSize||(exports.RsaSize={}))[RsaSize2.B1024=1024]="B1024",RsaSize2[RsaSize2.B2048=2048]="B2048",RsaSize2[RsaSize2.B4096=4096]="B4096",(SymmAlg2=exports.SymmAlg||(exports.SymmAlg={})).AES_CTR="AES-CTR",SymmAlg2.AES_CBC="AES-CBC",(SymmKeyLength2=exports.SymmKeyLength||(exports.SymmKeyLength={}))[SymmKeyLength2.B128=128]="B128",SymmKeyLength2[SymmKeyLength2.B192=192]="B192",SymmKeyLength2[SymmKeyLength2.B256=256]="B256",(HashAlg2=exports.HashAlg||(exports.HashAlg={})).SHA_1="SHA-1",HashAlg2.SHA_256="SHA-256",HashAlg2.SHA_384="SHA-384",HashAlg2.SHA_512="SHA-512",(CharSize2=exports.CharSize||(exports.CharSize={}))[CharSize2.B8=8]="B8",CharSize2[CharSize2.B16=16]="B16",(KeyUse2=exports.KeyUse||(exports.KeyUse={})).Read="read",KeyUse2.Write="write",function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=types$2;e.ECC_READ_ALG="ECDH",e.ECC_WRITE_ALG="ECDSA",e.RSA_READ_ALG="RSA-OAEP",e.RSA_WRITE_ALG="RSASSA-PKCS1-v1_5",e.SALT_LENGTH=128,e.DEFAULT_CRYPTOSYSTEM="ecc",e.DEFAULT_ECC_CURVE=t.EccCurve.P_256,e.DEFAULT_RSA_SIZE=t.RsaSize.B2048,e.DEFAULT_SYMM_ALG=t.SymmAlg.AES_CTR,e.DEFAULT_SYMM_LEN=t.SymmKeyLength.B256,e.DEFAULT_CTR_LEN=64,e.DEFAULT_HASH_ALG=t.HashAlg.SHA_256,e.DEFAULT_CHAR_SIZE=t.CharSize.B16,e.DEFAULT_STORE_NAME="keystore",e.DEFAULT_READ_KEY_NAME="read-key",e.DEFAULT_WRITE_KEY_NAME="write-key",e.default={ECC_READ_ALG:e.ECC_READ_ALG,ECC_WRITE_ALG:e.ECC_WRITE_ALG,RSA_READ_ALG:e.RSA_READ_ALG,RSA_WRITE_ALG:e.RSA_WRITE_ALG,SALT_LENGTH:e.SALT_LENGTH,DEFAULT_CRYPTOSYSTEM:e.DEFAULT_CRYPTOSYSTEM,DEFAULT_ECC_CURVE:e.DEFAULT_ECC_CURVE,DEFAULT_RSA_SIZE:e.DEFAULT_RSA_SIZE,DEFAULT_SYMM_ALG:e.DEFAULT_SYMM_ALG,DEFAULT_CTR_LEN:e.DEFAULT_CTR_LEN,DEFAULT_HASH_ALG:e.DEFAULT_HASH_ALG,DEFAULT_CHAR_SIZE:e.DEFAULT_CHAR_SIZE,DEFAULT_STORE_NAME:e.DEFAULT_STORE_NAME,DEFAULT_READ_KEY_NAME:e.DEFAULT_READ_KEY_NAME,DEFAULT_WRITE_KEY_NAME:e.DEFAULT_WRITE_KEY_NAME}}(constants$3);var utils$6={},buffer$2={},base64Js={};base64Js.byteLength=byteLength$1,base64Js.toByteArray=toByteArray$1,base64Js.fromByteArray=fromByteArray$1;for(var lookup$3=[],revLookup$1=[],Arr$1="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,len=code.length;i<len;++i)lookup$3[i]=code[i],revLookup$1[code.charCodeAt(i)]=i;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function byteLength$1(e){var t=getLens(e),r=t[0],n=t[1];return 3*(r+n)/4-n}function _byteLength(e,t,r){return 3*(t+r)/4-r}function toByteArray$1(e){var t,r,n=getLens(e),o=n[0],i=n[1],a=new Arr$1(_byteLength(e,o,i)),s=0,u=i>0?o-4:o;for(r=0;r<u;r+=4)t=revLookup$1[e.charCodeAt(r)]<<18|revLookup$1[e.charCodeAt(r+1)]<<12|revLookup$1[e.charCodeAt(r+2)]<<6|revLookup$1[e.charCodeAt(r+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===i&&(t=revLookup$1[e.charCodeAt(r)]<<2|revLookup$1[e.charCodeAt(r+1)]>>4,a[s++]=255&t),1===i&&(t=revLookup$1[e.charCodeAt(r)]<<10|revLookup$1[e.charCodeAt(r+1)]<<4|revLookup$1[e.charCodeAt(r+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a}function tripletToBase64$1(e){return lookup$3[e>>18&63]+lookup$3[e>>12&63]+lookup$3[e>>6&63]+lookup$3[63&e]}function encodeChunk$1(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(tripletToBase64$1(n));return o.join("")}function fromByteArray$1(e){for(var t,r=e.length,n=r%3,o=[],i=16383,a=0,s=r-n;a<s;a+=i)o.push(encodeChunk$1(e,a,a+i>s?s:a+i));return 1===n?(t=e[r-1],o.push(lookup$3[t>>2]+lookup$3[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(lookup$3[t>>10]+lookup$3[t>>4&63]+lookup$3[t<<2&63]+"=")),o.join("")}revLookup$1["-".charCodeAt(0)]=62,revLookup$1["_".charCodeAt(0)]=63;var ieee754={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?o-1:0,h=r?-1:1,d=e[t+f];for(f+=h,i=d&(1<<-l)-1,d>>=-l,l+=s;l>0;i=256*i+e[t+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),i-=c}return(d?-1:1)*a*Math.pow(2,i-n)},write:function(e,t,r,n,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,o),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[r+d]=255&s,d+=p,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[r+d]=255&a,d+=p,a/=256,c-=8);e[r+d-p]|=128*y}};
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
(function(e){const t=base64Js,r=ieee754,n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},e.INSPECT_MAX_BYTES=50;const o=2147483647;function i(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,r)}function s(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|d(e,t);let n=i(r);const o=n.write(e,t);o!==r&&(n=n.slice(0,o));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(q(e,Uint8Array)){const t=new Uint8Array(e);return f(t.buffer,t.byteOffset,t.byteLength)}return l(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer))return f(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(q(e,SharedArrayBuffer)||e&&q(e.buffer,SharedArrayBuffer)))return f(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return a.from(n,t,r);const o=function(e){if(a.isBuffer(e)){const t=0|h(e.length),r=i(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||V(e.length)?i(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),i(e<0?0:0|h(e))}function l(e){const t=e.length<0?0:0|h(e.length),r=i(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function f(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,a.prototype),n}function h(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function d(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return H(e).length;default:if(o)return n?-1:G(e).length;t=(""+t).toLowerCase(),o=!0}}function p(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return B(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return k(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),V(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=a.from(t,n)),a.isBuffer(t))return 0===t.length?-1:_(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):_(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,n,o){let i,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){let n=-1;for(i=r;i<s;i++)if(c(e,i)===c(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===u)return n*a}else-1!==n&&(i-=i-n),n=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){let r=!0;for(let n=0;n<u;n++)if(c(e,i+n)!==c(t,n)){r=!1;break}if(r)return i}return-1}function g(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=t.length;let a;for(n>i/2&&(n=i/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(V(n))return a;e[r+a]=n}return a}function b(e,t,r,n){return W(G(t,e.length-r),e,r,n)}function v(e,t,r,n){return W(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return W(H(t),e,r,n)}function $(e,t,r,n){return W(function(e,t){let r,n,o;const i=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function k(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function A(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let i=null,a=t>239?4:t>223?3:t>191?2:1;if(o+a<=r){let r,n,s,u;switch(a){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(i=u));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:r=e[o+1],n=e[o+2],s=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&s,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=a}return function(e){const t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=E));return r}(n)}e.kMaxLength=o,a.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,r){return s(e,t,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?i(e):void 0!==t?"string"==typeof r?i(e).fill(t,r):i(e).fill(t):i(e)}(e,t,r)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(q(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=a.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(q(t,Uint8Array))o+t.length>n.length?(a.isBuffer(t)||(t=a.from(t)),t.copy(n,o)):Uint8Array.prototype.set.call(n,t,o);else{if(!a.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},a.byteLength=d,a.prototype._isBuffer=!0,a.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},a.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},a.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},a.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?A(this,0,e):p.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(e,t,r,n,o){if(q(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0);const u=Math.min(i,s),c=this.slice(n,o),l=e.slice(t,r);for(let a=0;a<u;++a)if(c[a]!==l[a]){i=c[a],s=l[a];break}return i<s?-1:s<i?1:0},a.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},a.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},a.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},a.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return g(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":case"latin1":case"binary":return v(this,e,t,r);case"base64":return w(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function S(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function T(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function B(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let i=t;i<r;++i)o+=Y[e[i]];return o}function x(e,t,r){const n=e.slice(t,r);let o="";for(let i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function C(e,t,r,n,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function D(e,t,r,n,o){M(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function R(e,t,r,n,o){M(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function N(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,n,o,i){return t=+t,n>>>=0,i||N(e,0,n,4),r.write(e,t,n,o,23,4),n+4}function L(e,t,n,o,i){return t=+t,n>>>=0,i||N(e,0,n,8),r.write(e,t,n,o,52,8),n+8}a.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,a.prototype),n},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=X((function(e){F(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))})),a.prototype.readBigUInt64BE=X((function(e){F(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)})),a.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},a.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||I(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},a.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=X((function(e){F(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),a.prototype.readBigInt64BE=X((function(e){F(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||z(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),r.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),r.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){C(this,e,t,r,Math.pow(2,8*r)-1,0)}let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){C(this,e,t,r,Math.pow(2,8*r)-1,0)}let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=X((function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=X((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let o=0,i=1,a=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+r},a.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);C(this,e,t,r,n-1,-n)}let o=r-1,i=1,a=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+r},a.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||C(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=X((function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=X((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},a.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},a.prototype.writeDoubleLE=function(e,t,r){return L(this,e,t,!0,r)},a.prototype.writeDoubleBE=function(e,t,r){return L(this,e,t,!1,r)},a.prototype.copy=function(e,t,r,n){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),o},a.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{const i=a.isBuffer(e)?e:a.from(e,n),s=i.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=i[o%s]}return this};const P={};function O(e,t,r){P[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function M(e,t,r,n,o,i){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let o;throw o=i>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(i+1)}${n}`:`>= -(2${n} ** ${8*(i+1)-1}${n}) and < 2 ** ${8*(i+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new P.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,r){F(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||z(t,e.length-(r+1))}(n,o,i)}function F(e,t){if("number"!=typeof e)throw new P.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,r){if(Math.floor(e)!==e)throw F(e,r),new P.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new P.ERR_BUFFER_OUT_OF_BOUNDS;throw new P.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}O("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),O("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),O("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=U(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=U(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n}),RangeError);const K=/[^+/0-9A-Za-z-_]/g;function G(e,t){let r;t=t||1/0;const n=e.length;let o=null;const i=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function H(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(K,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function X(e){return"undefined"==typeof BigInt?J:e}function J(){throw new Error("BigInt not supported")}})(buffer$2),function(e){var t=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},r=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var n=types$2,o=buffer$2;function i(e,t){var r=8===t?new Uint8Array(e):new Uint16Array(e);return Array.from(r).map((function(e){return String.fromCharCode(e)})).join("")}function a(e){var t=i(e,8);return o.Buffer.from(t,"binary").toString("base64")}function s(e,t){for(var r=8===t?new Uint8Array(e.length):new Uint16Array(e.length),n=0,o=e.length;n<o;n++)r[n]=e.charCodeAt(n);return r.buffer}function u(e){return s(o.Buffer.from(e,"base64").toString("binary"),8)}function c(){return new Uint8Array([1,0,1])}function l(e){var t=new Uint8Array(e);return globalThis.crypto.getRandomValues(t),t.buffer}function f(e,t){var r=new Uint8Array(e),n=new Uint8Array(t),o=new Uint8Array(r.length+n.length);return o.set(r),o.set(n,r.length),o.buffer}function h(e){return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2,new Promise((function(t){var r=new MessageChannel,n=r.port1;r.port2.onmessage=function(e){return t(e.data)},n.postMessage(e)}))]}))}))}e.arrBufToStr=i,e.arrBufToBase64=a,e.strToArrBuf=s,e.base64ToArrBuf=u,e.publicExponent=c,e.randomBuf=l,e.joinBufs=f,e.normalizeUtf8ToBuf=function(t){return e.normalizeToBuf(t,(function(e){return s(e,n.CharSize.B8)}))},e.normalizeUtf16ToBuf=function(t){return e.normalizeToBuf(t,(function(e){return s(e,n.CharSize.B16)}))},e.normalizeBase64ToBuf=function(t){return e.normalizeToBuf(t,u)},e.normalizeUnicodeToBuf=function(t,r){switch(r){case 8:return e.normalizeUtf8ToBuf(t);default:return e.normalizeUtf16ToBuf(t)}},e.normalizeToBuf=function(e,t){if("string"==typeof e)return t(e);if("object"==typeof e&&void 0!==e.byteLength)return new Uint8Array(e).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")},e.structuralClone=h,e.default={arrBufToStr:i,arrBufToBase64:a,strToArrBuf:s,base64ToArrBuf:u,publicExponent:c,randomBuf:l,joinBufs:f,normalizeUtf8ToBuf:e.normalizeUtf8ToBuf,normalizeUtf16ToBuf:e.normalizeUtf16ToBuf,normalizeBase64ToBuf:e.normalizeBase64ToBuf,normalizeToBuf:e.normalizeToBuf,structuralClone:h}}(utils$6);var utils$5=getDefaultExportFromCjs(utils$6),errors$1={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=types$2;function r(t){if(!t||null===t)throw e.KeyDoesNotExist;if(void 0===t.privateKey)throw e.NotKeyPair;return t}function n(t){if(!t||null===t)throw e.KeyDoesNotExist;if(void 0!==t.privateKey||void 0===t.algorithm)throw e.NotKey;return t}function o(r){a(r,[t.CryptoSystem.ECC,t.CryptoSystem.RSA],e.UnsupportedCrypto)}function i(r){a(r,[t.KeyUse.Read,t.KeyUse.Write],e.InvalidKeyUse)}function a(e,t,r){if(!t.some((function(t){return t===e})))throw r}e.KeyDoesNotExist=new Error("Key does not exist. Make sure you properly instantiated the keystore."),e.NotKeyPair=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),e.NotKey=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),e.ECCNotEnabled=new Error("ECC is not enabled for this browser. Please use RSA instead."),e.UnsupportedCrypto=new Error("Cryptosystem not supported. Please use ECC or RSA"),e.InvalidKeyUse=new Error("Invalid key use. Please use 'read' or 'write"),e.checkIsKeyPair=r,e.checkIsKey=n,e.checkValidCryptoSystem=o,e.checkValidKeyUse=i,e.default={KeyDoesNotExist:e.KeyDoesNotExist,NotKeyPair:e.NotKeyPair,NotKey:e.NotKey,ECCNotEnabled:e.ECCNotEnabled,UnsupportedCrypto:e.UnsupportedCrypto,InvalidKeyUse:e.InvalidKeyUse,checkIsKeyPair:r,checkIsKey:n,checkValidCryptoSystem:o,checkValidKeyUse:i}}(errors$1);var __awaiter$8=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},__generator$a=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(keys$5,"__esModule",{value:!0});var constants_1$5=constants$3,types_1$4=types$2,utils_1$f=utils$6,errors_1$3=errors$1;function makeKeypair$3(e,t,r){return __awaiter$8(this,void 0,void 0,(function(){var n,o;return __generator$a(this,(function(i){return errors_1$3.checkValidKeyUse(r),n=r===types_1$4.KeyUse.Read?constants_1$5.RSA_READ_ALG:constants_1$5.RSA_WRITE_ALG,o=r===types_1$4.KeyUse.Read?["encrypt","decrypt"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:n,modulusLength:e,publicExponent:utils_1$f.default.publicExponent(),hash:{name:t}},!1,o)]}))}))}function stripKeyHeader$1(e){return e.replace("-----BEGIN PUBLIC KEY-----\n","").replace("\n-----END PUBLIC KEY-----","")}function importPublicKey$3(e,t,r){return __awaiter$8(this,void 0,void 0,(function(){var n,o,i;return __generator$a(this,(function(a){return errors_1$3.checkValidKeyUse(r),n=r===types_1$4.KeyUse.Read?constants_1$5.RSA_READ_ALG:constants_1$5.RSA_WRITE_ALG,o=r===types_1$4.KeyUse.Read?["encrypt"]:["verify"],i=utils_1$f.default.base64ToArrBuf(stripKeyHeader$1(e)),[2,globalThis.crypto.subtle.importKey("spki",i,{name:n,hash:{name:t}},!0,o)]}))}))}keys$5.makeKeypair=makeKeypair$3,keys$5.importPublicKey=importPublicKey$3,keys$5.default={makeKeypair:makeKeypair$3,importPublicKey:importPublicKey$3};var operations$4={},__awaiter$7=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},__generator$9=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(operations$4,"__esModule",{value:!0});var keys_1$2=keys$5,utils_1$e=utils$6,constants_1$4=constants$3,types_1$3=types$2;function sign$2(e,t,r){return void 0===r&&(r=constants_1$4.DEFAULT_CHAR_SIZE),__awaiter$7(this,void 0,void 0,(function(){return __generator$9(this,(function(n){return[2,globalThis.crypto.subtle.sign({name:constants_1$4.RSA_WRITE_ALG,saltLength:constants_1$4.SALT_LENGTH},t,utils_1$e.normalizeUnicodeToBuf(e,r))]}))}))}function verify$2(e,t,r,n,o){return void 0===n&&(n=constants_1$4.DEFAULT_CHAR_SIZE),void 0===o&&(o=constants_1$4.DEFAULT_HASH_ALG),__awaiter$7(this,void 0,void 0,(function(){var i,a,s,u;return __generator$9(this,(function(c){switch(c.label){case 0:return a=(i=globalThis.crypto.subtle).verify,s=[{name:constants_1$4.RSA_WRITE_ALG,saltLength:constants_1$4.SALT_LENGTH}],"string"!=typeof r?[3,2]:[4,keys_1$2.default.importPublicKey(r,o,types_1$3.KeyUse.Write)];case 1:return u=c.sent(),[3,3];case 2:u=r,c.label=3;case 3:return[2,a.apply(i,s.concat([u,utils_1$e.normalizeBase64ToBuf(t),utils_1$e.normalizeUnicodeToBuf(e,n)]))]}}))}))}function encrypt$4(e,t,r,n){return void 0===r&&(r=constants_1$4.DEFAULT_CHAR_SIZE),void 0===n&&(n=constants_1$4.DEFAULT_HASH_ALG),__awaiter$7(this,void 0,void 0,(function(){var o,i,a,s;return __generator$9(this,(function(u){switch(u.label){case 0:return i=(o=globalThis.crypto.subtle).encrypt,a=[{name:constants_1$4.RSA_READ_ALG}],"string"!=typeof t?[3,2]:[4,keys_1$2.default.importPublicKey(t,n,types_1$3.KeyUse.Read)];case 1:return s=u.sent(),[3,3];case 2:s=t,u.label=3;case 3:return[2,i.apply(o,a.concat([s,utils_1$e.normalizeUnicodeToBuf(e,r)]))]}}))}))}function decrypt$4(e,t){return __awaiter$7(this,void 0,void 0,(function(){var r;return __generator$9(this,(function(n){return r=utils_1$e.normalizeBase64ToBuf(e),[2,globalThis.crypto.subtle.decrypt({name:constants_1$4.RSA_READ_ALG},t,r)]}))}))}function getPublicKey$2(e){return __awaiter$7(this,void 0,void 0,(function(){var t;return __generator$9(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("spki",e.publicKey)];case 1:return t=r.sent(),[2,utils_1$e.default.arrBufToBase64(t)]}}))}))}operations$4.sign=sign$2,operations$4.verify=verify$2,operations$4.encrypt=encrypt$4,operations$4.decrypt=decrypt$4,operations$4.getPublicKey=getPublicKey$2,operations$4.default={sign:sign$2,verify:verify$2,encrypt:encrypt$4,decrypt:decrypt$4,getPublicKey:getPublicKey$2};var keystore$2={},idb$1={},__awaiter$6=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},__generator$8=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(idb$1,"__esModule",{value:!0});var localforage_1=localforage$2.exports,errors_1$2=errors$1;function createStore$1(e){return localforage_1.default.createInstance({name:e})}function createIfDoesNotExist$1(e,t,r){return void 0===r&&(r=localforage_1.default),__awaiter$6(this,void 0,void 0,(function(){var n;return __generator$8(this,(function(o){switch(o.label){case 0:return[4,exists$1(e,r)];case 1:return o.sent()?[2]:[4,t()];case 2:return n=o.sent(),[4,put$1(e,n,r)];case 3:return o.sent(),[2]}}))}))}function put$1(e,t,r){return void 0===r&&(r=localforage_1.default),__awaiter$6(this,void 0,void 0,(function(){return __generator$8(this,(function(n){return[2,r.setItem(e,t)]}))}))}function getKeypair$1(e,t){return void 0===t&&(t=localforage_1.default),__awaiter$6(this,void 0,void 0,(function(){return __generator$8(this,(function(r){return[2,get$5(e,errors_1$2.checkIsKeyPair,t)]}))}))}function getKey$1(e,t){return void 0===t&&(t=localforage_1.default),__awaiter$6(this,void 0,void 0,(function(){return __generator$8(this,(function(r){return[2,get$5(e,errors_1$2.checkIsKey,t)]}))}))}function get$5(e,t,r){return void 0===r&&(r=localforage_1.default),__awaiter$6(this,void 0,void 0,(function(){var n;return __generator$8(this,(function(o){switch(o.label){case 0:return[4,r.getItem(e)];case 1:return[2,null===(n=o.sent())?null:t(n)]}}))}))}function exists$1(e,t){return void 0===t&&(t=localforage_1.default),__awaiter$6(this,void 0,void 0,(function(){return __generator$8(this,(function(r){switch(r.label){case 0:return[4,t.getItem(e)];case 1:return[2,null!==r.sent()]}}))}))}function rm$1(e,t){return void 0===t&&(t=localforage_1.default),__awaiter$6(this,void 0,void 0,(function(){return __generator$8(this,(function(r){return[2,t.removeItem(e)]}))}))}function dropStore$1(e){return __awaiter$6(this,void 0,void 0,(function(){return __generator$8(this,(function(t){return[2,e.dropInstance()]}))}))}function clear$4(e){return __awaiter$6(this,void 0,void 0,(function(){return __generator$8(this,(function(t){return e?[2,dropStore$1(e)]:[2,localforage_1.default.clear()]}))}))}idb$1.createStore=createStore$1,idb$1.createIfDoesNotExist=createIfDoesNotExist$1,idb$1.put=put$1,idb$1.getKeypair=getKeypair$1,idb$1.getKey=getKey$1,idb$1.get=get$5,idb$1.exists=exists$1,idb$1.rm=rm$1,idb$1.dropStore=dropStore$1,idb$1.clear=clear$4,idb$1.default={createStore:createStore$1,createIfDoesNotExist:createIfDoesNotExist$1,put:put$1,getKeypair:getKeypair$1,getKey:getKey$1,exists:exists$1,rm:rm$1,dropStore:dropStore$1,clear:clear$4};var config$2={},keys$4={},__awaiter$5=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},__generator$7=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(keys$4,"__esModule",{value:!0});var utils_1$d=utils$6,constants_1$3=constants$3,types_1$2=types$2,errors_1$1=errors$1;function makeKeypair$2(e,t){return __awaiter$5(this,void 0,void 0,(function(){var r,n;return __generator$7(this,(function(o){return errors_1$1.checkValidKeyUse(t),r=t===types_1$2.KeyUse.Read?constants_1$3.ECC_READ_ALG:constants_1$3.ECC_WRITE_ALG,n=t===types_1$2.KeyUse.Read?["deriveKey","deriveBits"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:r,namedCurve:e},!1,n)]}))}))}function importPublicKey$2(e,t,r){return __awaiter$5(this,void 0,void 0,(function(){var n,o,i;return __generator$7(this,(function(a){return errors_1$1.checkValidKeyUse(r),n=r===types_1$2.KeyUse.Read?constants_1$3.ECC_READ_ALG:constants_1$3.ECC_WRITE_ALG,o=r===types_1$2.KeyUse.Read?[]:["verify"],i=utils_1$d.default.base64ToArrBuf(e),[2,globalThis.crypto.subtle.importKey("raw",i,{name:n,namedCurve:t},!0,o)]}))}))}keys$4.makeKeypair=makeKeypair$2,keys$4.importPublicKey=importPublicKey$2,keys$4.default={makeKeypair:makeKeypair$2,importPublicKey:importPublicKey$2},function(e){var t=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},r=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},n=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=keys$4,i=constants$3,a=types$2,s=utils$6;function u(r,n){var o;return void 0===n&&(n=!0),o=r?t(t({},e.defaultConfig),r):e.defaultConfig,(null==r?void 0:r.type)||(o.type=n?a.CryptoSystem.ECC:a.CryptoSystem.RSA),o}function c(){return r(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return[4,o.default.makeKeypair(i.DEFAULT_ECC_CURVE,a.KeyUse.Read)];case 1:e=t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,s.default.structuralClone(e)];case 3:return t.sent(),[3,5];case 4:return t.sent(),[2,!1];case 5:return[2,!0]}}))}))}function l(e,r){return void 0===r&&(r={}),t(t({},e),r)}function f(e){return{alg:e.symmAlg,length:e.symmLen}}e.defaultConfig={type:i.DEFAULT_CRYPTOSYSTEM,curve:i.DEFAULT_ECC_CURVE,rsaSize:i.DEFAULT_RSA_SIZE,symmAlg:i.DEFAULT_SYMM_ALG,symmLen:i.DEFAULT_SYMM_LEN,hashAlg:i.DEFAULT_HASH_ALG,charSize:i.DEFAULT_CHAR_SIZE,storeName:i.DEFAULT_STORE_NAME,readKeyName:i.DEFAULT_READ_KEY_NAME,writeKeyName:i.DEFAULT_WRITE_KEY_NAME},e.normalize=u,e.eccEnabled=c,e.merge=l,e.symmKeyOpts=f,e.default={defaultConfig:e.defaultConfig,normalize:u,eccEnabled:c,merge:l,symmKeyOpts:f}}(config$2);var base$2={},aes$3={},keys$3={},__awaiter$4=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},__generator$6=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(keys$3,"__esModule",{value:!0});var utils_1$c=utils$6,constants_1$2=constants$3;function makeKey$1(e){return __awaiter$4(this,void 0,void 0,(function(){return __generator$6(this,(function(t){return[2,globalThis.crypto.subtle.generateKey({name:(null==e?void 0:e.alg)||constants_1$2.DEFAULT_SYMM_ALG,length:(null==e?void 0:e.length)||constants_1$2.DEFAULT_SYMM_LEN},!0,["encrypt","decrypt"])]}))}))}function importKey$1(e,t){return __awaiter$4(this,void 0,void 0,(function(){var r;return __generator$6(this,(function(n){return r=utils_1$c.default.base64ToArrBuf(e),[2,globalThis.crypto.subtle.importKey("raw",r,{name:(null==t?void 0:t.alg)||constants_1$2.DEFAULT_SYMM_ALG,length:(null==t?void 0:t.length)||constants_1$2.DEFAULT_SYMM_LEN},!0,["encrypt","decrypt"])]}))}))}keys$3.makeKey=makeKey$1,keys$3.importKey=importKey$1,keys$3.default={makeKey:makeKey$1,importKey:importKey$1};var operations$3={},__awaiter$3=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},__generator$5=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(operations$3,"__esModule",{value:!0});var keys_1$1=keys$3,utils_1$b=utils$6,constants_1$1=constants$3,types_1$1=types$2;function encryptBytes$1(e,t,r){return __awaiter$3(this,void 0,void 0,(function(){var n,o,i,a,s,u;return __generator$5(this,(function(c){switch(c.label){case 0:return n=utils_1$b.default.normalizeUtf16ToBuf(e),"string"!=typeof t?[3,2]:[4,keys_1$1.default.importKey(t,r)];case 1:return i=c.sent(),[3,3];case 2:i=t,c.label=3;case 3:return o=i,a=(null==r?void 0:r.alg)||constants_1$1.DEFAULT_SYMM_ALG,s=(null==r?void 0:r.iv)||utils_1$b.default.randomBuf(16),[4,globalThis.crypto.subtle.encrypt({name:a,iv:a===types_1$1.SymmAlg.AES_CTR?void 0:s,counter:a===types_1$1.SymmAlg.AES_CTR?new Uint8Array(s):void 0,length:a===types_1$1.SymmAlg.AES_CTR?constants_1$1.DEFAULT_CTR_LEN:void 0},o,n)];case 4:return u=c.sent(),[2,utils_1$b.default.joinBufs(s,u)]}}))}))}function decryptBytes$1(e,t,r){return __awaiter$3(this,void 0,void 0,(function(){var n,o,i,a,s,u;return __generator$5(this,(function(c){switch(c.label){case 0:return n=utils_1$b.default.normalizeBase64ToBuf(e),"string"!=typeof t?[3,2]:[4,keys_1$1.default.importKey(t,r)];case 1:return i=c.sent(),[3,3];case 2:i=t,c.label=3;case 3:return o=i,a=(null==r?void 0:r.alg)||constants_1$1.DEFAULT_SYMM_ALG,s=n.slice(0,16),u=n.slice(16),[4,globalThis.crypto.subtle.decrypt({name:a,iv:a===types_1$1.SymmAlg.AES_CTR?void 0:s,counter:a===types_1$1.SymmAlg.AES_CTR?new Uint8Array(s):void 0,length:a===types_1$1.SymmAlg.AES_CTR?constants_1$1.DEFAULT_CTR_LEN:void 0},o,u)];case 4:return[2,c.sent()]}}))}))}function encrypt$3(e,t,r){return __awaiter$3(this,void 0,void 0,(function(){var n;return __generator$5(this,(function(o){switch(o.label){case 0:return[4,encryptBytes$1(e,t,r)];case 1:return n=o.sent(),[2,utils_1$b.default.arrBufToBase64(n)]}}))}))}function decrypt$3(e,t,r){return __awaiter$3(this,void 0,void 0,(function(){var n;return __generator$5(this,(function(o){switch(o.label){case 0:return[4,decryptBytes$1(e,t,r)];case 1:return n=o.sent(),[2,utils_1$b.default.arrBufToStr(n,16)]}}))}))}function exportKey$1(e){return __awaiter$3(this,void 0,void 0,(function(){var t;return __generator$5(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("raw",e)];case 1:return t=r.sent(),[2,utils_1$b.default.arrBufToBase64(t)]}}))}))}operations$3.encryptBytes=encryptBytes$1,operations$3.decryptBytes=decryptBytes$1,operations$3.encrypt=encrypt$3,operations$3.decrypt=decrypt$3,operations$3.exportKey=exportKey$1,operations$3.default={encryptBytes:encryptBytes$1,decryptBytes:decryptBytes$1,encrypt:encrypt$3,decrypt:decrypt$3,exportKey:exportKey$1},function(e){var t=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0});var n=keys$3,o=operations$3;r(keys$3),r(operations$3),e.default=t(t({},n.default),o.default)}(aes$3);var aes$2=getDefaultExportFromCjs(aes$3),__awaiter$2=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},__generator$4=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(base$2,"__esModule",{value:!0});var aes_1=aes$3,idb_1$1=idb$1,utils_1$a=utils$6,config_1$1=config$2,errors_1=errors$1,KeyStoreBase$1=function(){function e(e,t){this.cfg=e,this.store=t}return e.prototype.writeKey=function(){return __awaiter$2(this,void 0,void 0,(function(){var e;return __generator$4(this,(function(t){switch(t.label){case 0:return[4,idb_1$1.default.getKeypair(this.cfg.writeKeyName,this.store)];case 1:return e=t.sent(),[2,errors_1.checkIsKeyPair(e)]}}))}))},e.prototype.readKey=function(){return __awaiter$2(this,void 0,void 0,(function(){var e;return __generator$4(this,(function(t){switch(t.label){case 0:return[4,idb_1$1.default.getKeypair(this.cfg.readKeyName,this.store)];case 1:return e=t.sent(),[2,errors_1.checkIsKeyPair(e)]}}))}))},e.prototype.getSymmKey=function(e,t){return __awaiter$2(this,void 0,void 0,(function(){var r,n,o;return __generator$4(this,(function(i){switch(i.label){case 0:return r=config_1$1.default.merge(this.cfg,t),[4,idb_1$1.default.getKey(e,this.store)];case 1:return null!==(n=i.sent())?[2,n]:[4,aes_1.default.makeKey(config_1$1.default.symmKeyOpts(r))];case 2:return o=i.sent(),[4,idb_1$1.default.put(e,o,this.store)];case 3:return i.sent(),[2,o]}}))}))},e.prototype.keyExists=function(e){return __awaiter$2(this,void 0,void 0,(function(){return __generator$4(this,(function(t){switch(t.label){case 0:return[4,idb_1$1.default.getKey(e,this.store)];case 1:return[2,null!==t.sent()]}}))}))},e.prototype.deleteKey=function(e){return __awaiter$2(this,void 0,void 0,(function(){return __generator$4(this,(function(t){return[2,idb_1$1.default.rm(e,this.store)]}))}))},e.prototype.destroy=function(){return __awaiter$2(this,void 0,void 0,(function(){return __generator$4(this,(function(e){return[2,idb_1$1.default.dropStore(this.store)]}))}))},e.prototype.importSymmKey=function(e,t,r){return __awaiter$2(this,void 0,void 0,(function(){var n,o;return __generator$4(this,(function(i){switch(i.label){case 0:return n=config_1$1.default.merge(this.cfg,r),[4,aes_1.default.importKey(e,config_1$1.default.symmKeyOpts(n))];case 1:return o=i.sent(),[4,idb_1$1.default.put(t,o,this.store)];case 2:return i.sent(),[2]}}))}))},e.prototype.exportSymmKey=function(e,t){return __awaiter$2(this,void 0,void 0,(function(){var r;return __generator$4(this,(function(n){switch(n.label){case 0:return[4,this.getSymmKey(e,t)];case 1:return r=n.sent(),[2,aes_1.default.exportKey(r)]}}))}))},e.prototype.encryptWithSymmKey=function(e,t,r){return __awaiter$2(this,void 0,void 0,(function(){var n,o,i;return __generator$4(this,(function(a){switch(a.label){case 0:return n=config_1$1.default.merge(this.cfg,r),[4,this.getSymmKey(t,r)];case 1:return o=a.sent(),[4,aes_1.default.encryptBytes(utils_1$a.default.strToArrBuf(e,n.charSize),o,config_1$1.default.symmKeyOpts(n))];case 2:return i=a.sent(),[2,utils_1$a.default.arrBufToBase64(i)]}}))}))},e.prototype.decryptWithSymmKey=function(e,t,r){return __awaiter$2(this,void 0,void 0,(function(){var n,o,i;return __generator$4(this,(function(a){switch(a.label){case 0:return n=config_1$1.default.merge(this.cfg,r),[4,this.getSymmKey(t,r)];case 1:return o=a.sent(),[4,aes_1.default.decryptBytes(utils_1$a.default.base64ToArrBuf(e),o,config_1$1.default.symmKeyOpts(n))];case 2:return i=a.sent(),[2,utils_1$a.default.arrBufToStr(i,n.charSize)]}}))}))},e}();base$2.default=KeyStoreBase$1;var __extends$b=commonjsGlobal$1&&commonjsGlobal$1.__extends||(extendStatics2=function(e,t){return(extendStatics2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}extendStatics2(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),extendStatics2,__assign$1=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return(__assign$1=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__awaiter$1=commonjsGlobal$1&&commonjsGlobal$1.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},__generator$3=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(keystore$2,"__esModule",{value:!0});var idb_1=idb$1,keys_1=keys$5,operations_1=operations$4,config_1=config$2,utils_1$9=utils$6,base_1=base$2,types_1=types$2,RSAKeyStore$1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$b(t,e),t.init=function(e){return __awaiter$1(this,void 0,void 0,(function(){var r,n,o,i,a,s,u;return __generator$3(this,(function(c){switch(c.label){case 0:return r=config_1.default.normalize(__assign$1(__assign$1({},e||{}),{type:types_1.CryptoSystem.RSA})),n=r.rsaSize,o=r.hashAlg,i=r.storeName,a=r.readKeyName,s=r.writeKeyName,u=idb_1.default.createStore(i),[4,idb_1.default.createIfDoesNotExist(a,(function(){return keys_1.default.makeKeypair(n,o,types_1.KeyUse.Read)}),u)];case 1:return c.sent(),[4,idb_1.default.createIfDoesNotExist(s,(function(){return keys_1.default.makeKeypair(n,o,types_1.KeyUse.Write)}),u)];case 2:return c.sent(),[2,new t(r,u)]}}))}))},t.prototype.sign=function(e,t){return __awaiter$1(this,void 0,void 0,(function(){var r,n,o,i;return __generator$3(this,(function(a){switch(a.label){case 0:return r=config_1.default.merge(this.cfg,t),[4,this.writeKey()];case 1:return n=a.sent(),i=(o=utils_1$9.default).arrBufToBase64,[4,operations_1.default.sign(e,n.privateKey,r.charSize)];case 2:return[2,i.apply(o,[a.sent()])]}}))}))},t.prototype.verify=function(e,t,r,n){return __awaiter$1(this,void 0,void 0,(function(){var o;return __generator$3(this,(function(i){return o=config_1.default.merge(this.cfg,n),[2,operations_1.default.verify(e,t,r,o.charSize,o.hashAlg)]}))}))},t.prototype.encrypt=function(e,t,r){return __awaiter$1(this,void 0,void 0,(function(){var n,o,i;return __generator$3(this,(function(a){switch(a.label){case 0:return n=config_1.default.merge(this.cfg,r),i=(o=utils_1$9.default).arrBufToBase64,[4,operations_1.default.encrypt(e,t,n.charSize,n.hashAlg)];case 1:return[2,i.apply(o,[a.sent()])]}}))}))},t.prototype.decrypt=function(e,t,r){return __awaiter$1(this,void 0,void 0,(function(){var t,n,o,i;return __generator$3(this,(function(a){switch(a.label){case 0:return[4,this.readKey()];case 1:return t=a.sent(),n=config_1.default.merge(this.cfg,r),i=(o=utils_1$9.default).arrBufToStr,[4,operations_1.default.decrypt(e,t.privateKey)];case 2:return[2,i.apply(o,[a.sent(),n.charSize])]}}))}))},t.prototype.publicReadKey=function(){return __awaiter$1(this,void 0,void 0,(function(){var e;return __generator$3(this,(function(t){switch(t.label){case 0:return[4,this.readKey()];case 1:return e=t.sent(),[2,operations_1.default.getPublicKey(e)]}}))}))},t.prototype.publicWriteKey=function(){return __awaiter$1(this,void 0,void 0,(function(){var e;return __generator$3(this,(function(t){switch(t.label){case 0:return[4,this.writeKey()];case 1:return e=t.sent(),[2,operations_1.default.getPublicKey(e)]}}))}))},t}(base_1.default);keystore$2.RSAKeyStore=RSAKeyStore$1,keystore$2.default=RSAKeyStore$1,function(e){var t=commonjsGlobal$1&&commonjsGlobal$1.__assign||function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}Object.defineProperty(e,"__esModule",{value:!0});var n=keys$5,o=operations$4,i=keystore$2;r(keys$5),r(operations$4),r(keystore$2),e.default=t(t(t({},n.default),o.default),i.default)}(rsa$2);var rsaOperations=getDefaultExportFromCjs(rsa$2);const isBrowser="undefined"!=typeof self&&"object"==typeof self.location,assertBrowser=e=>{if(!isBrowser)throw new Error(`Must be in browser to use method. Provide a node-compatible implementation for ${e}`)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function __extends$a(e,t){function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __awaiter(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(t){i(t)}}function s(e){try{u(n.throw(e))}catch(t){i(t)}}function u(e){e.done?o(e.value):new r((function(t){t(e.value)})).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function __generator$2(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}!function(e){function t(){var t=this||self;t.globalThis=t,delete e.prototype._T_}"object"!=typeof globalThis&&(this?t():(e.defineProperty(e.prototype,"_T_",{configurable:!0,get:t}),_T_))}(Object);var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var localforage=createCommonjsModule((function(e,t){
/*!
      localForage -- Offline Storage, Improved
      Version 1.7.3
      https://localforage.github.io/localForage
      (c) 2013-2017 Mozilla, Apache License 2.0
  */
e.exports=function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof commonjsRequire&&commonjsRequire;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,(function(e){var r=t[a][1][e];return o(r||e)}),l,l.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof commonjsRequire&&commonjsRequire,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){(function(e){var r,n,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)r="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var u=new e.MessageChannel;u.port1.onmessage=l,r=function(){u.port2.postMessage(0)}}var c=[];function l(){var e,t;n=!0;for(var r=c.length;r;){for(t=c,c=[],e=-1;++e<r;)t[e]();r=c.length}n=!1}function f(e){1!==c.push(e)||n||r()}t.exports=f}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){var n=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,e!==o&&d(this,e)}function l(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(e,t,r){n((function(){var n;try{n=t(r)}catch(o){return i.reject(e,o)}n===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,n)}))}function h(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function d(e,t){var r=!1;function n(t){r||(r=!0,i.reject(e,t))}function o(t){r||(r=!0,i.resolve(e,t))}function a(){t(o,n)}var s=p(a);"error"===s.status&&n(s.value)}function p(e,t){var r={};try{r.value=e(t),r.status="success"}catch(n){r.status="error",r.value=n}return r}function y(e){return e instanceof this?e:i.resolve(new this(o),e)}function m(e){var t=new this(o);return i.reject(t,e)}function _(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,u=-1,c=new this(o);++u<r;)l(e[u],u);return c;function l(e,o){function u(e){a[o]=e,++s!==r||n||(n=!0,i.resolve(c,a))}t.resolve(e).then(u,(function(e){n||(n=!0,i.reject(c,e))}))}}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,n=!1;if(!r)return this.resolve([]);for(var a=-1,s=new this(o);++a<r;)u(e[a]);return s;function u(e){t.resolve(e).then((function(e){n||(n=!0,i.resolve(s,e))}),(function(e){n||(n=!0,i.reject(s,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var r=new this.constructor(o);return this.state!==u?f(r,this.state===s?e:t,this.outcome):this.queue.push(new l(r,e,t)),r},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){f(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){f(this.promise,this.onRejected,e)},i.resolve=function(e,t){var r=p(h,t);if("error"===r.status)return i.reject(e,r.value);var n=r.value;if(n)d(e,n);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},c.resolve=y,c.reject=m,c.all=_,c.race=g},{1:1}],3:[function(e,t,r){(function(t){"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,r){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=i();function s(){try{if(!a)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(r){return!1}}function u(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<e.length;n+=1)r.append(e[n]);return r.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var c=Promise;function l(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function f(e,t,r){"function"==typeof t&&e.then(t),"function"==typeof r&&e.catch(r)}function h(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function d(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",y=void 0,m={},_=Object.prototype.toString,g="readonly",b="readwrite";function v(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r),o=0;o<t;o++)n[o]=e.charCodeAt(o);return r}function w(e){return new c((function(t){var r=e.transaction(p,b),n=u([""]);r.objectStore(p).put(n,"key"),r.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},r.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);t(r||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function $(e){return"boolean"==typeof y?c.resolve(y):w(e).then((function(e){return y=e}))}function k(e){var t=m[e.name],r={};r.promise=new c((function(e,t){r.resolve=e,r.reject=t})),t.deferredOperations.push(r),t.dbReady?t.dbReady=t.dbReady.then((function(){return r.promise})):t.dbReady=r.promise}function A(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function E(e,t){var r=m[e.name].deferredOperations.pop();if(r)return r.reject(t),r.promise}function S(e,t){return new c((function(r,n){if(m[e.name]=m[e.name]||L(),e.db){if(!t)return r(e.db);k(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var r=i.result;try{r.createObjectStore(e.storeName),t.oldVersion<=1&&r.createObjectStore(p)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),n(i.error)},i.onsuccess=function(){r(i.result),A(e)}}))}function T(e){return S(e,!1)}function B(e){return S(e,!0)}function x(e,t){if(!e.db)return!0;var r=!e.db.objectStoreNames.contains(e.storeName),n=e.version<e.db.version,o=e.version>e.db.version;if(n&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||r){if(r){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function I(e){return new c((function(t,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");t({__local_forage_encoded_blob:!0,data:n,type:e.type})},n.readAsBinaryString(e)}))}function C(e){return u([v(atob(e.data))],{type:e.type})}function D(e){return e&&e.__local_forage_encoded_blob}function R(e){var t=this,r=t._initReady().then((function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return f(r,e,e),r}function N(e){k(e);for(var t=m[e.name],r=t.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,T(e).then((function(t){return e.db=t,x(e)?B(e):t})).then((function(n){e.db=t.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n})).catch((function(t){throw E(e,t),t}))}function j(e,t,r,n){void 0===n&&(n=1);try{var o=e.db.transaction(e.storeName,t);r(null,o)}catch(i){if(n>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),B(e)})).then((function(){return N(e).then((function(){j(e,t,r,n-1)}))})).catch(r);r(i)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function P(e){var t=this,r={db:null};if(e)for(var n in e)r[n]=e[n];var o=m[r.name];o||(o=L(),m[r.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=R);var i=[];function a(){return c.resolve()}for(var s=0;s<o.forages.length;s++){var u=o.forages[s];u!==t&&i.push(u._initReady().catch(a))}var l=o.forages.slice(0);return c.all(i).then((function(){return r.db=o.db,T(r)})).then((function(e){return r.db=e,x(r,t._defaultConfig.version)?B(r):e})).then((function(e){r.db=o.db=e,t._dbInfo=r;for(var n=0;n<l.length;n++){var i=l[n];i!==t&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))}function O(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),D(e)&&(e=C(e)),t(e)},a.onerror=function(){n(a.error)}}catch(s){n(s)}}))})).catch(n)}));return l(n,t),n}function U(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;D(n)&&(n=C(n));var o=e(n,r.key,s++);void 0!==o?t(o):r.continue()}else t()},a.onerror=function(){n(a.error)}}catch(u){n(u)}}))})).catch(n)}));return l(n,t),n}function M(e,t,r){var n=this;e=h(e);var o=new c((function(r,o){var i;n.ready().then((function(){return i=n._dbInfo,"[object Blob]"===_.call(t)?$(i.db).then((function(e){return e?t:I(t)})):t})).then((function(t){j(n._dbInfo,b,(function(i,a){if(i)return o(i);try{var s=a.objectStore(n._dbInfo.storeName);null===t&&(t=void 0);var u=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),r(t)},a.onabort=a.onerror=function(){var e=u.error?u.error:u.transaction.error;o(e)}}catch(c){o(c)}}))})).catch(o)}));return l(o,r),o}function F(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){j(r._dbInfo,b,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){n(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;n(e)}}catch(s){n(s)}}))})).catch(n)}));return l(n,t),n}function z(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,b,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;r(e)}}catch(a){r(a)}}))})).catch(r)}));return l(r,e),r}function K(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,g,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){r(i.error)}}catch(a){r(a)}}))})).catch(r)}));return l(r,e),r}function G(e,t){var r=this,n=new c((function(t,n){e<0?t(null):r.ready().then((function(){j(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName),s=!1,u=a.openCursor();u.onsuccess=function(){var r=u.result;r?0===e||s?t(r.key):(s=!0,r.advance(e)):t(null)},u.onerror=function(){n(u.error)}}catch(c){n(c)}}))})).catch(n)}));return l(n,t),n}function H(e){var t=this,r=new c((function(e,r){t.ready().then((function(){j(t._dbInfo,g,(function(n,o){if(n)return r(n);try{var i=o.objectStore(t._dbInfo.storeName).openCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){r(i.error)}}catch(s){r(s)}}))})).catch(r)}));return l(r,e),r}function W(e,t){t=d.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;if(e.name){var i=e.name===r.name&&o._dbInfo.db?c.resolve(o._dbInfo.db):T(e).then((function(t){var r=m[e.name],n=r.forages;r.db=t;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=t;return t}));n=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var r=t.version+1;k(e);var n=m[e.name],o=n.forages;t.close();for(var i=0;i<o.length;i++){var s=o[i];s._dbInfo.db=null,s._dbInfo.version=r}return new c((function(t,n){var o=a.open(e.name,r);o.onerror=function(e){o.result.close(),n(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<o.length;t++){var r=o[t];r._dbInfo.db=e,A(r._dbInfo)}})).catch((function(t){throw(E(e,t)||c.resolve()).catch((function(){})),t}))}})):i.then((function(t){k(e);var r=m[e.name],n=r.forages;t.close();for(var o=0;o<n.length;o++)n[o]._dbInfo.db=null;return new c((function(t,r){var n=a.deleteDatabase(e.name);n.onerror=n.onblocked=function(e){var t=n.result;t&&t.close(),r(e)},n.onsuccess=function(){var e=n.result;e&&e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<n.length;t++)A(n[t]._dbInfo)})).catch((function(t){throw(E(e,t)||c.resolve()).catch((function(){})),t}))}))}else n=c.reject("Invalid arguments");return l(n,t),n}var q={_driver:"asyncStorage",_initStorage:P,_support:s(),iterate:U,getItem:O,setItem:M,removeItem:F,clear:z,length:K,key:G,keys:H,dropInstance:W};function V(){return"function"==typeof openDatabase}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,Z="__lfsc__:",Q=Z.length,ee="arbf",te="blob",re="si08",ne="ui08",oe="uic8",ie="si16",ae="si32",se="ur16",ue="ui32",ce="fl32",le="fl64",fe=Q+ee.length,he=Object.prototype.toString;function de(e){var t,r,n,o,i,a=.75*e.length,s=e.length,u=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var c=new ArrayBuffer(a),l=new Uint8Array(c);for(t=0;t<s;t+=4)r=Y.indexOf(e[t]),n=Y.indexOf(e[t+1]),o=Y.indexOf(e[t+2]),i=Y.indexOf(e[t+3]),l[u++]=r<<2|n>>4,l[u++]=(15&n)<<4|o>>2,l[u++]=(3&o)<<6|63&i;return c}function pe(e){var t,r=new Uint8Array(e),n="";for(t=0;t<r.length;t+=3)n+=Y[r[t]>>2],n+=Y[(3&r[t])<<4|r[t+1]>>4],n+=Y[(15&r[t+1])<<2|r[t+2]>>6],n+=Y[63&r[t+2]];return r.length%3==2?n=n.substring(0,n.length-1)+"=":r.length%3==1&&(n=n.substring(0,n.length-2)+"=="),n}function ye(e,t){var r="";if(e&&(r=he.call(e)),e&&("[object ArrayBuffer]"===r||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var n,o=Z;e instanceof ArrayBuffer?(n=e,o+=ee):(n=e.buffer,"[object Int8Array]"===r?o+=re:"[object Uint8Array]"===r?o+=ne:"[object Uint8ClampedArray]"===r?o+=oe:"[object Int16Array]"===r?o+=ie:"[object Uint16Array]"===r?o+=se:"[object Int32Array]"===r?o+=ae:"[object Uint32Array]"===r?o+=ue:"[object Float32Array]"===r?o+=ce:"[object Float64Array]"===r?o+=le:t(new Error("Failed to get type for BinaryArray"))),t(o+pe(n))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r=X+e.type+"~"+pe(this.result);t(Z+te+r)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(a){console.error("Couldn't convert value into a JSON string: ",e),t(null,a)}}function me(e){if(e.substring(0,Q)!==Z)return JSON.parse(e);var t,r=e.substring(fe),n=e.substring(Q,fe);if(n===te&&J.test(r)){var o=r.match(J);t=o[1],r=r.substring(o[0].length)}var i=de(r);switch(n){case ee:return i;case te:return u([i],{type:t});case re:return new Int8Array(i);case ne:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case se:return new Uint16Array(i);case ae:return new Int32Array(i);case ue:return new Uint32Array(i);case ce:return new Float32Array(i);case le:return new Float64Array(i);default:throw new Error("Unkown type: "+n)}}var _e={serialize:ye,deserialize:me,stringToBuffer:de,bufferToString:pe};function ge(e,t,r,n){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function be(e){var t=this,r={db:null};if(e)for(var n in e)r[n]="string"!=typeof e[n]?e[n].toString():e[n];var o=new c((function(e,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(o){return n(o)}r.db.transaction((function(o){ge(o,r,(function(){t._dbInfo=r,e()}),(function(e,t){n(t)}))}),n)}));return r.serializer=_e,o}function ve(e,t,r,n,o,i){e.executeSql(r,n,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):ge(e,t,(function(){e.executeSql(r,n,o,i)}),i)}),i):i(e,a)}),i)}function we(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){ve(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,t),n}function $e(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){ve(r,o,"SELECT * FROM "+o.storeName,[],(function(r,n){for(var i=n.rows,a=i.length,s=0;s<a;s++){var u=i.item(s),c=u.value;if(c&&(c=o.serializer.deserialize(c)),void 0!==(c=e(c,u.key,s+1)))return void t(c)}t()}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,t),n}function ke(e,t,r,n){var o=this;e=h(e);var i=new c((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,u=o._dbInfo;u.serializer.serialize(t,(function(t,c){c?a(c):u.db.transaction((function(r){ve(r,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(n>0)return void i(ke.apply(o,[e,s,r,n-1]));a(t)}}))}))})).catch(a)}));return l(i,r),i}function Ae(e,t,r){return ke.apply(this,[e,t,r,1])}function Ee(e,t){var r=this;e=h(e);var n=new c((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){ve(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,t),n}function Se(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ve(t,n,"DELETE FROM "+n.storeName,[],(function(){e()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,e),r}function Te(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ve(t,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(t,r){var n=r.rows.item(0).c;e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,e),r}function Be(e,t){var r=this,n=new c((function(t,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){ve(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,r){var n=r.rows.length?r.rows.item(0).key:null;t(n)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,t),n}function xe(e){var t=this,r=new c((function(e,r){t.ready().then((function(){var n=t._dbInfo;n.db.transaction((function(t){ve(t,n,"SELECT key FROM "+n.storeName,[],(function(t,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);e(n)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,e),r}function Ie(e){return new c((function(t,r){e.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){r(t)}))}),(function(e){r(e)}))}))}function Ce(e,t){t=d.apply(this,arguments);var r=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||r.name,e.storeName=e.storeName||r.storeName);var n,o=this;return l(n=e.name?new c((function(t){var n;n=e.name===r.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:n,storeNames:[e.storeName]}):t(Ie(n))})).then((function(e){return new c((function(t,r){e.db.transaction((function(n){function o(e){return new c((function(t,r){n.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){r(t)}))}))}for(var i=[],a=0,s=e.storeNames.length;a<s;a++)i.push(o(e.storeNames[a]));c.all(i).then((function(){t()})).catch((function(e){r(e)}))}),(function(e){r(e)}))}))})):c.reject("Invalid arguments"),t),n}var De={_driver:"webSQLStorage",_initStorage:be,_support:V(),iterate:$e,getItem:we,setItem:Ae,removeItem:Ee,clear:Se,length:Te,key:Be,keys:xe,dropInstance:Ce};function Re(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Ne(e,t){var r=e.name+"/";return e.storeName!==t.storeName&&(r+=e.storeName+"/"),r}function je(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function Le(){return!je()||localStorage.length>0}function Pe(e){var t=this,r={};if(e)for(var n in e)r[n]=e[n];return r.keyPrefix=Ne(e,t._defaultConfig),Le()?(t._dbInfo=r,r.serializer=_e,c.resolve()):c.reject()}function Oe(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(e)&&localStorage.removeItem(n)}}));return l(r,e),r}function Ue(e,t){var r=this;e=h(e);var n=r.ready().then((function(){var t=r._dbInfo,n=localStorage.getItem(t.keyPrefix+e);return n&&(n=t.serializer.deserialize(n)),n}));return l(n,t),n}function Me(e,t){var r=this,n=r.ready().then((function(){for(var t=r._dbInfo,n=t.keyPrefix,o=n.length,i=localStorage.length,a=1,s=0;s<i;s++){var u=localStorage.key(s);if(0===u.indexOf(n)){var c=localStorage.getItem(u);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,u.substring(o),a++)))return c}}}));return l(n,t),n}function Fe(e,t){var r=this,n=r.ready().then((function(){var t,n=r._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&(t=t.substring(n.keyPrefix.length)),t}));return l(n,t),n}function ze(e){var t=this,r=t.ready().then((function(){for(var e=t._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&n.push(i.substring(e.keyPrefix.length))}return n}));return l(r,e),r}function Ke(e){var t=this.keys().then((function(e){return e.length}));return l(t,e),t}function Ge(e,t){var r=this;e=h(e);var n=r.ready().then((function(){var t=r._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return l(n,t),n}function He(e,t,r){var n=this;e=h(e);var o=n.ready().then((function(){void 0===t&&(t=null);var r=t;return new c((function(o,i){var a=n._dbInfo;a.serializer.serialize(t,(function(t,n){if(n)i(n);else try{localStorage.setItem(a.keyPrefix+e,t),o(r)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||i(s),i(s)}}))}))}));return l(o,r),o}function We(e,t){if(t=d.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var r=this.config();e.name=e.name||r.name,e.storeName=e.storeName||r.storeName}var n,o=this;return l(n=e.name?new c((function(t){e.storeName?t(Ne(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var r=localStorage.key(t);0===r.indexOf(e)&&localStorage.removeItem(r)}})):c.reject("Invalid arguments"),t),n}var qe={_driver:"localStorageWrapper",_initStorage:Pe,_support:Re(),iterate:Me,getItem:Ue,setItem:He,removeItem:Ge,clear:Oe,length:Ke,key:Fe,keys:ze,dropInstance:We},Ve=function(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)},Ye=function(e,t){for(var r=e.length,n=0;n<r;){if(Ve(e[n],t))return!0;n++}return!1},Xe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Je={},Ze={},Qe={INDEXEDDB:q,WEBSQL:De,LOCALSTORAGE:qe},et=[Qe.INDEXEDDB._driver,Qe.WEBSQL._driver,Qe.LOCALSTORAGE._driver],tt=["dropInstance"],rt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),nt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var r=arguments;return e.ready().then((function(){return e[t].apply(e,r)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var r in t)t.hasOwnProperty(r)&&(Xe(t[r])?arguments[0][r]=t[r].slice():arguments[0][r]=t[r])}return arguments[0]}var at=new(function(){function e(t){for(var r in o(this,e),Qe)if(Qe.hasOwnProperty(r)){var n=Qe[r],i=n._driver;this[r]=i,Je[i]||this.defineDriver(n)}this._defaultConfig=it({},nt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":n(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,r){var n=new c((function(t,r){try{var n=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void r(o);for(var i=rt.concat("_initStorage"),a=0,s=i.length;a<s;a++){var u=i[a];if((!Ye(tt,u)||e[u])&&"function"!=typeof e[u])return void r(o)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),r=c.reject(t);return l(r,arguments[arguments.length-1]),r}},r=0,n=tt.length;r<n;r++){var o=tt[r];e[o]||(e[o]=t(o))}}();var f=function(r){Je[n]&&console.info("Redefining LocalForage driver: "+n),Je[n]=e,Ze[n]=r,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(f,r):f(!!e._support):f(!0)}catch(h){r(h)}}));return f(n,t,r),n},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,r){var n=Je[e]?c.resolve(Je[e]):c.reject(new Error("Driver not found."));return f(n,t,r),n},e.prototype.getSerializer=function(e){var t=c.resolve(_e);return f(t,e),t},e.prototype.ready=function(e){var t=this,r=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return f(r,e,e),r},e.prototype.setDriver=function(e,t,r){var n=this;Xe(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){n._config.driver=n.driver()}function a(e){return n._extend(e),i(),n._ready=n._initStorage(n._config),n._ready}function s(e){return function(){var t=0;function r(){for(;t<e.length;){var o=e[t];return t++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(a).catch(r)}i();var s=new Error("No available storage method found.");return n._driverSet=c.reject(s),n._driverSet}return r()}}var u=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=u.then((function(){var e=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(e).then((function(e){n._driver=e._driver,i(),n._wrapLibraryMethodsWithReady(),n._initDriver=s(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return n._driverSet=c.reject(e),n._driverSet})),f(this._driverSet,t,r),this._driverSet},e.prototype.supports=function(e){return!!Ze[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e[r];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=rt.length;e<t;e++)ot(this,rt[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=at},{3:3}]},{},[4])(4)})),CryptoSystem,EccCurve,RsaSize,SymmAlg,SymmKeyLength,HashAlg,CharSize,KeyUse;!function(e){e.ECC="ecc",e.RSA="rsa"}(CryptoSystem||(CryptoSystem={})),function(e){e.P_256="P-256",e.P_384="P-384",e.P_521="P-521"}(EccCurve||(EccCurve={})),function(e){e[e.B1024=1024]="B1024",e[e.B2048=2048]="B2048",e[e.B4096=4096]="B4096"}(RsaSize||(RsaSize={})),function(e){e.AES_CTR="AES-CTR",e.AES_CBC="AES-CBC"}(SymmAlg||(SymmAlg={})),function(e){e[e.B128=128]="B128",e[e.B192=192]="B192",e[e.B256=256]="B256"}(SymmKeyLength||(SymmKeyLength={})),function(e){e.SHA_1="SHA-1",e.SHA_256="SHA-256",e.SHA_384="SHA-384",e.SHA_512="SHA-512"}(HashAlg||(HashAlg={})),function(e){e[e.B8=8]="B8",e[e.B16=16]="B16"}(CharSize||(CharSize={})),function(e){e.Read="read",e.Write="write"}(KeyUse||(KeyUse={}));var types$1=Object.freeze({__proto__:null,get CryptoSystem(){return CryptoSystem},get EccCurve(){return EccCurve},get RsaSize(){return RsaSize},get SymmAlg(){return SymmAlg},get SymmKeyLength(){return SymmKeyLength},get HashAlg(){return HashAlg},get CharSize(){return CharSize},get KeyUse(){return KeyUse}}),KeyDoesNotExist=new Error("Key does not exist. Make sure you properly instantiated the keystore."),NotKeyPair=new Error("Retrieved a symmetric key when an asymmetric keypair was expected. Please use a different key name."),NotKey=new Error("Retrieved an asymmetric keypair when an symmetric key was expected. Please use a different key name."),ECCNotEnabled=new Error("ECC is not enabled for this browser. Please use RSA instead."),UnsupportedCrypto=new Error("Cryptosystem not supported. Please use ECC or RSA"),InvalidKeyUse=new Error("Invalid key use. Please use 'read' or 'write");function checkIsKeyPair(e){if(!e||null===e)throw KeyDoesNotExist;if(void 0===e.privateKey)throw NotKeyPair;return e}function checkIsKey(e){if(!e||null===e)throw KeyDoesNotExist;if(void 0!==e.privateKey||void 0===e.algorithm)throw NotKey;return e}function checkValidCryptoSystem(e){checkValid(e,[CryptoSystem.ECC,CryptoSystem.RSA],UnsupportedCrypto)}function checkValidKeyUse(e){checkValid(e,[KeyUse.Read,KeyUse.Write],InvalidKeyUse)}function checkValid(e,t,r){if(!t.some((function(t){return t===e})))throw r}function createStore(e){return localforage.createInstance({name:e})}function createIfDoesNotExist(e,t,r){return void 0===r&&(r=localforage),__awaiter(this,void 0,void 0,(function(){var n;return __generator$2(this,(function(o){switch(o.label){case 0:return[4,exists(e,r)];case 1:return o.sent()?[2]:[4,t()];case 2:return n=o.sent(),[4,put(e,n,r)];case 3:return o.sent(),[2]}}))}))}function put(e,t,r){return void 0===r&&(r=localforage),__awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(n){return[2,r.setItem(e,t)]}))}))}function getKeypair(e,t){return void 0===t&&(t=localforage),__awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(r){return[2,get$4(e,checkIsKeyPair,t)]}))}))}function getKey(e,t){return void 0===t&&(t=localforage),__awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(r){return[2,get$4(e,checkIsKey,t)]}))}))}function get$4(e,t,r){return void 0===r&&(r=localforage),__awaiter(this,void 0,void 0,(function(){var n;return __generator$2(this,(function(o){switch(o.label){case 0:return[4,r.getItem(e)];case 1:return[2,null===(n=o.sent())?null:t(n)]}}))}))}function exists(e,t){return void 0===t&&(t=localforage),__awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(r){switch(r.label){case 0:return[4,t.getItem(e)];case 1:return[2,null!==r.sent()]}}))}))}function rm(e,t){return void 0===t&&(t=localforage),__awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(r){return[2,t.removeItem(e)]}))}))}function dropStore(e){return __awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(t){return[2,e.dropInstance()]}))}))}function clear$3(e){return __awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(t){return e?[2,dropStore(e)]:[2,localforage.clear()]}))}))}var IDB={createStore:createStore,createIfDoesNotExist:createIfDoesNotExist,put:put,getKeypair:getKeypair,getKey:getKey,exists:exists,rm:rm,dropStore:dropStore,clear:clear$3},idb=Object.freeze({__proto__:null,createStore:createStore,createIfDoesNotExist:createIfDoesNotExist,put:put,getKeypair:getKeypair,getKey:getKey,get:get$4,exists:exists,rm:rm,dropStore:dropStore,clear:clear$3,default:IDB}),global$1="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},lookup$2=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,inited=!1;function init$2(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,r=e.length;t<r;++t)lookup$2[t]=e[t],revLookup[e.charCodeAt(t)]=t;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(e){var t,r,n,o,i,a;inited||init$2();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i="="===e[s-2]?2:"="===e[s-1]?1:0,a=new Arr(3*s/4-i),n=i>0?s-4:s;var u=0;for(t=0,r=0;t<n;t+=4,r+=3)o=revLookup[e.charCodeAt(t)]<<18|revLookup[e.charCodeAt(t+1)]<<12|revLookup[e.charCodeAt(t+2)]<<6|revLookup[e.charCodeAt(t+3)],a[u++]=o>>16&255,a[u++]=o>>8&255,a[u++]=255&o;return 2===i?(o=revLookup[e.charCodeAt(t)]<<2|revLookup[e.charCodeAt(t+1)]>>4,a[u++]=255&o):1===i&&(o=revLookup[e.charCodeAt(t)]<<10|revLookup[e.charCodeAt(t+1)]<<4|revLookup[e.charCodeAt(t+2)]>>2,a[u++]=o>>8&255,a[u++]=255&o),a}function tripletToBase64(e){return lookup$2[e>>18&63]+lookup$2[e>>12&63]+lookup$2[e>>6&63]+lookup$2[63&e]}function encodeChunk(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(tripletToBase64(n));return o.join("")}function fromByteArray(e){var t;inited||init$2();for(var r=e.length,n=r%3,o="",i=[],a=16383,s=0,u=r-n;s<u;s+=a)i.push(encodeChunk(e,s,s+a>u?u:s+a));return 1===n?(t=e[r-1],o+=lookup$2[t>>2],o+=lookup$2[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=lookup$2[t>>10],o+=lookup$2[t>>4&63],o+=lookup$2[t<<2&63],o+="="),i.push(o),i.join("")}function read$2(e,t,r,n,o){var i,a,s=8*o-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?o-1:0,h=r?-1:1,d=e[t+f];for(f+=h,i=d&(1<<-l)-1,d>>=-l,l+=s;l>0;i=256*i+e[t+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),i-=c}return(d?-1:1)*a*Math.pow(2,i-n)}function write$1(e,t,r,n,o,i){var a,s,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,o),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[r+d]=255&s,d+=p,s/=256,o-=8);for(a=a<<o|s,c+=o;c>0;e[r+d]=255&a,d+=p,a/=256,c-=8);e[r+d-p]|=128*y}var toString$8={}.toString,isArray=Array.isArray||function(e){return"[object Array]"==toString$8.call(e)},INSPECT_MAX_BYTES=50;function kMaxLength(){return Buffer$1.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer$1.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer$1.prototype:(null===e&&(e=new Buffer$1(t)),e.length=t),e}function Buffer$1(e,t,r){if(!(Buffer$1.TYPED_ARRAY_SUPPORT||this instanceof Buffer$1))return new Buffer$1(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,r)}function from(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,r,n):"string"==typeof t?fromString$7(e,t,r):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc$1(e,t,r,n){return assertSize(t),t<=0?createBuffer(e,t):void 0!==r?"string"==typeof n?createBuffer(e,t).fill(r,n):createBuffer(e,t).fill(r):createBuffer(e,t)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer$1.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function fromString$7(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer$1.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength(t,r),o=(e=createBuffer(e,n)).write(t,r);return o!==n&&(e=e.slice(0,o)),e}function fromArrayLike(e,t){var r=t.length<0?0:0|checked(t.length);e=createBuffer(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function fromArrayBuffer(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),Buffer$1.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer$1.prototype:e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var r=0|checked(t.length);return 0===(e=createBuffer(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&isArray(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function internalIsBuffer(e){return!(null==e||!e._isBuffer)}function byteLength(e,t){if(internalIsBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes$1(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(e).length;default:if(n)return utf8ToBytes$1(e).length;t=(""+t).toLowerCase(),n=!0}}function slowToString(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,r);case"utf8":case"utf-8":return utf8Slice$1(this,t,r);case"ascii":return asciiSlice(this,t,r);case"latin1":case"binary":return latin1Slice(this,t,r);case"base64":return base64Slice(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function bidirectionalIndexOf(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=Buffer$1.from(t,n)),internalIsBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,r,n,o);if("number"==typeof t)return t&=255,Buffer$1.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):arrayIndexOf(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,r,n,o){var i,a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=r;i<s;i++)if(c(e,i)===c(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(r+u>s&&(r=s-u),i=r;i>=0;i--){for(var f=!0,h=0;h<u;h++)if(c(e,i+h)!==c(t,h)){f=!1;break}if(f)return i}return-1}function hexWrite(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function utf8Write(e,t,r,n){return blitBuffer(utf8ToBytes$1(t,e.length-r),e,r,n)}function asciiWrite(e,t,r,n){return blitBuffer(asciiToBytes(t),e,r,n)}function latin1Write(e,t,r,n){return asciiWrite(e,t,r,n)}function base64Write(e,t,r,n){return blitBuffer(base64ToBytes(t),e,r,n)}function ucs2Write(e,t,r,n){return blitBuffer(utf16leToBytes(t,e.length-r),e,r,n)}function base64Slice(e,t,r){return 0===t&&r===e.length?fromByteArray(e):fromByteArray(e.slice(t,r))}function utf8Slice$1(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,a,s,u,c=e[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&(u=(31&c)<<6|63&i)>127&&(l=u);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(u=(15&c)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}return decodeCodePointsArray$1(n)}Buffer$1.TYPED_ARRAY_SUPPORT=void 0===global$1.TYPED_ARRAY_SUPPORT||global$1.TYPED_ARRAY_SUPPORT,Buffer$1.poolSize=8192,Buffer$1._augment=function(e){return e.__proto__=Buffer$1.prototype,e},Buffer$1.from=function(e,t,r){return from(null,e,t,r)},Buffer$1.TYPED_ARRAY_SUPPORT&&(Buffer$1.prototype.__proto__=Uint8Array.prototype,Buffer$1.__proto__=Uint8Array),Buffer$1.alloc=function(e,t,r){return alloc$1(null,e,t,r)},Buffer$1.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer$1.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer$1.isBuffer=isBuffer$2,Buffer$1.compare=function(e,t){if(!internalIsBuffer(e)||!internalIsBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},Buffer$1.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer$1.concat=function(e,t){if(!isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer$1.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=Buffer$1.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var i=e[r];if(!internalIsBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},Buffer$1.byteLength=byteLength,Buffer$1.prototype._isBuffer=!0,Buffer$1.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer$1.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer$1.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer$1.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice$1(this,0,e):slowToString.apply(this,arguments)},Buffer$1.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer$1.compare(this,e)},Buffer$1.prototype.inspect=function(){var e="",t=INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},Buffer$1.prototype.compare=function(e,t,r,n,o){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),s=Math.min(i,a),u=this.slice(n,o),c=e.slice(t,r),l=0;l<s;++l)if(u[l]!==c[l]){i=u[l],a=c[l];break}return i<a?-1:a<i?1:0},Buffer$1.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer$1.prototype.indexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!0)},Buffer$1.prototype.lastIndexOf=function(e,t,r){return bidirectionalIndexOf(this,e,t,r,!1)},Buffer$1.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return hexWrite(this,e,t,r);case"utf8":case"utf-8":return utf8Write(this,e,t,r);case"ascii":return asciiWrite(this,e,t,r);case"latin1":case"binary":return latin1Write(this,e,t,r);case"base64":return base64Write(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Buffer$1.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH$1=4096;function decodeCodePointsArray$1(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH$1)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=MAX_ARGUMENTS_LENGTH$1));return r}function asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function latin1Slice(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function hexSlice(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=toHex$2(e[i]);return o}function utf16leSlice(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function checkOffset(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,r,n,o,i){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function objectWriteUInt32(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function checkIEEE754(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(e,t,r,n,o){return o||checkIEEE754(e,t,r,4),write$1(e,t,r,n,23,4),r+4}function writeDouble(e,t,r,n,o){return o||checkIEEE754(e,t,r,8),write$1(e,t,r,n,52,8),r+8}Buffer$1.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),Buffer$1.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=Buffer$1.prototype;else{var o=t-e;r=new Buffer$1(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+e]}return r},Buffer$1.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},Buffer$1.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},Buffer$1.prototype.readUInt8=function(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer$1.prototype.readUInt16LE=function(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer$1.prototype.readUInt16BE=function(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer$1.prototype.readUInt32LE=function(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer$1.prototype.readUInt32BE=function(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer$1.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*t)),n},Buffer$1.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||checkOffset(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},Buffer$1.prototype.readInt8=function(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer$1.prototype.readInt16LE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer$1.prototype.readInt16BE=function(e,t){t||checkOffset(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer$1.prototype.readInt32LE=function(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer$1.prototype.readInt32BE=function(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer$1.prototype.readFloatLE=function(e,t){return t||checkOffset(e,4,this.length),read$2(this,e,!0,23,4)},Buffer$1.prototype.readFloatBE=function(e,t){return t||checkOffset(e,4,this.length),read$2(this,e,!1,23,4)},Buffer$1.prototype.readDoubleLE=function(e,t){return t||checkOffset(e,8,this.length),read$2(this,e,!0,52,8)},Buffer$1.prototype.readDoubleBE=function(e,t){return t||checkOffset(e,8,this.length),read$2(this,e,!1,52,8)},Buffer$1.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},Buffer$1.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||checkInt(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},Buffer$1.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,255,0),Buffer$1.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer$1.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer$1.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer$1.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer$1.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer$1.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);checkInt(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},Buffer$1.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);checkInt(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},Buffer$1.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,1,127,-128),Buffer$1.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer$1.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer$1.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer$1.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer$1.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer$1.prototype.writeFloatLE=function(e,t,r){return writeFloat(this,e,t,!0,r)},Buffer$1.prototype.writeFloatBE=function(e,t,r){return writeFloat(this,e,t,!1,r)},Buffer$1.prototype.writeDoubleLE=function(e,t,r){return writeDouble(this,e,t,!0,r)},Buffer$1.prototype.writeDoubleBE=function(e,t,r){return writeDouble(this,e,t,!1,r)},Buffer$1.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,i=n-r;if(this===e&&r<t&&t<n)for(o=i-1;o>=0;--o)e[o+t]=this[o+r];else if(i<1e3||!Buffer$1.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},Buffer$1.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer$1.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var a=internalIsBuffer(e)?e:utf8ToBytes$1(new Buffer$1(e,n).toString()),s=a.length;for(i=0;i<r-t;++i)this[i+t]=a[i%s]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=stringtrim(e).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex$2(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes$1(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function isnan(e){return e!=e}function isBuffer$2(e){return null!=e&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isFastBuffer(e.slice(0,0))}function arrBufToStr(e,t){var r=8===t?new Uint8Array(e):new Uint16Array(e);return Array.from(r).map((function(e){return String.fromCharCode(e)})).join("")}function arrBufToBase64(e){var t=arrBufToStr(e,8);return Buffer$1.from(t,"binary").toString("base64")}function strToArrBuf(e,t){for(var r=8===t?new Uint8Array(e.length):new Uint16Array(e.length),n=0,o=e.length;n<o;n++)r[n]=e.charCodeAt(n);return r.buffer}function base64ToArrBuf(e){return strToArrBuf(Buffer$1.from(e,"base64").toString("binary"),8)}function publicExponent(){return new Uint8Array([1,0,1])}function randomBuf(e){var t=new Uint8Array(e);return globalThis.crypto.getRandomValues(t),t.buffer}function joinBufs(e,t){var r=new Uint8Array(e),n=new Uint8Array(t),o=new Uint8Array(r.length+n.length);return o.set(r),o.set(n,r.length),o.buffer}var normalizeUtf8ToBuf=function(e){return normalizeToBuf(e,(function(e){return strToArrBuf(e,CharSize.B8)}))},normalizeUtf16ToBuf=function(e){return normalizeToBuf(e,(function(e){return strToArrBuf(e,CharSize.B16)}))},normalizeBase64ToBuf=function(e){return normalizeToBuf(e,base64ToArrBuf)},normalizeUnicodeToBuf=function(e,t){switch(t){case 8:return normalizeUtf8ToBuf(e);default:return normalizeUtf16ToBuf(e)}},normalizeToBuf=function(e,t){if("string"==typeof e)return t(e);if("object"==typeof e&&void 0!==e.byteLength)return new Uint8Array(e).buffer;throw new Error("Improper value. Must be a string, ArrayBuffer, Uint8Array")};function structuralClone(e){return __awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(t){return[2,new Promise((function(t){var r=new MessageChannel,n=r.port1;r.port2.onmessage=function(e){return t(e.data)},n.postMessage(e)}))]}))}))}var utils$4={arrBufToStr:arrBufToStr,arrBufToBase64:arrBufToBase64,strToArrBuf:strToArrBuf,base64ToArrBuf:base64ToArrBuf,publicExponent:publicExponent,randomBuf:randomBuf,joinBufs:joinBufs,normalizeUtf8ToBuf:normalizeUtf8ToBuf,normalizeUtf16ToBuf:normalizeUtf16ToBuf,normalizeBase64ToBuf:normalizeBase64ToBuf,normalizeToBuf:normalizeToBuf,structuralClone:structuralClone},utils$1$1=Object.freeze({__proto__:null,arrBufToStr:arrBufToStr,arrBufToBase64:arrBufToBase64,strToArrBuf:strToArrBuf,base64ToArrBuf:base64ToArrBuf,publicExponent:publicExponent,randomBuf:randomBuf,joinBufs:joinBufs,normalizeUtf8ToBuf:normalizeUtf8ToBuf,normalizeUtf16ToBuf:normalizeUtf16ToBuf,normalizeBase64ToBuf:normalizeBase64ToBuf,normalizeUnicodeToBuf:normalizeUnicodeToBuf,normalizeToBuf:normalizeToBuf,structuralClone:structuralClone,default:utils$4}),ECC_READ_ALG="ECDH",ECC_WRITE_ALG="ECDSA",RSA_READ_ALG="RSA-OAEP",RSA_WRITE_ALG="RSASSA-PKCS1-v1_5",SALT_LENGTH=128,DEFAULT_CRYPTOSYSTEM="ecc",DEFAULT_ECC_CURVE=EccCurve.P_256,DEFAULT_RSA_SIZE=RsaSize.B2048,DEFAULT_SYMM_ALG=SymmAlg.AES_CTR,DEFAULT_SYMM_LEN=SymmKeyLength.B256,DEFAULT_CTR_LEN=64,DEFAULT_HASH_ALG=HashAlg.SHA_256,DEFAULT_CHAR_SIZE=CharSize.B16,DEFAULT_STORE_NAME="keystore",DEFAULT_READ_KEY_NAME="read-key",DEFAULT_WRITE_KEY_NAME="write-key",constants$2={ECC_READ_ALG:ECC_READ_ALG,ECC_WRITE_ALG:ECC_WRITE_ALG,RSA_READ_ALG:RSA_READ_ALG,RSA_WRITE_ALG:RSA_WRITE_ALG,SALT_LENGTH:SALT_LENGTH,DEFAULT_CRYPTOSYSTEM:DEFAULT_CRYPTOSYSTEM,DEFAULT_ECC_CURVE:DEFAULT_ECC_CURVE,DEFAULT_RSA_SIZE:DEFAULT_RSA_SIZE,DEFAULT_SYMM_ALG:DEFAULT_SYMM_ALG,DEFAULT_CTR_LEN:DEFAULT_CTR_LEN,DEFAULT_HASH_ALG:DEFAULT_HASH_ALG,DEFAULT_CHAR_SIZE:DEFAULT_CHAR_SIZE,DEFAULT_STORE_NAME:DEFAULT_STORE_NAME,DEFAULT_READ_KEY_NAME:DEFAULT_READ_KEY_NAME,DEFAULT_WRITE_KEY_NAME:DEFAULT_WRITE_KEY_NAME},constants$1$1=Object.freeze({__proto__:null,ECC_READ_ALG:ECC_READ_ALG,ECC_WRITE_ALG:ECC_WRITE_ALG,RSA_READ_ALG:RSA_READ_ALG,RSA_WRITE_ALG:RSA_WRITE_ALG,SALT_LENGTH:SALT_LENGTH,DEFAULT_CRYPTOSYSTEM:DEFAULT_CRYPTOSYSTEM,DEFAULT_ECC_CURVE:DEFAULT_ECC_CURVE,DEFAULT_RSA_SIZE:DEFAULT_RSA_SIZE,DEFAULT_SYMM_ALG:DEFAULT_SYMM_ALG,DEFAULT_SYMM_LEN:DEFAULT_SYMM_LEN,DEFAULT_CTR_LEN:DEFAULT_CTR_LEN,DEFAULT_HASH_ALG:DEFAULT_HASH_ALG,DEFAULT_CHAR_SIZE:DEFAULT_CHAR_SIZE,DEFAULT_STORE_NAME:DEFAULT_STORE_NAME,DEFAULT_READ_KEY_NAME:DEFAULT_READ_KEY_NAME,DEFAULT_WRITE_KEY_NAME:DEFAULT_WRITE_KEY_NAME,default:constants$2});function makeKeypair(e,t){return __awaiter(this,void 0,void 0,(function(){var r,n;return __generator$2(this,(function(o){return checkValidKeyUse(t),r=t===KeyUse.Read?ECC_READ_ALG:ECC_WRITE_ALG,n=t===KeyUse.Read?["deriveKey","deriveBits"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:r,namedCurve:e},!1,n)]}))}))}function importPublicKey(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n,o,i;return __generator$2(this,(function(a){return checkValidKeyUse(r),n=r===KeyUse.Read?ECC_READ_ALG:ECC_WRITE_ALG,o=r===KeyUse.Read?[]:["verify"],i=utils$4.base64ToArrBuf(e),[2,globalThis.crypto.subtle.importKey("raw",i,{name:n,namedCurve:t},!0,o)]}))}))}var keys={makeKeypair:makeKeypair,importPublicKey:importPublicKey};function makeKey(e){return __awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(t){return[2,globalThis.crypto.subtle.generateKey({name:(null==e?void 0:e.alg)||DEFAULT_SYMM_ALG,length:(null==e?void 0:e.length)||DEFAULT_SYMM_LEN},!0,["encrypt","decrypt"])]}))}))}function importKey(e,t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator$2(this,(function(n){return r=utils$4.base64ToArrBuf(e),[2,globalThis.crypto.subtle.importKey("raw",r,{name:(null==t?void 0:t.alg)||DEFAULT_SYMM_ALG,length:(null==t?void 0:t.length)||DEFAULT_SYMM_LEN},!0,["encrypt","decrypt"])]}))}))}var keys$1={makeKey:makeKey,importKey:importKey};function encryptBytes(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n,o,i,a,s,u;return __generator$2(this,(function(c){switch(c.label){case 0:return n=utils$4.normalizeUtf16ToBuf(e),"string"!=typeof t?[3,2]:[4,keys$1.importKey(t,r)];case 1:return i=c.sent(),[3,3];case 2:i=t,c.label=3;case 3:return o=i,a=(null==r?void 0:r.alg)||DEFAULT_SYMM_ALG,s=(null==r?void 0:r.iv)||utils$4.randomBuf(16),[4,globalThis.crypto.subtle.encrypt({name:a,iv:a===SymmAlg.AES_CTR?void 0:s,counter:a===SymmAlg.AES_CTR?new Uint8Array(s):void 0,length:a===SymmAlg.AES_CTR?DEFAULT_CTR_LEN:void 0},o,n)];case 4:return u=c.sent(),[2,utils$4.joinBufs(s,u)]}}))}))}function decryptBytes(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n,o,i,a,s,u;return __generator$2(this,(function(c){switch(c.label){case 0:return n=utils$4.normalizeBase64ToBuf(e),"string"!=typeof t?[3,2]:[4,keys$1.importKey(t,r)];case 1:return i=c.sent(),[3,3];case 2:i=t,c.label=3;case 3:return o=i,a=(null==r?void 0:r.alg)||DEFAULT_SYMM_ALG,s=n.slice(0,16),u=n.slice(16),[4,globalThis.crypto.subtle.decrypt({name:a,iv:a===SymmAlg.AES_CTR?void 0:s,counter:a===SymmAlg.AES_CTR?new Uint8Array(s):void 0,length:a===SymmAlg.AES_CTR?DEFAULT_CTR_LEN:void 0},o,u)];case 4:return[2,c.sent()]}}))}))}function encrypt$1(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n;return __generator$2(this,(function(o){switch(o.label){case 0:return[4,encryptBytes(e,t,r)];case 1:return n=o.sent(),[2,utils$4.arrBufToBase64(n)]}}))}))}function decrypt$1(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n;return __generator$2(this,(function(o){switch(o.label){case 0:return[4,decryptBytes(e,t,r)];case 1:return n=o.sent(),[2,utils$4.arrBufToStr(n,16)]}}))}))}function exportKey(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator$2(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("raw",e)];case 1:return t=r.sent(),[2,utils$4.arrBufToBase64(t)]}}))}))}var operations={encryptBytes:encryptBytes,decryptBytes:decryptBytes,encrypt:encrypt$1,decrypt:decrypt$1,exportKey:exportKey},aes$1=__assign(__assign({},keys$1),operations);function sign$1(e,t,r,n){return void 0===r&&(r=DEFAULT_CHAR_SIZE),void 0===n&&(n=DEFAULT_HASH_ALG),__awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(o){return[2,globalThis.crypto.subtle.sign({name:ECC_WRITE_ALG,hash:{name:n}},t,normalizeUnicodeToBuf(e,r))]}))}))}function verify(e,t,r,n,o,i){return void 0===n&&(n=DEFAULT_CHAR_SIZE),void 0===o&&(o=DEFAULT_ECC_CURVE),void 0===i&&(i=DEFAULT_HASH_ALG),__awaiter(this,void 0,void 0,(function(){var a,s,u,c;return __generator$2(this,(function(l){switch(l.label){case 0:return s=(a=globalThis.crypto.subtle).verify,u=[{name:ECC_WRITE_ALG,hash:{name:i}}],"string"!=typeof r?[3,2]:[4,keys.importPublicKey(r,o,KeyUse.Write)];case 1:return c=l.sent(),[3,3];case 2:c=r,l.label=3;case 3:return[2,s.apply(a,u.concat([c,normalizeBase64ToBuf(t),normalizeUnicodeToBuf(e,n)]))]}}))}))}function encrypt$1$1(e,t,r,n,o,i){return void 0===n&&(n=DEFAULT_CHAR_SIZE),void 0===o&&(o=DEFAULT_ECC_CURVE),__awaiter(this,void 0,void 0,(function(){var a,s;return __generator$2(this,(function(u){switch(u.label){case 0:return"string"!=typeof r?[3,2]:[4,keys.importPublicKey(r,o,KeyUse.Read)];case 1:return a=u.sent(),[3,3];case 2:a=r,u.label=3;case 3:return[4,getSharedKey(t,a,i)];case 4:return s=u.sent(),[2,aes$1.encryptBytes(normalizeUnicodeToBuf(e,n),s,i)]}}))}))}function decrypt$1$1(e,t,r,n,o){return void 0===n&&(n=DEFAULT_ECC_CURVE),__awaiter(this,void 0,void 0,(function(){var i,a;return __generator$2(this,(function(s){switch(s.label){case 0:return"string"!=typeof r?[3,2]:[4,keys.importPublicKey(r,n,KeyUse.Read)];case 1:return i=s.sent(),[3,3];case 2:i=r,s.label=3;case 3:return[4,getSharedKey(t,i,o)];case 4:return a=s.sent(),[2,aes$1.decryptBytes(normalizeBase64ToBuf(e),a,o)]}}))}))}function getPublicKey(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator$2(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("raw",e.publicKey)];case 1:return t=r.sent(),[2,utils$4.arrBufToBase64(t)]}}))}))}function getSharedKey(e,t,r){return __awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(n){return[2,globalThis.crypto.subtle.deriveKey({name:ECC_READ_ALG,public:t},e,{name:(null==r?void 0:r.alg)||DEFAULT_SYMM_ALG,length:(null==r?void 0:r.length)||DEFAULT_SYMM_LEN},!1,["encrypt","decrypt"])]}))}))}var operations$1={sign:sign$1,verify:verify,encrypt:encrypt$1$1,decrypt:decrypt$1$1,getPublicKey:getPublicKey,getSharedKey:getSharedKey},defaultConfig={type:DEFAULT_CRYPTOSYSTEM,curve:DEFAULT_ECC_CURVE,rsaSize:DEFAULT_RSA_SIZE,symmAlg:DEFAULT_SYMM_ALG,symmLen:DEFAULT_SYMM_LEN,hashAlg:DEFAULT_HASH_ALG,charSize:DEFAULT_CHAR_SIZE,storeName:DEFAULT_STORE_NAME,readKeyName:DEFAULT_READ_KEY_NAME,writeKeyName:DEFAULT_WRITE_KEY_NAME};function normalize(e,t){var r;return void 0===t&&(t=!0),r=e?__assign(__assign({},defaultConfig),e):defaultConfig,(null==e?void 0:e.type)||(r.type=t?CryptoSystem.ECC:CryptoSystem.RSA),r}function eccEnabled(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator$2(this,(function(t){switch(t.label){case 0:return[4,keys.makeKeypair(DEFAULT_ECC_CURVE,KeyUse.Read)];case 1:e=t.sent(),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,utils$4.structuralClone(e)];case 3:return t.sent(),[3,5];case 4:return t.sent(),[2,!1];case 5:return[2,!0]}}))}))}function merge$1(e,t){return void 0===t&&(t={}),__assign(__assign({},e),t)}function symmKeyOpts(e){return{alg:e.symmAlg,length:e.symmLen}}var config={defaultConfig:defaultConfig,normalize:normalize,eccEnabled:eccEnabled,merge:merge$1,symmKeyOpts:symmKeyOpts},config$1=Object.freeze({__proto__:null,defaultConfig:defaultConfig,normalize:normalize,eccEnabled:eccEnabled,merge:merge$1,symmKeyOpts:symmKeyOpts,default:config}),KeyStoreBase=function(){function e(e,t){this.cfg=e,this.store=t}return e.prototype.writeKey=function(){return __awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(e){switch(e.label){case 0:return[4,IDB.getKeypair(this.cfg.writeKeyName,this.store)];case 1:return[2,checkIsKeyPair(e.sent())]}}))}))},e.prototype.readKey=function(){return __awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(e){switch(e.label){case 0:return[4,IDB.getKeypair(this.cfg.readKeyName,this.store)];case 1:return[2,checkIsKeyPair(e.sent())]}}))}))},e.prototype.getSymmKey=function(e,t){return __awaiter(this,void 0,void 0,(function(){var r,n,o;return __generator$2(this,(function(i){switch(i.label){case 0:return r=config.merge(this.cfg,t),[4,IDB.getKey(e,this.store)];case 1:return null!==(n=i.sent())?[2,n]:[4,aes$1.makeKey(config.symmKeyOpts(r))];case 2:return o=i.sent(),[4,IDB.put(e,o,this.store)];case 3:return i.sent(),[2,o]}}))}))},e.prototype.keyExists=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(t){switch(t.label){case 0:return[4,IDB.getKey(e,this.store)];case 1:return[2,null!==t.sent()]}}))}))},e.prototype.deleteKey=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(t){return[2,IDB.rm(e,this.store)]}))}))},e.prototype.destroy=function(){return __awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(e){return[2,IDB.dropStore(this.store)]}))}))},e.prototype.importSymmKey=function(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n,o;return __generator$2(this,(function(i){switch(i.label){case 0:return n=config.merge(this.cfg,r),[4,aes$1.importKey(e,config.symmKeyOpts(n))];case 1:return o=i.sent(),[4,IDB.put(t,o,this.store)];case 2:return i.sent(),[2]}}))}))},e.prototype.exportSymmKey=function(e,t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator$2(this,(function(n){switch(n.label){case 0:return[4,this.getSymmKey(e,t)];case 1:return r=n.sent(),[2,aes$1.exportKey(r)]}}))}))},e.prototype.encryptWithSymmKey=function(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n,o,i;return __generator$2(this,(function(a){switch(a.label){case 0:return n=config.merge(this.cfg,r),[4,this.getSymmKey(t,r)];case 1:return o=a.sent(),[4,aes$1.encryptBytes(utils$4.strToArrBuf(e,n.charSize),o,config.symmKeyOpts(n))];case 2:return i=a.sent(),[2,utils$4.arrBufToBase64(i)]}}))}))},e.prototype.decryptWithSymmKey=function(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n,o,i;return __generator$2(this,(function(a){switch(a.label){case 0:return n=config.merge(this.cfg,r),[4,this.getSymmKey(t,r)];case 1:return o=a.sent(),[4,aes$1.decryptBytes(utils$4.base64ToArrBuf(e),o,config.symmKeyOpts(n))];case 2:return i=a.sent(),[2,utils$4.arrBufToStr(i,n.charSize)]}}))}))},e}(),ECCKeyStore=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$a(t,e),t.init=function(e){return __awaiter(this,void 0,void 0,(function(){var r,n,o,i,a,s;return __generator$2(this,(function(u){switch(u.label){case 0:return r=config.normalize(__assign(__assign({},e||{}),{type:CryptoSystem.ECC})),n=r.curve,o=r.storeName,i=r.readKeyName,a=r.writeKeyName,s=IDB.createStore(o),[4,IDB.createIfDoesNotExist(i,(function(){return keys.makeKeypair(n,KeyUse.Read)}),s)];case 1:return u.sent(),[4,IDB.createIfDoesNotExist(a,(function(){return keys.makeKeypair(n,KeyUse.Write)}),s)];case 2:return u.sent(),[2,new t(r,s)]}}))}))},t.prototype.sign=function(e,t){return __awaiter(this,void 0,void 0,(function(){var r,n,o,i;return __generator$2(this,(function(a){switch(a.label){case 0:return r=config.merge(this.cfg,t),[4,this.writeKey()];case 1:return n=a.sent(),i=(o=utils$4).arrBufToBase64,[4,operations$1.sign(e,n.privateKey,r.charSize,r.hashAlg)];case 2:return[2,i.apply(o,[a.sent()])]}}))}))},t.prototype.verify=function(e,t,r,n){return __awaiter(this,void 0,void 0,(function(){var o;return __generator$2(this,(function(i){return o=config.merge(this.cfg,n),[2,operations$1.verify(e,t,r,o.charSize,o.curve,o.hashAlg)]}))}))},t.prototype.encrypt=function(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n,o,i,a;return __generator$2(this,(function(s){switch(s.label){case 0:return n=config.merge(this.cfg,r),[4,this.readKey()];case 1:return o=s.sent(),a=(i=utils$4).arrBufToBase64,[4,operations$1.encrypt(e,o.privateKey,t,n.charSize,n.curve)];case 2:return[2,a.apply(i,[s.sent()])]}}))}))},t.prototype.decrypt=function(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n,o,i,a;return __generator$2(this,(function(s){switch(s.label){case 0:return n=config.merge(this.cfg,r),[4,this.readKey()];case 1:return o=s.sent(),a=(i=utils$4).arrBufToStr,[4,operations$1.decrypt(e,o.privateKey,t,n.curve)];case 2:return[2,a.apply(i,[s.sent(),n.charSize])]}}))}))},t.prototype.publicReadKey=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator$2(this,(function(t){switch(t.label){case 0:return[4,this.readKey()];case 1:return e=t.sent(),[2,operations$1.getPublicKey(e)]}}))}))},t.prototype.publicWriteKey=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator$2(this,(function(t){switch(t.label){case 0:return[4,this.writeKey()];case 1:return e=t.sent(),[2,operations$1.getPublicKey(e)]}}))}))},t}(KeyStoreBase);function makeKeypair$1(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n,o;return __generator$2(this,(function(i){return checkValidKeyUse(r),n=r===KeyUse.Read?RSA_READ_ALG:RSA_WRITE_ALG,o=r===KeyUse.Read?["encrypt","decrypt"]:["sign","verify"],[2,globalThis.crypto.subtle.generateKey({name:n,modulusLength:e,publicExponent:utils$4.publicExponent(),hash:{name:t}},!1,o)]}))}))}function stripKeyHeader(e){return e.replace("-----BEGIN PUBLIC KEY-----\n","").replace("\n-----END PUBLIC KEY-----","")}function importPublicKey$1(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n,o,i;return __generator$2(this,(function(a){return checkValidKeyUse(r),n=r===KeyUse.Read?RSA_READ_ALG:RSA_WRITE_ALG,o=r===KeyUse.Read?["encrypt"]:["verify"],i=utils$4.base64ToArrBuf(stripKeyHeader(e)),[2,globalThis.crypto.subtle.importKey("spki",i,{name:n,hash:{name:t}},!0,o)]}))}))}var keys$2={makeKeypair:makeKeypair$1,importPublicKey:importPublicKey$1};function sign$1$1(e,t,r){return void 0===r&&(r=DEFAULT_CHAR_SIZE),__awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(n){return[2,globalThis.crypto.subtle.sign({name:RSA_WRITE_ALG,saltLength:SALT_LENGTH},t,normalizeUnicodeToBuf(e,r))]}))}))}function verify$1(e,t,r,n,o){return void 0===n&&(n=DEFAULT_CHAR_SIZE),void 0===o&&(o=DEFAULT_HASH_ALG),__awaiter(this,void 0,void 0,(function(){var i,a,s,u;return __generator$2(this,(function(c){switch(c.label){case 0:return a=(i=globalThis.crypto.subtle).verify,s=[{name:RSA_WRITE_ALG,saltLength:SALT_LENGTH}],"string"!=typeof r?[3,2]:[4,keys$2.importPublicKey(r,o,KeyUse.Write)];case 1:return u=c.sent(),[3,3];case 2:u=r,c.label=3;case 3:return[2,a.apply(i,s.concat([u,normalizeBase64ToBuf(t),normalizeUnicodeToBuf(e,n)]))]}}))}))}function encrypt$2(e,t,r,n){return void 0===r&&(r=DEFAULT_CHAR_SIZE),void 0===n&&(n=DEFAULT_HASH_ALG),__awaiter(this,void 0,void 0,(function(){var o,i,a,s;return __generator$2(this,(function(u){switch(u.label){case 0:return i=(o=globalThis.crypto.subtle).encrypt,a=[{name:RSA_READ_ALG}],"string"!=typeof t?[3,2]:[4,keys$2.importPublicKey(t,n,KeyUse.Read)];case 1:return s=u.sent(),[3,3];case 2:s=t,u.label=3;case 3:return[2,i.apply(o,a.concat([s,normalizeUnicodeToBuf(e,r)]))]}}))}))}function decrypt$2(e,t){return __awaiter(this,void 0,void 0,(function(){var r;return __generator$2(this,(function(n){return r=normalizeBase64ToBuf(e),[2,globalThis.crypto.subtle.decrypt({name:RSA_READ_ALG},t,r)]}))}))}function getPublicKey$1(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator$2(this,(function(r){switch(r.label){case 0:return[4,globalThis.crypto.subtle.exportKey("spki",e.publicKey)];case 1:return t=r.sent(),[2,utils$4.arrBufToBase64(t)]}}))}))}var operations$2={sign:sign$1$1,verify:verify$1,encrypt:encrypt$2,decrypt:decrypt$2,getPublicKey:getPublicKey$1},RSAKeyStore=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$a(t,e),t.init=function(e){return __awaiter(this,void 0,void 0,(function(){var r,n,o,i,a,s,u;return __generator$2(this,(function(c){switch(c.label){case 0:return r=config.normalize(__assign(__assign({},e||{}),{type:CryptoSystem.RSA})),n=r.rsaSize,o=r.hashAlg,i=r.storeName,a=r.readKeyName,s=r.writeKeyName,u=IDB.createStore(i),[4,IDB.createIfDoesNotExist(a,(function(){return keys$2.makeKeypair(n,o,KeyUse.Read)}),u)];case 1:return c.sent(),[4,IDB.createIfDoesNotExist(s,(function(){return keys$2.makeKeypair(n,o,KeyUse.Write)}),u)];case 2:return c.sent(),[2,new t(r,u)]}}))}))},t.prototype.sign=function(e,t){return __awaiter(this,void 0,void 0,(function(){var r,n,o,i;return __generator$2(this,(function(a){switch(a.label){case 0:return r=config.merge(this.cfg,t),[4,this.writeKey()];case 1:return n=a.sent(),i=(o=utils$4).arrBufToBase64,[4,operations$2.sign(e,n.privateKey,r.charSize)];case 2:return[2,i.apply(o,[a.sent()])]}}))}))},t.prototype.verify=function(e,t,r,n){return __awaiter(this,void 0,void 0,(function(){var o;return __generator$2(this,(function(i){return o=config.merge(this.cfg,n),[2,operations$2.verify(e,t,r,o.charSize,o.hashAlg)]}))}))},t.prototype.encrypt=function(e,t,r){return __awaiter(this,void 0,void 0,(function(){var n,o,i;return __generator$2(this,(function(a){switch(a.label){case 0:return n=config.merge(this.cfg,r),i=(o=utils$4).arrBufToBase64,[4,operations$2.encrypt(e,t,n.charSize,n.hashAlg)];case 1:return[2,i.apply(o,[a.sent()])]}}))}))},t.prototype.decrypt=function(e,t,r){return __awaiter(this,void 0,void 0,(function(){var t,n,o,i;return __generator$2(this,(function(a){switch(a.label){case 0:return[4,this.readKey()];case 1:return t=a.sent(),n=config.merge(this.cfg,r),i=(o=utils$4).arrBufToStr,[4,operations$2.decrypt(e,t.privateKey)];case 2:return[2,i.apply(o,[a.sent(),n.charSize])]}}))}))},t.prototype.publicReadKey=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator$2(this,(function(t){switch(t.label){case 0:return[4,this.readKey()];case 1:return e=t.sent(),[2,operations$2.getPublicKey(e)]}}))}))},t.prototype.publicWriteKey=function(){return __awaiter(this,void 0,void 0,(function(){var e;return __generator$2(this,(function(t){switch(t.label){case 0:return[4,this.writeKey()];case 1:return e=t.sent(),[2,operations$2.getPublicKey(e)]}}))}))},t}(KeyStoreBase);function init$1$1(e){return __awaiter(this,void 0,void 0,(function(){var t,r;return __generator$2(this,(function(n){switch(n.label){case 0:return[4,config.eccEnabled()];case 1:if(!(t=n.sent())&&"ecc"===(null==e?void 0:e.type))throw ECCNotEnabled;return checkValidCryptoSystem((r=config.normalize(e,t)).type),"ecc"===r.type?[2,ECCKeyStore.init(r)]:[2,RSAKeyStore.init(r)]}}))}))}function clear$1$1(){return __awaiter(this,void 0,void 0,(function(){return __generator$2(this,(function(e){return[2,IDB.clear()]}))}))}var index$6=__assign(__assign(__assign({},keys),operations$1),ECCKeyStore),ecc=Object.freeze({__proto__:null,default:index$6,makeKeypair:makeKeypair,importPublicKey:importPublicKey,sign:sign$1,verify:verify,encrypt:encrypt$1$1,decrypt:decrypt$1$1,getPublicKey:getPublicKey,getSharedKey:getSharedKey,ECCKeyStore:ECCKeyStore}),index$1$1=__assign(__assign(__assign({},keys$2),operations$2),RSAKeyStore),rsa$1=Object.freeze({__proto__:null,default:index$1$1,makeKeypair:makeKeypair$1,importPublicKey:importPublicKey$1,sign:sign$1$1,verify:verify$1,encrypt:encrypt$2,decrypt:decrypt$2,getPublicKey:getPublicKey$1,RSAKeyStore:RSAKeyStore}),index$2$1=__assign(__assign(__assign(__assign(__assign({init:init$1$1,clear:clear$1$1},types$1),constants$1$1),config$1),utils$1$1),{ecc:ecc,rsa:rsa$1,idb:idb});const KEYSTORE_CFG={type:types$2.CryptoSystem.RSA};let ks=null;const clear$2=async()=>{ks=await get$3(),await ks.destroy(),ks=null},create$3=async()=>await index$2$1.init(KEYSTORE_CFG),set$1=async e=>{ks=e},get$3=async()=>ks||(ks=await index$2$1.init(KEYSTORE_CFG),ks);var keystore$1=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",clear:clear$2,create:create$3,set:set$1,get:get$3});const encrypt=async(e,t)=>{assertBrowser("aes.encrypt");const r=await aes$2.importKey(t,{length:types$2.SymmKeyLength.B256}),n=await aes$2.encryptBytes(e.buffer,r);return new Uint8Array(n)},decrypt=async(e,t)=>{assertBrowser("aes.decrypt");const r=await aes$2.importKey(t,{length:types$2.SymmKeyLength.B256}),n=await aes$2.decryptBytes(e.buffer,r);return new Uint8Array(n)},genKeyStr=async()=>{assertBrowser("aes.genKeyStr");const e=await aes$2.makeKey({length:types$2.SymmKeyLength.B256});return aes$2.exportKey(e)},decryptGCM=async(e,t,r)=>{assertBrowser("aes.decryptGCM");const n=utils$5.base64ToArrBuf(r),o=await crypto.subtle.importKey("raw",utils$5.base64ToArrBuf(t),"AES-GCM",!1,["encrypt","decrypt"]),i=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},o,utils$5.base64ToArrBuf(e));return utils$5.arrBufToStr(i,types$2.CharSize.B8)},sha256=async e=>{assertBrowser("hash.sha256");const t=e.buffer,r=await crypto.subtle.digest("SHA-256",t);return new Uint8Array(r)},rsaVerify=(e,t,r)=>{assertBrowser("rsa.verify");const n=utils$5.arrBufToBase64(r.buffer);return rsaOperations.verify(e,t,n)},ed25519Verify=(e,t,r)=>nobleEd25519.verify(t,e,r),ksPublicReadKey=async()=>{assertBrowser("keystore.publicReadKey");return(await get$3()).publicReadKey()},ksPublicWriteKey=async()=>{assertBrowser("keystore.publicWriteKey");return(await get$3()).publicWriteKey()},ksDecrypt=async e=>{assertBrowser("keystore.decrypt");return(await get$3()).decrypt(e)},ksSign=async(e,t)=>{assertBrowser("keystore.sign");return(await get$3()).sign(e,{charSize:t})},ksImportSymmKey=async(e,t)=>{assertBrowser("keystore.importSymmKey");return(await get$3()).importSymmKey(e,t)},ksExportSymmKey=async e=>{assertBrowser("keystore.exportSymmKey");return(await get$3()).exportSymmKey(e)},ksKeyExists=async e=>{assertBrowser("keystore.keyExists");return(await get$3()).keyExists(e)},ksGetAlg=async()=>{assertBrowser("keystore.getAlg");return(await get$3()).cfg.type},ksClear=async()=>(assertBrowser("keystore.clear"),clear$2()),getItem$1=e=>(assertBrowser("storage.getItem"),localforage$1.getItem(e)),setItem$1=(e,t)=>(assertBrowser("storage.setItem"),localforage$1.setItem(e,t)),removeItem$1=e=>(assertBrowser("storage.removeItem"),localforage$1.removeItem(e)),clear$1=()=>(assertBrowser("storage.clear"),localforage$1.clear()),DEFAULT_IMPLEMENTATION={hash:{sha256:sha256},aes:{encrypt:encrypt,decrypt:decrypt,genKeyStr:genKeyStr,decryptGCM:decryptGCM},rsa:{verify:rsaVerify},ed25519:{verify:ed25519Verify},keystore:{publicReadKey:ksPublicReadKey,publicWriteKey:ksPublicWriteKey,decrypt:ksDecrypt,sign:ksSign,importSymmKey:ksImportSymmKey,exportSymmKey:ksExportSymmKey,keyExists:ksKeyExists,getAlg:ksGetAlg,clear:ksClear},storage:{getItem:getItem$1,setItem:setItem$1,removeItem:removeItem$1,clear:clear$1}};let impl=DEFAULT_IMPLEMENTATION;const setDependencies=e=>(impl={hash:merge(impl.hash,e.hash),aes:merge(impl.aes,e.aes),rsa:merge(impl.rsa,e.rsa),ed25519:merge(impl.ed25519,e.ed25519),keystore:merge(impl.keystore,e.keystore),storage:merge(impl.storage,e.storage)},impl),merge=(e,t)=>({...e,...t||{}}),getItem=e=>impl.storage.getItem(e),setItem=(e,t)=>impl.storage.setItem(e,t),removeItem=e=>impl.storage.removeItem(e),isDefined=e=>void 0!==e,notNull=e=>null!==e,isJust=notNull,isValue=e=>isDefined(e)&&notNull(e),isBool=e=>"boolean"==typeof e,isNum=e=>"number"==typeof e,isString=e=>"string"==typeof e,isObject$1=e=>null!==e&&"object"==typeof e,isBlob=e=>"undefined"!=typeof Blob&&(e instanceof Blob||isObject$1(e)&&"Blob"===e?.constructor?.name),removeKeyFromObj=(e,t)=>{const{[t]:r,...n}=e;return n},updateOrRemoveKeyFromObj=(e,t,r)=>null===r?removeKeyFromObj(e,t):{...e,[t]:r},mapObj=(e,t)=>{const r={};return Object.entries(e).forEach((([e,n])=>{r[e]=t(n,e)})),r},mapObjAsync=async(e,t)=>{const r={};return await Promise.all(Object.entries(e).map((async([e,n])=>{r[e]=await t(n,e)}))),r},arrContains=(e,t)=>e.indexOf(t)>-1,asyncWaterfall=async(e,t)=>{let r=e;for(let n=0;n<t.length;n++)r=await t[n](r);return r},VERSION="0.27.0",UCANS_STORAGE_KEY="webnative.auth_ucans",USERNAME_STORAGE_KEY="webnative.auth_username";async function authenticatedUsername$1(){return getItem(USERNAME_STORAGE_KEY).then((e=>e||null))}var index$5=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",api:api$1,arrbufs:arrbufs,base64:base64$2,blob:blob,UCANS_STORAGE_KEY:UCANS_STORAGE_KEY,USERNAME_STORAGE_KEY:USERNAME_STORAGE_KEY,authenticatedUsername:authenticatedUsername$1,isDefined:isDefined,notNull:notNull,isJust:isJust,isValue:isValue,isBool:isBool,isNum:isNum,isString:isString,isObject:isObject$1,isBlob:isBlob,removeKeyFromObj:removeKeyFromObj,updateOrRemoveKeyFromObj:updateOrRemoveKeyFromObj,mapObj:mapObj,mapObjAsync:mapObjAsync,arrContains:arrContains,asyncWaterfall:asyncWaterfall,VERSION:VERSION,isBrowser:isBrowser,assertBrowser:assertBrowser});const fromBytes=e=>Array.prototype.map.call(e,(e=>("00"+e.toString(16)).slice(-2))).join(""),toBytes=e=>{const t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++)t[r]=parseInt(e.slice(2*r,2*r+2),16);return t},sha256Str=async e=>{const t=utils$6.strToArrBuf(e,8),r=new Uint8Array(t),n=await impl.hash.sha256(r);return fromBytes(n)},hash$1={sha256:e=>impl.hash.sha256(e),sha256Str:sha256Str},aes={encrypt:(e,t)=>impl.aes.encrypt(e,t),decrypt:(e,t)=>impl.aes.decrypt(e,t),genKeyStr:()=>impl.aes.genKeyStr(),decryptGCM:(e,t,r)=>impl.aes.decryptGCM(e,t,r)},rsa={verify:(e,t,r)=>impl.rsa.verify(e,t,r)},ed25519={verify:(e,t,r)=>impl.ed25519.verify(e,t,r)},keystore={publicReadKey:()=>impl.keystore.publicReadKey(),publicWriteKey:()=>impl.keystore.publicWriteKey(),decrypt:e=>impl.keystore.decrypt(e),sign:(e,t)=>impl.keystore.sign(e,t),importSymmKey:(e,t)=>impl.keystore.importSymmKey(e,t),exportSymmKey:e=>impl.keystore.exportSymmKey(e),keyExists:e=>impl.keystore.keyExists(e),getAlg:()=>impl.keystore.getAlg(),clear:()=>impl.keystore.clear()};var crypto$4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",sha256Str:sha256Str,hash:hash$1,aes:aes,rsa:rsa,ed25519:ed25519,keystore:keystore}),Branch,Branch2,Kind,Kind2;function directory(...e){if(e.some((e=>e.includes("/"))))throw new Error("Forward slashes `/` are not allowed");return{directory:e}}function file(...e){if(e.some((e=>e.includes("/"))))throw new Error("Forward slashes `/` are not allowed");return{file:e}}function root$1(){return{directory:[]}}function fromPosix(e){const t=e.replace(/^\/+/,"").split("/");return e.endsWith("/")?{directory:t.slice(0,-1)}:""===e?root$1():{file:t}}function toPosix(e,{absolute:t}={absolute:!1}){const r=t?"/":"",n=unwrap(e).join("/");return isDirectory(e)?r+n+(n.length?"/":""):r+n}function combine(e,t){return map((t=>unwrap(e).concat(t)),t)}function isBranch(e,t){return unwrap(t)[0]===e}function isDirectory(e){return!!e.directory}function isFile$1(e){return!!e.file}function isRootDirectory(e){return 0===e.directory.length}function isSameBranch(e,t){return unwrap(e)[0]===unwrap(t)[0]}function isSameKind(e,t){return!(!isDirectory(e)||!isDirectory(t))||!(!isFile$1(e)||!isFile$1(t))}function kind(e){return isDirectory(e)?Kind.Directory:Kind.File}function map(e,t){return isDirectory(t)?{directory:e(t.directory)}:isFile$1(t)?{file:e(t.file)}:t}function parent(e){return isDirectory(e)&&isRootDirectory(e)?null:directory(...unwrap(e).slice(0,-1))}function removeBranch(e){return map((t=>isDirectory(e)||t.length>1?t.slice(1):t),e)}function unwrap(e){return isDirectory(e)?e.directory:isFile$1(e)?e.file:[]}function log$1(e){return`[ ${e.join(", ")} ]`}Branch2=Branch||(Branch={}),Branch2.Public="public",Branch2.Pretty="p",Branch2.Private="private",Branch2.PrivateLog="privateLog",Branch2.Version="version",Kind2=Kind||(Kind={}),Kind2.Directory="directory",Kind2.File="file";var path=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Branch(){return Branch},get Kind(){return Kind},directory:directory,file:file,root:root$1,fromPosix:fromPosix,toPosix:toPosix,combine:combine,isBranch:isBranch,isDirectory:isDirectory,isFile:isFile$1,isRootDirectory:isRootDirectory,isSameBranch:isSameBranch,isSameKind:isSameKind,kind:kind,map:map,parent:parent,removeBranch:removeBranch,unwrap:unwrap,log:log$1});async function bareNameFilter({path:e}){return`wnfs__bareNameFilter__${await hash$1.sha256Str(pathToString(e))}`}async function readKey({path:e}){return`wnfs__readKey__${await hash$1.sha256Str(pathToString(e))}`}function pathToString(e){return"/"+unwrap(e).join("/")}var error$1={};const encodeError$1=e=>{const{name:t,message:r,stack:n,code:o,detail:i}=e;return{name:t,message:r,stack:n,code:o,detail:i}};error$1.encodeError=encodeError$1;const decodeError$3=e=>{if(e instanceof Error)return e;{const{name:t,message:r,stack:n,code:o}=e;return Object.assign(createError$1(t,r),{name:t,stack:n,code:o})}};error$1.decodeError=decodeError$3;const createError$1=(e,t)=>{switch(e){case"RangeError":return new RangeError(t);case"ReferenceError":return ReferenceError(t);case"SyntaxError":return new SyntaxError(t);case"TypeError":return new TypeError(t);case"URIError":return new URIError(t);default:return new Error(t)}};var buffer$1={};const ensureUniqueBuffers$1=e=>new Set(e);buffer$1.ensureUniqueBuffers=ensureUniqueBuffers$1;var error={};error.TimeoutError=class extends Error{get name(){return this.constructor.name}},error.AbortError=class extends Error{get name(){return this.constructor.name}},error.DisconnectError=class extends Error{get name(){return this.constructor.name}};const{decodeError:decodeError$2}=error$1,{ensureUniqueBuffers:ensureUniqueBuffers}=buffer$1,{DisconnectError:DisconnectError,TimeoutError:TimeoutError,AbortError:AbortError}=error;var transport=class e{constructor(e){this.port=null,this.id=Math.random().toString(32).slice(2),this.nextID=0,this.queries=Object.create(null),e&&this.connect(e)}execute(t){const r=`${this.id}@${this.nextID++}`;return this.queries[r]=t,t.timeout>0&&t.timeout<1/0&&(t.timerID=setTimeout(e.timeout,t.timeout,this,r)),t.signal&&t.signal.addEventListener("abort",(()=>this.abort(r)),{once:!0}),this.port&&e.postQuery(this.port,r,t),t.result}connect(t){if(this.port)throw new Error("Transport is already open");this.port=t,this.port.addEventListener("message",this),this.port.start();for(const[r,n]of Object.entries(this.queries))e.postQuery(t,r,n)}disconnect(){const e=new DisconnectError;for(const[t,r]of Object.entries(this.queries))r.fail(e),this.abort(t);this.port&&(this.port.removeEventListener("message",this),this.port.close())}static timeout(e,t){const{queries:r}=e,n=r[t];n&&(delete r[t],n.fail(new TimeoutError("request timed out")),e.port&&e.port.postMessage({type:"abort",id:t}))}abort(e){const{queries:t}=this,r=t[e];r&&(delete t[e],r.fail(new AbortError),this.port&&this.port.postMessage({type:"abort",id:e}),null!=r.timerID&&clearTimeout(r.timerID))}static postQuery(e,t,r){e.postMessage({type:"query",namespace:r.namespace,method:r.method,id:t,input:r.toJSON()},ensureUniqueBuffers(r.transfer()||[]))}handleEvent(e){const{id:t,result:r}=e.data,n=this.queries[t];n&&(delete this.queries[t],r.ok?n.succeed(r.value):n.fail(decodeError$2(r.error)),null!=n.timerID&&clearTimeout(n.timerID))}},query=class{constructor(e,t,r){this.result=new Promise(((n,o)=>{this.succeed=n,this.fail=o,this.signal=r.signal,this.input=r,this.namespace=e,this.method=t,this.timeout=null==r.timeout?1/0:r.timeout,this.timerID=null}))}toJSON(){return this.input}transfer(){return this.input.transfer}};const Query=query;var service$1=class{constructor(e,t,r){this.transport=r;const n=this;for(const o of t)n[o]=t=>this.transport.execute(new Query(e,o.toString(),t))}};const Service$1=service$1;var client=class{constructor(e,t,r){this.remote=new Service$1(e,t,r)}},cid$2={},src$8={exports:{}};function base$1(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var o=e.charAt(n),i=o.charCodeAt(0);if(255!==t[i])throw new TypeError(o+" is ambiguous");t[i]=n}var a=e.length,s=e.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var r=0;if(" "!==e[r]){for(var n=0,o=0;e[r]===s;)n++,r++;for(var i=(e.length-r)*u+1>>>0,c=new Uint8Array(i);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var f=0,h=i-1;(0!==l||f<o)&&-1!==h;h--,f++)l+=a*c[h]>>>0,c[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");o=f,r++}if(" "!==e[r]){for(var d=i-o;d!==i&&0===c[d];)d++;for(var p=new Uint8Array(n+(i-d)),y=n;d!==i;)p[y++]=c[d++];return p}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,o=0,i=t.length;o!==i&&0===t[o];)o++,r++;for(var u=(i-o)*c+1>>>0,l=new Uint8Array(u);o!==i;){for(var f=t[o],h=0,d=u-1;(0!==f||h<n)&&-1!==d;d--,h++)f+=256*l[d]>>>0,l[d]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");n=h,o++}for(var p=u-n;p!==u&&0===l[p];)p++;for(var y=s.repeat(r);p<u;++p)y+=e.charAt(l[p]);return y},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}var src$7=base$1;const textDecoder$1=new TextDecoder,decodeText$1=e=>textDecoder$1.decode(e),textEncoder$1=new TextEncoder,encodeText$2=e=>textEncoder$1.encode(e);function concat$7(e,t){const r=new Uint8Array(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return r}var util$f={decodeText:decodeText$1,encodeText:encodeText$2,concat:concat$7};const{encodeText:encodeText$1}=util$f;class Base$1{constructor(e,t,r,n){this.name=e,this.code=t,this.codeBuf=encodeText$1(this.code),this.alphabet=n,this.codec=r(n)}encode(e){return this.codec.encode(e)}decode(e){for(const t of e)if(this.alphabet&&this.alphabet.indexOf(t)<0)throw new Error(`invalid character '${t}' in '${e}'`);return this.codec.decode(e)}}var base=Base$1;const decode$5=(e,t,r)=>{const n={};for(let c=0;c<t.length;++c)n[t[c]]=c;let o=e.length;for(;"="===e[o-1];)--o;const i=new Uint8Array(o*r/8|0);let a=0,s=0,u=0;for(let c=0;c<o;++c){const t=n[e[c]];if(void 0===t)throw new SyntaxError("Invalid character "+e[c]);s=s<<r|t,a+=r,a>=8&&(a-=8,i[u++]=255&s>>a)}if(a>=r||255&s<<8-a)throw new SyntaxError("Unexpected end of data");return i},encode$7=(e,t,r)=>{const n="="===t[t.length-1],o=(1<<r)-1;let i="",a=0,s=0;for(let u=0;u<e.length;++u)for(s=s<<8|e[u],a+=8;a>r;)a-=r,i+=t[o&s>>a];if(a&&(i+=t[o&s<<r-a]),n)for(;i.length*r&7;)i+="=";return i},rfc4648$1=e=>t=>({encode:r=>encode$7(r,t,e),decode:r=>decode$5(r,t,e)});var rfc4648_1={rfc4648:rfc4648$1};const baseX=src$7,Base=base,{rfc4648:rfc4648}=rfc4648_1,{decodeText:decodeText,encodeText:encodeText}=util$f,identity$2=()=>({encode:decodeText,decode:encodeText}),constants$1=[["identity","\0",identity$2,""],["base2","0",rfc4648(1),"01"],["base8","7",rfc4648(3),"01234567"],["base10","9",baseX,"0123456789"],["base16","f",rfc4648(4),"0123456789abcdef"],["base16upper","F",rfc4648(4),"0123456789ABCDEF"],["base32hex","v",rfc4648(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",rfc4648(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",rfc4648(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",rfc4648(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",rfc4648(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",rfc4648(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",rfc4648(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",rfc4648(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",rfc4648(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",baseX,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",baseX,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",baseX,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",baseX,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",rfc4648(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],names$2=constants$1.reduce(((e,t)=>(e[t[0]]=new Base(t[0],t[1],t[2],t[3]),e)),{}),codes$1=constants$1.reduce(((e,t)=>(e[t[1]]=names$2[t[0]],e)),{});var constants_1={names:names$2,codes:codes$1};!function(e,t){const r=constants_1,{encodeText:n,decodeText:o,concat:i}=util$f;function a(e){if(Object.prototype.hasOwnProperty.call(r.names,e))return r.names[e];if(Object.prototype.hasOwnProperty.call(r.codes,e))return r.codes[e];throw new Error(`Unsupported encoding: ${e}`)}(t=e.exports=function(e,t){if(!t)throw new Error("requires an encoded Uint8Array");const{name:r,codeBuf:n}=a(e);return function(e,t){a(e).decode(o(t))}(r,t),i([n,t],n.length+t.length)}).encode=function(e,t){const r=a(e),o=n(r.encode(t));return i([r.codeBuf,o],r.codeBuf.length+o.length)},t.decode=function(e){e instanceof Uint8Array&&(e=o(e));const t=e[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(t)&&(e=e.toLowerCase()),a(e[0]).decode(e.substring(1))},t.isEncoded=function(e){if(e instanceof Uint8Array&&(e=o(e)),"[object String]"!==Object.prototype.toString.call(e))return!1;try{return a(e[0]).name}catch(t){return!1}},t.encoding=a,t.encodingFromData=function(e){return e instanceof Uint8Array&&(e=o(e)),a(e[0])};const s=Object.freeze(r.names),u=Object.freeze(r.codes);t.names=s,t.codes=u}(src$8,src$8.exports);var encode_1$1=encode$6,MSB$3=128,REST$3=127,MSBALL$1=~REST$3,INT$1=Math.pow(2,31);function encode$6(e,t,r){t=t||[];for(var n=r=r||0;e>=INT$1;)t[r++]=255&e|MSB$3,e/=128;for(;e&MSBALL$1;)t[r++]=255&e|MSB$3,e>>>=7;return t[r]=0|e,encode$6.bytes=r-n+1,t}var decode$4=read$1,MSB$2=128,REST$2=127;function read$1(e,t){var r,n=0,o=0,i=t=t||0,a=e.length;do{if(i>=a)throw read$1.bytes=0,new RangeError("Could not decode varint");r=e[i++],n+=o<28?(r&REST$2)<<o:(r&REST$2)*Math.pow(2,o),o+=7}while(r>=MSB$2);return read$1.bytes=i-t,n}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(e){return e<N1$1?1:e<N2$1?2:e<N3$1?3:e<N4$1?4:e<N5$1?5:e<N6$1?6:e<N7$1?7:e<N8$1?8:e<N9$1?9:10},varint$4={encode:encode_1$1,decode:decode$4,encodingLength:length$1};const names$1=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});var constants={names:names$1};function createCodec$3(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$3=createCodec$3("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),ascii$3=createCodec$3("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),BASES$3={utf8:string$3,"utf-8":string$3,hex:bases$3.base16,latin1:ascii$3,ascii:ascii$3,binary:ascii$3,...bases$3};function toString$6(e,t="utf8"){const r=BASES$3[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var toString$7=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toString:toString$6}),require$$3$1=getAugmentedNamespace(toString$7);function fromString$5(e,t="utf8"){const r=BASES$3[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}var fromString$6=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromString:fromString$5}),require$$4$2=getAugmentedNamespace(fromString$6);function concat$5(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return r}var concat$6=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",concat:concat$5}),require$$5$1=getAugmentedNamespace(concat$6);const multibase$1=src$8.exports,varint$3=varint$4,{names:names}=constants,{toString:uint8ArrayToString$3}=require$$3$1,{fromString:uint8ArrayFromString$4}=require$$4$2,{concat:uint8ArrayConcat$2}=require$$5$1,codes={};for(const e in names){const t=e;codes[names[t]]=t}function toHexString(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return uint8ArrayToString$3(e,"base16")}function fromHexString(e){return uint8ArrayFromString$4(e,"base16")}function toB58String(e){if(!(e instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return uint8ArrayToString$3(multibase$1.encode("base58btc",e)).slice(1)}function fromB58String(e){const t=e instanceof Uint8Array?uint8ArrayToString$3(e):e;return multibase$1.decode("z"+t)}function decode$3(e){if(!(e instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(e.length<2)throw new Error("multihash too short. must be > 2 bytes.");const t=varint$3.decode(e);if(!isValidCode(t))throw new Error(`multihash unknown function code: 0x${t.toString(16)}`);e=e.slice(varint$3.decode.bytes);const r=varint$3.decode(e);if(r<0)throw new Error(`multihash invalid length: ${r}`);if((e=e.slice(varint$3.decode.bytes)).length!==r)throw new Error(`multihash length inconsistent: 0x${uint8ArrayToString$3(e,"base16")}`);return{code:t,name:codes[t],length:r,digest:e}}function encode$5(e,t,r){if(!e||void 0===t)throw new Error("multihash encode requires at least two args: digest, code");const n=coerceCode(t);if(!(e instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(null==r&&(r=e.length),r&&e.length!==r)throw new Error("digest length should be equal to specified length.");const o=varint$3.encode(n),i=varint$3.encode(r);return uint8ArrayConcat$2([o,i,e],o.length+i.length+e.length)}function coerceCode(e){let t=e;if("string"==typeof e){if(void 0===names[e])throw new Error(`Unrecognized hash function named: ${e}`);t=names[e]}if("number"!=typeof t)throw new Error(`Hash function code should be a number. Got: ${t}`);if(void 0===codes[t]&&!isAppCode(t))throw new Error(`Unrecognized function code: ${t}`);return t}function isAppCode(e){return e>0&&e<16}function isValidCode(e){return!!isAppCode(e)||!!codes[e]}function validate(e){decode$3(e)}function prefix(e){return validate(e),e.subarray(0,2)}Object.freeze(codes);var src$6={names:names,codes:codes,toHexString:toHexString,fromHexString:fromHexString,toB58String:toB58String,fromB58String:fromB58String,decode:decode$3,encode:encode$5,coerceCode:coerceCode,isAppCode:isAppCode,validate:validate,prefix:prefix,isValidCode:isValidCode},encode_1=encode$4,MSB$1=128,REST$1=127,MSBALL=~REST$1,INT=Math.pow(2,31);function encode$4(e,t,r){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw encode$4.bytes=0,new RangeError("Could not encode varint");t=t||[];for(var n=r=r||0;e>=INT;)t[r++]=255&e|MSB$1,e/=128;for(;e&MSBALL;)t[r++]=255&e|MSB$1,e>>>=7;return t[r]=0|e,encode$4.bytes=r-n+1,t}var decode$2=read,MSB=128,REST=127;function read(e,t){var r,n=0,o=0,i=t=t||0,a=e.length;do{if(i>=a||o>49)throw read.bytes=0,new RangeError("Could not decode varint");r=e[i++],n+=o<28?(r&REST)<<o:(r&REST)*Math.pow(2,o),o+=7}while(r>=MSB);return read.bytes=i-t,n}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(e){return e<N1?1:e<N2?2:e<N3?3:e<N4?4:e<N5?5:e<N6?6:e<N7?7:e<N8?8:e<N9?9:10},varint$2={encode:encode_1,decode:decode$2,encodingLength:length};function concat$3(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return r}var concat$4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",concat:concat$3}),require$$1$2=getAugmentedNamespace(concat$4);function createCodec$2(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$2=createCodec$2("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),ascii$2=createCodec$2("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),BASES$2={utf8:string$2,"utf-8":string$2,hex:bases$3.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...bases$3};function toString$4(e,t="utf8"){const r=BASES$2[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var toString$5=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toString:toString$4}),require$$1$1=getAugmentedNamespace(toString$5);function fromString$3(e,t="utf8"){const r=BASES$2[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}var fromString$4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromString:fromString$3}),require$$2=getAugmentedNamespace(fromString$4);const varint$1=varint$2,{toString:uint8ArrayToString$2}=require$$1$1,{fromString:uint8ArrayFromString$3}=require$$2;var util$e={numberToUint8Array:numberToUint8Array,uint8ArrayToNumber:uint8ArrayToNumber,varintUint8ArrayEncode:varintUint8ArrayEncode,varintEncode:varintEncode$1};function uint8ArrayToNumber(e){return parseInt(uint8ArrayToString$2(e,"base16"),16)}function numberToUint8Array(e){let t=e.toString(16);return t.length%2==1&&(t="0"+t),uint8ArrayFromString$3(t,"base16")}function varintUint8ArrayEncode(e){return Uint8Array.from(varint$1.encode(uint8ArrayToNumber(e)))}function varintEncode$1(e){return Uint8Array.from(varint$1.encode(e))}const baseTable$1=Object.freeze({identity:0,cidv1:1,cidv2:2,cidv3:3,ip4:4,tcp:6,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,dccp:33,"murmur3-128":34,"murmur3-32":35,ip6:41,ip6zone:42,path:47,multicodec:48,multihash:49,multiaddr:50,multibase:51,dns:53,dns4:54,dns6:55,dnsaddr:56,protobuf:80,cbor:81,raw:85,"dbl-sha2-256":86,rlp:96,bencode:99,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:132,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,docid:206,"stellar-block":208,"stellar-tx":209,md4:212,md5:213,bmt:214,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:230,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"bls12_381-g1g2-pub":238,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:273,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:301,utp:302,unix:400,thread:406,p2p:421,ipfs:421,https:443,onion:444,onion3:445,garlic64:446,garlic32:447,tls:448,quic:460,ws:477,wss:478,"p2p-websocket-star":479,http:480,json:512,messagepack:513,"libp2p-peer-record":769,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,"p256-pub":4608,"p384-pub":4609,"p521-pub":4610,"ed448-pub":4611,"x448-pub":4612,"ed25519-priv":4864,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332,"skynet-ns":11639056});var generatedTable={baseTable:baseTable$1};const{baseTable:baseTable}=generatedTable,varintEncode=util$e.varintEncode,nameToVarint$1={},constantToCode$1={},codeToName$1={};for(const e in baseTable){const t=e,r=baseTable[t];nameToVarint$1[t]=varintEncode(r);const n=t.toUpperCase().replace(/-/g,"_");constantToCode$1[n]=r,codeToName$1[r]||(codeToName$1[r]=t)}Object.freeze(nameToVarint$1),Object.freeze(constantToCode$1),Object.freeze(codeToName$1);const nameToCode$1=Object.freeze(baseTable);var maps={nameToVarint:nameToVarint$1,constantToCode:constantToCode$1,nameToCode:nameToCode$1,codeToName:codeToName$1};const varint=varint$2,{concat:uint8ArrayConcat$1}=require$$1$2,util$d=util$e,{nameToVarint:nameToVarint,constantToCode:constantToCode,nameToCode:nameToCode,codeToName:codeToName}=maps;function addPrefix(e,t){let r;if(e instanceof Uint8Array)r=util$d.varintUint8ArrayEncode(e);else{if(!nameToVarint[e])throw new Error("multicodec not recognized");r=nameToVarint[e]}return uint8ArrayConcat$1([r,t],r.length+t.length)}function rmPrefix(e){return varint.decode(e),e.slice(varint.decode.bytes)}function getNameFromData(e){const t=varint.decode(e),r=codeToName[t];if(void 0===r)throw new Error(`Code "${t}" not found`);return r}function getNameFromCode(e){return codeToName[e]}function getCodeFromName(e){const t=nameToCode[e];if(void 0===t)throw new Error(`Codec "${e}" not found`);return t}function getCodeFromData(e){return varint.decode(e)}function getVarintFromName(e){const t=nameToVarint[e];if(void 0===t)throw new Error(`Codec "${e}" not found`);return t}function getVarintFromCode(e){return util$d.varintEncode(e)}function getCodec(e){return getNameFromData(e)}function getName(e){return getNameFromCode(e)}function getNumber(e){return getCodeFromName(e)}function getCode(e){return getCodeFromData(e)}function getCodeVarint(e){return getVarintFromName(e)}function getVarint(e){return Array.from(getVarintFromCode(e))}var src$5={addPrefix:addPrefix,rmPrefix:rmPrefix,getNameFromData:getNameFromData,getNameFromCode:getNameFromCode,getCodeFromName:getCodeFromName,getCodeFromData:getCodeFromData,getVarintFromName:getVarintFromName,getVarintFromCode:getVarintFromCode,getCodec:getCodec,getName:getName,getNumber:getNumber,getCode:getCode,getCodeVarint:getCodeVarint,getVarint:getVarint,...constantToCode,nameToVarint:nameToVarint,nameToCode:nameToCode,codeToName:codeToName};const mh$1=src$6,CIDUtil$1={checkCIDComponents:function(e){if(null==e)return"null values are not valid CIDs";if(0!==e.version&&1!==e.version)return"Invalid version, must be a number equal to 1 or 0";if("string"!=typeof e.codec)return"codec must be string";if(0===e.version){if("dag-pb"!==e.codec)return"codec must be 'dag-pb' for CIDv0";if("base58btc"!==e.multibaseName)return"multibaseName must be 'base58btc' for CIDv0"}if(!(e.multihash instanceof Uint8Array))return"multihash must be a Uint8Array";try{mh$1.validate(e.multihash)}catch(t){let e=t.message;return e||(e="Multihash validation failed"),e}}};var cidUtil=CIDUtil$1;function concat$1(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=new Uint8Array(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return r}var concat$2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",concat:concat$1}),require$$4$1=getAugmentedNamespace(concat$2);function createCodec$1(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string$1=createCodec$1("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),ascii$1=createCodec$1("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),BASES$1={utf8:string$1,"utf-8":string$1,hex:bases$3.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$3};function toString$2(e,t="utf8"){const r=BASES$1[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.encoder.encode(e).substring(1)}var toString$3=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",toString:toString$2}),require$$5=getAugmentedNamespace(toString$3);function equals$3(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var equals$4=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",equals:equals$3}),require$$6=getAugmentedNamespace(equals$4);const mh=src$6,multibase=src$8.exports,multicodec$1=src$5,CIDUtil=cidUtil,{concat:uint8ArrayConcat}=require$$4$1,{toString:uint8ArrayToString$1}=require$$5,{equals:uint8ArrayEquals$1}=require$$6,codecs=multicodec$1.nameToCode,codecInts=Object.keys(codecs).reduce(((e,t)=>(e[codecs[t]]=t,e)),{}),symbol=Symbol.for("@ipld/js-cid/CID");class CID$a{constructor(e,t,r,n){if(this.version,this.codec,this.multihash,Object.defineProperty(this,symbol,{value:!0}),CID$a.isCID(e)){const t=e;return this.version=t.version,this.codec=t.codec,this.multihash=t.multihash,void(this.multibaseName=t.multibaseName||(0===t.version?"base58btc":"base32"))}if("string"==typeof e){const t=multibase.isEncoded(e);if(t){const r=multibase.decode(e);this.version=parseInt(r[0].toString(),16),this.codec=multicodec$1.getCodec(r.slice(1)),this.multihash=multicodec$1.rmPrefix(r.slice(1)),this.multibaseName=t}else this.version=0,this.codec="dag-pb",this.multihash=mh.fromB58String(e),this.multibaseName="base58btc";return CID$a.validateCID(this),void Object.defineProperty(this,"string",{value:e})}if(e instanceof Uint8Array){const t=parseInt(e[0].toString(),16);if(1===t){const r=e;this.version=t,this.codec=multicodec$1.getCodec(r.slice(1)),this.multihash=multicodec$1.rmPrefix(r.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";CID$a.validateCID(this)}else this.version=e,"number"==typeof t&&(t=codecInts[t]),this.codec=t,this.multihash=r,this.multibaseName=n||(0===e?"base58btc":"base32"),CID$a.validateCID(this)}get bytes(){let e=this._bytes;if(!e){if(0===this.version)e=this.multihash;else{if(1!==this.version)throw new Error("unsupported version");{const t=multicodec$1.getCodeVarint(this.codec);e=uint8ArrayConcat([[1],t,this.multihash],1+t.byteLength+this.multihash.byteLength)}}Object.defineProperty(this,"_bytes",{value:e})}return e}get prefix(){const e=multicodec$1.getCodeVarint(this.codec),t=mh.prefix(this.multihash);return uint8ArrayConcat([[this.version],e,t],1+e.byteLength+t.byteLength)}get code(){return codecs[this.codec]}toV0(){if("dag-pb"!==this.codec)throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:t}=mh.decode(this.multihash);if("sha2-256"!==e)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(32!==t)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new CID$a(0,this.codec,this.multihash)}toV1(){return new CID$a(1,this.codec,this.multihash,this.multibaseName)}toBaseEncodedString(e=this.multibaseName){if(this.string&&0!==this.string.length&&e===this.multibaseName)return this.string;let t;if(0===this.version){if("base58btc"!==e)throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");t=mh.toB58String(this.multihash)}else{if(1!==this.version)throw new Error("unsupported version");t=uint8ArrayToString$1(multibase.encode(e,this.bytes))}return e===this.multibaseName&&Object.defineProperty(this,"string",{value:t}),t}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&uint8ArrayEquals$1(this.multihash,e.multihash)}static validateCID(e){const t=CIDUtil.checkCIDComponents(e);if(t)throw new Error(t)}static isCID(e){return e instanceof CID$a||Boolean(e&&e[symbol])}}CID$a.codecs=codecs;var src$4=CID$a;const CID$9=src$4,encodeCID$5=(e,t)=>(t&&t.push(e.multihash.buffer),e);cid$2.encodeCID=encodeCID$5;const decodeCID$7=e=>{const t=e;return Object.setPrototypeOf(t.multihash,Uint8Array.prototype),Object.setPrototypeOf(t,CID$9.prototype),Object.defineProperty(t,Symbol.for("@ipld/js-cid/CID"),{value:!0}),t};cid$2.decodeCID=decodeCID$7,cid$2.CID=CID$9;var block$1={};const name="ipld-block",version$1="0.11.1",description="JavaScript Implementation of IPLD Block",leadMaintainer="Volker Mische <volker.mische@gmail.com>",main="src/index.js",types="dist/src/index.d.ts",scripts={lint:"aegir lint",check:"tsc --noEmit --noErrorTruncation",test:"aegir test","test:node":"aegir test --target node","test:browser":"aegir test --target browser",release:"aegir release --docs","release-minor":"aegir release --type minor --docs","release-major":"aegir release --type major --docs",coverage:"aegir coverage","coverage-publish":"aegir coverage --provider coveralls",docs:"aegir docs",prepare:"aegir build --no-bundle",prepublishOnly:"aegir build"},repository={type:"git",url:"git+https://github.com/ipld/js-ipld-block.git"},keywords=["IPLD"],license="MIT",bugs={url:"https://github.com/ipld/js-ipld-block/issues"},homepage="https://github.com/ipld/js-ipld-block#readme",devDependencies={aegir:"^31.0.4",uint8arrays:"^2.1.3"},dependencies={cids:"^1.0.0"},engines={node:">=6.0.0",npm:">=3.0.0"},contributors=["David Dias <daviddias.p@gmail.com>","Volker Mische <volker.mische@gmail.com>","Friedel Ziegelmayer <dignifiedquire@gmail.com>","Irakli Gozalishvili <contact@gozala.io>","achingbrain <alex@achingbrain.net>","  <victorbjelkholm@gmail.com>","Alan Shaw <alan.shaw@protocol.ai>","Charlie <the_charlie_daly@hotmail.co.uk>","Diogo Silva <fsdiogo@gmail.com>","Hugo Dias <hugomrdias@gmail.com>","Mikeal Rogers <mikeal.rogers@gmail.com>","Richard Littauer <richard.littauer@gmail.com>","Richard Schneider <makaretu@gmail.com>","Xmader <xmader@outlook.com>"];var require$$1={name:name,version:version$1,description:description,leadMaintainer:leadMaintainer,main:main,types:types,scripts:scripts,"pre-push":["lint","test"],repository:repository,keywords:keywords,license:license,bugs:bugs,homepage:homepage,devDependencies:devDependencies,dependencies:dependencies,engines:engines,contributors:contributors};const CID$8=src$4,{version:version}=require$$1,blockSymbol=Symbol.for("@ipld/js-ipld-block/block"),readonly={writable:!1,configurable:!1,enumerable:!0};class Block$1{constructor(e,t){if(!(e&&e instanceof Uint8Array))throw new Error("first argument  must be a Uint8Array");if(!t||!CID$8.isCID(t))throw new Error("second argument must be a CID");this.data=e,this.cid=t,Object.defineProperties(this,{data:readonly,cid:readonly})}get _data(){return deprecateData(),this.data}get _cid(){return deprecateCID(),this.cid}get[Symbol.toStringTag](){return"Block"}get[blockSymbol](){return!0}static isBlock(e){return Boolean(e&&e[blockSymbol])}}const deprecate=(e,t)=>{let r=!1;return()=>{if(!e.test(version))throw new Error(t);r||(r=!0,console.warn(t))}},deprecateCID=deprecate(/^0\.10|^0\.11/,"block._cid is deprecated and will be removed in 0.12 release. Please use block.cid instead"),deprecateData=deprecate(/^0\.10|^0.11/,"block._data is deprecated and will be removed in 0.12 release. Please use block.data instead");var src$3=Block$1;const{encodeCID:encodeCID$4,decodeCID:decodeCID$6}=cid$2,Block=src$3,encodeBlock$1=({cid:e,data:t},r)=>(r&&r.push(t.buffer),{cid:encodeCID$4(e,r),data:t});block$1.encodeBlock=encodeBlock$1;const decodeBlock$1=({cid:e,data:t})=>new Block(t,decodeCID$6(e));block$1.decodeBlock=decodeBlock$1,block$1.Block=Block;const Client$4=client,{encodeCID:encodeCID$3,decodeCID:decodeCID$5}=cid$2,{decodeError:decodeError$1}=error$1,{encodeBlock:encodeBlock,decodeBlock:decodeBlock}=block$1;class BlockClient$1 extends Client$4{constructor(e){super("block",["put","get","rm","stat"],e)}async get(e,t={}){const{transfer:r}=t,{block:n}=await this.remote.get({...t,cid:encodeCID$3(e,r)});return decodeBlock(n)}async put(e,t={}){const{transfer:r}=t;delete t.progress;const n=await this.remote.put({...t,cid:null==t.cid?void 0:encodeCID$3(t.cid,r),block:e instanceof Uint8Array?e:encodeBlock(e,r)});return decodeBlock(n.block)}async*rm(e,t={}){const{transfer:r}=t,n=await this.remote.rm({...t,cids:Array.isArray(e)?e.map((e=>encodeCID$3(e,r))):[encodeCID$3(e,r)]});yield*n.map(decodeRmEntry)}async stat(e,t={}){const{transfer:r}=t,n=await this.remote.stat({...t,cid:encodeCID$3(e,r)});return{...n,cid:decodeCID$5(n.cid)}}}const decodeRmEntry=e=>{const t=decodeCID$5(e.cid);return e.error?{cid:t,error:decodeError$1(e.error)}:{cid:t}};var block=BlockClient$1,dag$2={};const{encodeCID:encodeCID$2,decodeCID:decodeCID$4,CID:CID$7}=cid$2,decodeNode$1=({dagNode:e,cids:t})=>{for(const r of t)decodeCID$4(r);return e};dag$2.decodeNode=decodeNode$1;const encodeNode$1=(e,t)=>{const r=[];return collectNode(e,r,t),{dagNode:e,cids:r}};dag$2.encodeNode=encodeNode$1;const collectNode=(e,t,r)=>{if(null!=e&&"object"==typeof e)if(CID$7.isCID(e))t.push(e),encodeCID$2(e,r);else if(e instanceof ArrayBuffer)r&&r.push(e);else if(ArrayBuffer.isView(e))r&&r.push(e.buffer);else if(Array.isArray(e))for(const n of e)collectNode(n,t,r);else for(const n of Object.values(e))collectNode(n,t,r)},Client$3=client,{encodeCID:encodeCID$1,decodeCID:decodeCID$3}=cid$2,{encodeNode:encodeNode,decodeNode:decodeNode}=dag$2;class DAGClient$1 extends Client$3{constructor(e){super("dag",["put","get","resolve","tree"],e)}async put(e,t={}){const{cid:r}=t,n=await this.remote.put({...t,cid:null!=r?encodeCID$1(r):void 0,dagNode:encodeNode(e,t.transfer)});return decodeCID$3(n)}async get(e,t={}){const{value:r,remainderPath:n}=await this.remote.get({...t,cid:encodeCID$1(e,t.transfer)});return{value:decodeNode(r),remainderPath:n}}async resolve(e,t={}){const{cid:r,remainderPath:n}=await this.remote.resolve({...t,cid:encodeCIDOrPath(e,t.transfer)});return{cid:decodeCID$3(r),remainderPath:n}}async*tree(e,t={}){const r=await this.remote.tree({...t,cid:encodeCID$1(e,t.transfer)});yield*r}}const encodeCIDOrPath=(e,t)=>"string"==typeof e?e:encodeCID$1(e,t);var dag$1=DAGClient$1,core$1={};const{encodeError:encodeError,decodeError:decodeError}=error$1,decodeIterable$1=async function*({port:e},t){let r=e=>{};const n=()=>(e.postMessage({method:"next"}),new Promise((e=>r=e)));e.onmessage=e=>r(e.data);let o=!1;try{for(;!o;){const{done:e,value:r,error:i}=await n();if(o=e,null!=i)throw decodeError(i);null!=r&&(yield t(r))}}finally{o||e.postMessage({method:"return"}),e.close()}};core$1.decodeIterable=decodeIterable$1;const encodeIterable$1=(e,t,r)=>{const{port1:n,port2:o}=new MessageChannel,i=[],a=toIterator(e);return n.onmessage=async({data:{method:e}})=>{switch(e){case"next":try{const{done:e,value:r}=await a.next();e?(n.postMessage({type:"next",done:!0}),n.close()):(i.length=0,n.postMessage({type:"next",done:!1,value:t(r,i)},i))}catch(r){n.postMessage({type:"throw",error:encodeError(r)}),n.close()}break;case"return":n.close(),a.return&&a.return()}},n.start(),r.push(o),{type:"RemoteIterable",port:o}};core$1.encodeIterable=encodeIterable$1;const toIterator=e=>{if(null!=e){if("function"==typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"==typeof e[Symbol.iterator])return e[Symbol.iterator]()}throw TypeError("Value must be async or sync iterable")},encodeCallback$1=(e,t)=>{const{port1:r,port2:n}=new MessageChannel;return r.onmessage=({data:t})=>e.apply(null,t),t.push(n),{type:"RemoteCallback",port:n}};core$1.encodeCallback=encodeCallback$1;const decodeCallback=({port:e})=>(t,r=[])=>{e.postMessage(t,[...new Set(r)])};async function*browserReadableStreamToIt(e,t={}){const r=e.getReader();try{for(;;){const e=await r.read();if(e.done)return;yield e.value}}finally{!0!==t.preventCancel&&r.cancel(),r.releaseLock()}}core$1.decodeCallback=decodeCallback;var browserReadablestreamToIt=browserReadableStreamToIt;const Client$2=client,{encodeCID:encodeCID,decodeCID:decodeCID$2,CID:CID$6}=cid$2,{decodeIterable:decodeIterable,encodeIterable:encodeIterable,encodeCallback:encodeCallback}=core$1,iterateReadableStream=browserReadablestreamToIt;class CoreClient$1 extends Client$2{constructor(e){super("core",["add","addAll","cat","ls"],e)}async*addAll(e,t={}){const{timeout:r,signal:n}=t,o=[...t.transfer||[]],i=t.progress?encodeCallback(t.progress,o):void 0,a=await this.remote.addAll({...t,input:encodeAddAllInput(e,o),progress:i,transfer:o,timeout:r,signal:n});yield*decodeIterable(a.data,decodeAddedData)}async add(e,t={}){const{timeout:r,signal:n}=t,o=[...t.transfer||[]],i=t.progress?encodeCallback(t.progress,o):void 0,a=await this.remote.add({...t,input:encodeAddInput(e,o),progress:i,transfer:o,timeout:r,signal:n});return decodeAddedData(a.data)}async*cat(e,t={}){const r=CID$6.isCID(e)?encodeCID(e):e,n=await this.remote.cat({...t,path:r});yield*decodeIterable(n.data,identity$1)}async*ls(e,t={}){const r=CID$6.isCID(e)?encodeCID(e):e,n=await this.remote.ls({...t,path:r});yield*decodeIterable(n.data,decodeLsEntry)}}const decodeAddedData=({path:e,cid:t,mode:r,mtime:n,size:o})=>({path:e,cid:decodeCID$2(t),mode:r,mtime:n,size:o}),decodeLsEntry=({depth:e,name:t,path:r,size:n,cid:o,type:i,mode:a,mtime:s})=>({cid:decodeCID$2(o),type:i,name:t,path:r,mode:a,mtime:s,size:n,depth:e}),identity$1=e=>e,encodeAddInput=(e,t)=>{if(e instanceof Blob)return e;if("string"==typeof e)return e;if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e;{const r=asIterable(e);if(r)return encodeIterable(r,encodeIterableContent,t);const n=asAsyncIterable(e);if(n)return encodeIterable(n,encodeAsyncIterableContent,t);const o=asReadableStream(e);if(o)return encodeIterable(iterateReadableStream(o),encodeAsyncIterableContent,t);const i=asFileObject(e);if(i)return encodeFileObject(i,t);throw TypeError("Unexpected input: "+typeof e)}},encodeAddAllInput=(e,t)=>{const r=asIterable(e);if(r)return encodeIterable(r,encodeIterableContent,t);const n=asAsyncIterable(e);if(n)return encodeIterable(n,encodeAsyncIterableContent,t);const o=asReadableStream(e);if(o)return encodeIterable(iterateReadableStream(o),encodeAsyncIterableContent,t);throw TypeError("Unexpected input: "+typeof e)},encodeAsyncIterableContent=(e,t)=>{if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e;if(e instanceof Blob)return{path:"",content:e};if("string"==typeof e)return{path:"",content:e};{const r=asFileObject(e);if(r)return encodeFileObject(r,t);throw TypeError("Unexpected input: "+typeof e)}},encodeIterableContent=(e,t)=>{if("number"==typeof e)throw TypeError("Iterable of numbers is not supported");if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e;if(e instanceof Blob)return{path:"",content:e};if("string"==typeof e)return{path:"",content:e};{const r=asFileObject(e);if(r)return encodeFileObject(r,t);throw TypeError("Unexpected input: "+typeof e)}},encodeFileObject=({path:e,mode:t,mtime:r,content:n},o)=>({path:e,mode:t,mtime:r,content:n?encodeFileContent(n,o):void 0}),encodeFileContent=(e,t)=>{if(null==e)return"";if(e instanceof ArrayBuffer||ArrayBuffer.isView(e))return e;if(e instanceof Blob)return e;if("string"==typeof e)return e;{const r=asIterable(e);if(r)return encodeIterable(r,encodeIterableContent,t);const n=asAsyncIterable(e);if(n)return encodeIterable(n,encodeAsyncIterableContent,t);const o=asReadableStream(e);if(o)return encodeIterable(iterateReadableStream(o),encodeAsyncIterableContent,t);throw TypeError("Unexpected input: "+typeof e)}},asIterable=e=>{const t=e;return t&&"function"==typeof t[Symbol.iterator]?t:null},asAsyncIterable=e=>{const t=e;return t&&"function"==typeof t[Symbol.asyncIterator]?t:null},asReadableStream=e=>e&&"function"==typeof e.getReader?e:null,asFileObject=e=>"object"==typeof e&&(e.path||e.content)?e:null;var core=CoreClient$1;const Client$1=client,{decodeCID:decodeCID$1,CID:CID$5}=cid$2;class FilesClient$1 extends Client$1{constructor(e){super("files",["stat"],e)}async stat(e,t={}){const{size:r,hash:n,withLocal:o,timeout:i,signal:a}=t,{stat:s}=await this.remote.stat({path:encodeLocation$1(e),size:r,hash:n,withLocal:o,timeout:i,signal:a});return decodeStat(s)}}var files=FilesClient$1;const encodeLocation$1=e=>CID$5.isCID(e)?`/ipfs/${e.toString()}`:e,decodeStat=e=>({...e,cid:decodeCID$1(e.cid)}),Client=client,{decodeCID:decodeCID,CID:CID$4}=cid$2;class PinClient$1 extends Client{constructor(e){super("pin",["add"],e)}async add(e,t={}){const{recursive:r,timeout:n,signal:o}=t,{cid:i}=await this.remote.add({path:encodeLocation(e),recursive:r,timeout:n,signal:o});return decodeCID(i)}}var pin=PinClient$1;const encodeLocation=e=>CID$4.isCID(e)?`/ipfs/${e.toString()}`:`${e}`,MessageTransport=transport,BlockClient=block,DAGClient=dag$1,CoreClient=core,FilesClient=files,PinClient=pin;class IPFSClient extends CoreClient{constructor(e){super(e),this.transport=e,this.block=new BlockClient(this.transport),this.dag=new DAGClient(this.transport),this.files=new FilesClient(this.transport),this.pin=new PinClient(this.transport)}static attach(e,t){e.transport.connect(t)}static detached(){return new IPFSClient(new MessageTransport(void 0))}static from(e){return new IPFSClient(new MessageTransport(e))}}var src$2=IPFSClient;let ipfs$1=null;const set=e=>{ipfs$1=e},get$2=async()=>{if(!ipfs$1){const e=await iframe();ipfs$1=src$2.from(e)}return ipfs$1};function iframe(){return new Promise(((e,t)=>{const r=document.createElement("iframe");r.id="webnative-ipfs",r.style.width="0",r.style.height="0",r.style.border="none",r.style.display="none",document.body.appendChild(r),r.onload=()=>{const n=new MessageChannel;n.port1.onmessage=({ports:t})=>e(t[0]),r.contentWindow?r.contentWindow.postMessage("connect","*",[n.port2]):t(new Error("Don't have access to iframe.contentWindow"))},r.src=`${setup$1.endpoints.lobby}/ipfs.html`}))}var resolver$1={},indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(e,t){for(var r=new Array(arguments.length-1),n=0,o=2,i=!0;o<arguments.length;)r[n++]=arguments[o++];return new Promise((function(o,a){r[n]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(s){i&&(i=!1,a(s))}}))}var base64$1={};!function(e){var t=base64$1;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;t.encode=function(e,t,n){for(var o,i=null,a=[],s=0,u=0;t<n;){var c=e[t++];switch(u){case 0:a[s++]=r[c>>2],o=(3&c)<<4,u=1;break;case 1:a[s++]=r[o|c>>4],o=(15&c)<<2,u=2;break;case 2:a[s++]=r[o|c>>6],a[s++]=r[63&c],u=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=r[o],a[s++]=61,1===u&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var i="invalid encoding";t.decode=function(e,t,r){for(var o,a=r,s=0,u=0;u<e.length;){var c=e.charCodeAt(u++);if(61===c&&s>1)break;if(void 0===(c=n[c]))throw Error(i);switch(s){case 0:o=c,s=1;break;case 1:t[r++]=o<<2|(48&c)>>4,o=c,s=2;break;case 2:t[r++]=(15&o)<<4|(60&c)>>2,o=c,s=3;break;case 3:t[r++]=(3&o)<<6|c,s=0}}if(1===s)throw Error(i);return r-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}();var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},EventEmitter.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},EventEmitter.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this};var float=factory(factory);function factory(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function s(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?a:s,e.readFloatBE=n?s:a}():function(){function t(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function r(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,a=8388607&n;return 255===i?a?NaN:o*(1/0):0===i?1401298464324817e-60*o*a:o*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,writeUintLE),e.writeFloatBE=t.bind(null,writeUintBE),e.readFloatLE=r.bind(null,readUintLE),e.readFloatBE=r.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function s(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?a:s,e.readDoubleBE=n?s:a}():function(){function t(e,t,r,n,o,i){var a=n<0?1:0;if(a&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((a<<31|2146435072)>>>0,o,i+r);else{var s;if(n<22250738585072014e-324)e((s=n/5e-324)>>>0,o,i+t),e((a<<31|s/4294967296)>>>0,o,i+r);else{var u=Math.floor(Math.log(n)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(s=n*Math.pow(2,-u))>>>0,o,i+t),e((a<<31|u+1023<<20|1048576*s&1048575)>>>0,o,i+r)}}}function r(e,t,r,n,o){var i=e(n,o+t),a=e(n,o+r),s=2*(a>>31)+1,u=a>>>20&2047,c=4294967296*(1048575&a)+i;return 2047===u?c?NaN:s*(1/0):0===u?5e-324*s*c:s*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=t.bind(null,writeUintLE,0,4),e.writeDoubleBE=t.bind(null,writeUintBE,4,0),e.readDoubleLE=r.bind(null,readUintLE,0,4),e.readDoubleBE=r.bind(null,readUintBE,4,0)}(),e}function writeUintLE(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function writeUintBE(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function readUintLE(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function readUintBE(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}var utf8$2={},utf82;utf82=utf8$2,utf82.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},utf82.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],a=0;t<r;)(n=e[t++])<128?i[a++]=n:n>191&&n<224?i[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(n>>10),i[a++]=56320+(1023&n)):i[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,i.slice(0,a))),o.join("")):String.fromCharCode.apply(String,i.slice(0,a))},utf82.write=function(e,t,r){for(var n,o,i=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(a+1)))?(n=65536+((1023&n)<<10)+(1023&o),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i};var pool_1=pool;function pool(e,t,r){var n=r||8192,o=n>>>1,i=null,a=n;return function(r){if(r<1||r>o)return e(r);a+r>n&&(i=e(n),a=0);var s=t.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),s}}var longbits=LongBits$2,util$c=minimal$1;function LongBits$2(e,t){this.lo=e>>>0,this.hi=t>>>0}var zero=LongBits$2.zero=new LongBits$2(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits$2.zeroHash="\0\0\0\0\0\0\0\0";LongBits$2.fromNumber=function(e){if(0===e)return zero;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/4294967296>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>4294967295&&(r=0,++n>4294967295&&(n=0))),new LongBits$2(r,n)},LongBits$2.from=function(e){if("number"==typeof e)return LongBits$2.fromNumber(e);if(util$c.isString(e)){if(!util$c.Long)return LongBits$2.fromNumber(parseInt(e,10));e=util$c.Long.fromString(e)}return e.low||e.high?new LongBits$2(e.low>>>0,e.high>>>0):zero},LongBits$2.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},LongBits$2.prototype.toLong=function(e){return util$c.Long?new util$c.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var charCodeAt=String.prototype.charCodeAt;LongBits$2.fromHash=function(e){return e===zeroHash?zero:new LongBits$2((charCodeAt.call(e,0)|charCodeAt.call(e,1)<<8|charCodeAt.call(e,2)<<16|charCodeAt.call(e,3)<<24)>>>0,(charCodeAt.call(e,4)|charCodeAt.call(e,5)<<8|charCodeAt.call(e,6)<<16|charCodeAt.call(e,7)<<24)>>>0)},LongBits$2.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits$2.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},LongBits$2.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},LongBits$2.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10},function(e){var t=minimal$1;function r(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function n(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=aspromise,t.base64=base64$1,t.EventEmitter=eventemitter,t.float=float,t.inquire=inquire_1,t.utf8=utf8$2,t.pool=pool_1,t.LongBits=longbits,t.isNode=Boolean(void 0!==commonjsGlobal$1&&commonjsGlobal$1&&commonjsGlobal$1.process&&commonjsGlobal$1.process.versions&&commonjsGlobal$1.process.versions.node),t.global=t.isNode&&commonjsGlobal$1||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal$1,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==typeof e},t.isset=t.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(r){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,r){var n=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},t.merge=r,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=n,t.ProtocolError=n("ProtocolError"),t.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},t.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}();var writer=Writer$1,util$b=minimal$1,BufferWriter$1,LongBits$1=util$b.LongBits,base64=util$b.base64,utf8$1=util$b.utf8;function Op(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function noop(){}function State(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$2=function(){return util$b.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};function writeByte(e,t,r){t[r]=255&e}function writeVarint32(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function VarintOp(e,t){this.len=e,this.next=void 0,this.val=t}function writeVarint64(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function writeFixed32(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Writer$1.create=create$2(),Writer$1.alloc=function(e){return new util$b.Array(e)},util$b.Array!==Array&&(Writer$1.alloc=util$b.pool(Writer$1.alloc,util$b.Array.prototype.subarray)),Writer$1.prototype._push=function(e,t,r){return this.tail=this.tail.next=new Op(e,t,r),this.len+=t,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer$1.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},Writer$1.prototype.int32=function(e){return e<0?this._push(writeVarint64,10,LongBits$1.fromNumber(e)):this.uint32(e)},Writer$1.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},Writer$1.prototype.uint64=function(e){var t=LongBits$1.from(e);return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.int64=Writer$1.prototype.uint64,Writer$1.prototype.sint64=function(e){var t=LongBits$1.from(e).zzEncode();return this._push(writeVarint64,t.length(),t)},Writer$1.prototype.bool=function(e){return this._push(writeByte,1,e?1:0)},Writer$1.prototype.fixed32=function(e){return this._push(writeFixed32,4,e>>>0)},Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32,Writer$1.prototype.fixed64=function(e){var t=LongBits$1.from(e);return this._push(writeFixed32,4,t.lo)._push(writeFixed32,4,t.hi)},Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64,Writer$1.prototype.float=function(e){return this._push(util$b.float.writeFloatLE,4,e)},Writer$1.prototype.double=function(e){return this._push(util$b.float.writeDoubleLE,8,e)};var writeBytes=util$b.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};Writer$1.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(writeByte,1,0);if(util$b.isString(e)){var r=Writer$1.alloc(t=base64.length(e));base64.decode(e,r,0),e=r}return this.uint32(t)._push(writeBytes,t,e)},Writer$1.prototype.string=function(e){var t=utf8$1.length(e);return t?this.uint32(t)._push(utf8$1.write,t,e):this._push(writeByte,1,0)},Writer$1.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer$1.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer$1.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},Writer$1.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},Writer$1._configure=function(e){BufferWriter$1=e,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$a=minimal$1;function BufferWriter(){Writer.call(this)}function writeStringBuffer(e,t,r){e.length<40?util$a.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}BufferWriter._configure=function(){BufferWriter.alloc=util$a._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$a.Buffer&&util$a.Buffer.prototype instanceof Uint8Array&&"set"===util$a.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},BufferWriter.prototype.bytes=function(e){util$a.isString(e)&&(e=util$a._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(BufferWriter.writeBytesBuffer,t,e),this},BufferWriter.prototype.string=function(e){var t=util$a.Buffer.byteLength(e);return this.uint32(t),t&&this._push(writeStringBuffer,t,e),this},BufferWriter._configure();var reader=Reader$1,util$9=minimal$1,BufferReader$1,LongBits=util$9.LongBits,utf8=util$9.utf8;function indexOutOfRange(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Reader$1(e){this.buf=e,this.pos=0,this.len=e.length}var create_array="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$1=function(){return util$9.Buffer?function(e){return(Reader$1.create=function(e){return util$9.Buffer.isBuffer(e)?new BufferReader$1(e):create_array(e)})(e)}:create_array},value;function readLongVarint(){var e=new LongBits(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw indexOutOfRange(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function readFixed32_end(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.create=create$1(),Reader$1.prototype._slice=util$9.Array.prototype.subarray||util$9.Array.prototype.slice,Reader$1.prototype.uint32=(value=4294967295,function(){if(value=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return value;if(value=(value|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return value;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return value}),Reader$1.prototype.int32=function(){return 0|this.uint32()},Reader$1.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Reader$1.prototype.bool=function(){return 0!==this.uint32()},Reader$1.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader$1.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$9.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Reader$1.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$9.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Reader$1.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},Reader$1.prototype.string=function(){var e=this.bytes();return utf8.read(e,0,e.length)},Reader$1.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader$1.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Reader$1._configure=function(e){BufferReader$1=e,Reader$1.create=create$1(),BufferReader$1._configure();var t=util$9.Long?"toLong":"toNumber";util$9.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[t](!1)},uint64:function(){return readLongVarint.call(this)[t](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[t](!1)},fixed64:function(){return readFixed64.call(this)[t](!0)},sfixed64:function(){return readFixed64.call(this)[t](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$8=minimal$1;function BufferReader(e){Reader.call(this,e)}BufferReader._configure=function(){util$8.Buffer&&(BufferReader.prototype._slice=util$8.Buffer.prototype.slice)},BufferReader.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},BufferReader._configure();var rpc={},service=Service,util$7=minimal$1;function Service(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");util$7.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(Service.prototype=Object.create(util$7.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function e(t,r,n,o,i){if(!o)throw TypeError("request must be specified");var a=this;if(!i)return util$7.asPromise(e,a,t,r,n,o);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,r){if(e)return a.emit("error",e,t),i(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(o){return a.emit("error",o,t),i(o)}return a.emit("data",r,t),i(null,r)}a.end(!0)}))}catch(s){return a.emit("error",s,t),void setTimeout((function(){i(s)}),0)}else setTimeout((function(){i(Error("already ended"))}),0)},Service.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},rpc.Service=service;var roots={};!function(e){var t=indexMinimal;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=writer,t.BufferWriter=writer_buffer,t.Reader=reader,t.BufferReader=reader_buffer,t.util=minimal$1,t.rpc=rpc,t.roots=roots,t.configure=r,r()}();var minimal=indexMinimal,$protobuf=minimal,$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={});$root.PBLink=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Hash=$util.newBuffer([]),e.prototype.Name="",e.prototype.Tsize=$util.Long?$util.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=$Writer.create()),null!=e.Hash&&Object.hasOwnProperty.call(e,"Hash")&&t.uint32(10).bytes(e.Hash),null!=e.Name&&Object.hasOwnProperty.call(e,"Name")&&t.uint32(18).string(e.Name),null!=e.Tsize&&Object.hasOwnProperty.call(e,"Tsize")&&t.uint32(24).uint64(e.Tsize),t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.PBLink;e.pos<r;){var o=e.uint32();switch(o>>>3){case 1:n.Hash=e.bytes();break;case 2:n.Name=e.string();break;case 3:n.Tsize=e.uint64();break;default:e.skipType(7&o)}}return n},e.fromObject=function(e){if(e instanceof $root.PBLink)return e;var t=new $root.PBLink;return null!=e.Hash&&("string"==typeof e.Hash?$util.base64.decode(e.Hash,t.Hash=$util.newBuffer($util.base64.length(e.Hash)),0):e.Hash.length&&(t.Hash=e.Hash)),null!=e.Name&&(t.Name=String(e.Name)),null!=e.Tsize&&($util.Long?(t.Tsize=$util.Long.fromValue(e.Tsize)).unsigned=!0:"string"==typeof e.Tsize?t.Tsize=parseInt(e.Tsize,10):"number"==typeof e.Tsize?t.Tsize=e.Tsize:"object"==typeof e.Tsize&&(t.Tsize=new $util.LongBits(e.Tsize.low>>>0,e.Tsize.high>>>0).toNumber(!0))),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults)if(t.bytes===String?r.Hash="":(r.Hash=[],t.bytes!==Array&&(r.Hash=$util.newBuffer(r.Hash))),r.Name="",$util.Long){var n=new $util.Long(0,0,!0);r.Tsize=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.Tsize=t.longs===String?"0":0;return null!=e.Hash&&e.hasOwnProperty("Hash")&&(r.Hash=t.bytes===String?$util.base64.encode(e.Hash,0,e.Hash.length):t.bytes===Array?Array.prototype.slice.call(e.Hash):e.Hash),null!=e.Name&&e.hasOwnProperty("Name")&&(r.Name=e.Name),null!=e.Tsize&&e.hasOwnProperty("Tsize")&&("number"==typeof e.Tsize?r.Tsize=t.longs===String?String(e.Tsize):e.Tsize:r.Tsize=t.longs===String?$util.Long.prototype.toString.call(e.Tsize):t.longs===Number?new $util.LongBits(e.Tsize.low>>>0,e.Tsize.high>>>0).toNumber(!0):e.Tsize),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}(),$root.PBNode=function(){function e(e){if(this.Links=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Links=$util.emptyArray,e.prototype.Data=$util.newBuffer([]),e.encode=function(e,t){if(t||(t=$Writer.create()),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(10).bytes(e.Data),null!=e.Links&&e.Links.length)for(var r=0;r<e.Links.length;++r)$root.PBLink.encode(e.Links[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof $Reader||(e=$Reader.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new $root.PBNode;e.pos<r;){var o=e.uint32();switch(o>>>3){case 2:n.Links&&n.Links.length||(n.Links=[]),n.Links.push($root.PBLink.decode(e,e.uint32()));break;case 1:n.Data=e.bytes();break;default:e.skipType(7&o)}}return n},e.fromObject=function(e){if(e instanceof $root.PBNode)return e;var t=new $root.PBNode;if(e.Links){if(!Array.isArray(e.Links))throw TypeError(".PBNode.Links: array expected");t.Links=[];for(var r=0;r<e.Links.length;++r){if("object"!=typeof e.Links[r])throw TypeError(".PBNode.Links: object expected");t.Links[r]=$root.PBLink.fromObject(e.Links[r])}}return null!=e.Data&&("string"==typeof e.Data?$util.base64.decode(e.Data,t.Data=$util.newBuffer($util.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.Links=[]),t.defaults&&(t.bytes===String?r.Data="":(r.Data=[],t.bytes!==Array&&(r.Data=$util.newBuffer(r.Data)))),null!=e.Data&&e.hasOwnProperty("Data")&&(r.Data=t.bytes===String?$util.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),e.Links&&e.Links.length){r.Links=[];for(var n=0;n<e.Links.length;++n)r.Links[n]=$root.PBLink.toObject(e.Links[n],t)}return r},e.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},e}();var dag=$root;const CID$3=src$4,uint8ArrayFromString$2=fromString_1;class DAGLink$5{constructor(e,t,r){if(!r)throw new Error("A link requires a cid to point to");this.Name=e||"",this.Tsize=t,this.Hash=new CID$3(r),Object.defineProperties(this,{_nameBuf:{value:null,writable:!0,enumerable:!1}})}toString(){return`DAGLink <${this.Hash.toBaseEncodedString()} - name: "${this.Name}", size: ${this.Tsize}>`}toJSON(){return this._json||(this._json=Object.freeze({name:this.Name,size:this.Tsize,cid:this.Hash.toBaseEncodedString()})),Object.assign({},this._json)}get nameAsBuffer(){return null!=this._nameBuf||(this._nameBuf=uint8ArrayFromString$2(this.Name)),this._nameBuf}}var dagLink=DAGLink$5,stable={exports:{}};stable.exports=function(){var e=function(e,r){return t(e.slice(),r)};function t(e,t){"function"!=typeof t&&(t=function(e,t){return String(e).localeCompare(t)});var n=e.length;if(n<=1)return e;for(var o=new Array(n),i=1;i<n;i*=2){r(e,t,i,o);var a=e;e=o,o=a}return e}e.inplace=function(e,n){var o=t(e,n);return o!==e&&r(o,null,e.length,e),e};var r=function(e,t,r,n){var o,i,a,s,u,c=e.length,l=0,f=2*r;for(o=0;o<c;o+=f)for(a=(i=o+r)+r,i>c&&(i=c),a>c&&(a=c),s=o,u=i;;)if(s<i&&u<a)t(e[s],e[u])<=0?n[l++]=e[s++]:n[l++]=e[u++];else if(s<i)n[l++]=e[s++];else{if(!(u<a))break;n[l++]=e[u++]}};return e}();const sort=stable.exports,uint8ArrayCompare=compare_1,linkSort=(e,t)=>{const r=e.nameAsBuffer,n=t.nameAsBuffer;return uint8ArrayCompare(r,n)},sortLinks$2=e=>{sort.inplace(e,linkSort)};var sortLinks_1=sortLinks$2;const DAGLink$4=dagLink;function createDagLinkFromB58EncodedHash$2(e){return new DAGLink$4(e.Name||e.name||"",e.Tsize||e.Size||e.size||0,e.Hash||e.hash||e.multihash||e.cid)}var util$6={createDagLinkFromB58EncodedHash:createDagLinkFromB58EncodedHash$2};const protobuf=minimal,{PBLink:PBLink}=dag,{createDagLinkFromB58EncodedHash:createDagLinkFromB58EncodedHash$1}=util$6,toProtoBuf=e=>{const t={};return e.Data&&e.Data.byteLength>0?t.Data=e.Data:t.Data=null,e.Links&&e.Links.length>0?t.Links=e.Links.map((e=>({Hash:e.Hash.bytes,Name:e.Name,Tsize:e.Tsize}))):t.Links=null,t},serializeDAGNode$2=e=>encode$3(toProtoBuf(e)),serializeDAGNodeLike$1=(e,t=[])=>{const r={Data:e,Links:t.map((e=>createDagLinkFromB58EncodedHash$1(e)))};return encode$3(toProtoBuf(r))};var serialize$1={serializeDAGNode:serializeDAGNode$2,serializeDAGNodeLike:serializeDAGNodeLike$1};function encode$3(e){const t=protobuf.Writer.create();if(null!=e.Links)for(let r=0;r<e.Links.length;r++)PBLink.encode(e.Links[r],t.uint32(18).fork()).ldelim();return null!=e.Data&&t.uint32(10).bytes(e.Data),t.finish()}function assign(e,t){for(const r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function createError(e,t,r){if(!e||"string"==typeof e)throw new TypeError("Please pass an Error to err-code");r||(r={}),"object"==typeof t&&(r=t,t=""),t&&(r.code=t);try{return assign(e,r)}catch(n){r.message=e.message,r.stack=e.stack;const t=function(){};t.prototype=Object.create(Object.getPrototypeOf(e));return assign(new t,r)}}var errCode=createError,sha3$1={exports:{}},module;
/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
module=sha3$1,function(){var e="input is invalid type",t="object"==typeof window,r=t?window:{};r.JS_SHA3_NO_WINDOW&&(t=!1);var n=!t&&"object"==typeof self;!r.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?r=commonjsGlobal$1:n&&(r=self);var o=!r.JS_SHA3_NO_COMMON_JS&&module.exports,i=!r.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),s=[4,1024,262144,67108864],u=[0,8,16,24],c=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],l=[224,256,384,512],f=[128,256],h=["hex","buffer","arrayBuffer","array","digest"],d={128:168,256:136};!r.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!i||!r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var p=function(e,t,r){return function(n){return new x(e,t,e).update(n)[r]()}},y=function(e,t,r){return function(n,o){return new x(e,t,o).update(n)[r]()}},m=function(e,t,r){return function(t,n,o,i){return w["cshake"+e].update(t,n,o,i)[r]()}},_=function(e,t,r){return function(t,n,o,i){return w["kmac"+e].update(t,n,o,i)[r]()}},g=function(e,t,r,n){for(var o=0;o<h.length;++o){var i=h[o];e[i]=t(r,n,i)}return e},b=function(e,t){var r=p(e,t,"hex");return r.create=function(){return new x(e,t,e)},r.update=function(e){return r.create().update(e)},g(r,p,e,t)},v=[{name:"keccak",padding:[1,256,65536,16777216],bits:l,createMethod:b},{name:"sha3",padding:[6,1536,393216,100663296],bits:l,createMethod:b},{name:"shake",padding:[31,7936,2031616,520093696],bits:f,createMethod:function(e,t){var r=y(e,t,"hex");return r.create=function(r){return new x(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},g(r,y,e,t)}},{name:"cshake",padding:s,bits:f,createMethod:function(e,t){var r=d[e],n=m(e,0,"hex");return n.create=function(n,o,i){return o||i?new x(e,t,n).bytepad([o,i],r):w["shake"+e].create(n)},n.update=function(e,t,r,o){return n.create(t,r,o).update(e)},g(n,m,e,t)}},{name:"kmac",padding:s,bits:f,createMethod:function(e,t){var r=d[e],n=_(e,0,"hex");return n.create=function(n,o,i){return new I(e,t,o).bytepad(["KMAC",i],r).bytepad([n],r)},n.update=function(e,t,r,o){return n.create(e,r,o).update(t)},g(n,_,e,t)}}],w={},$=[],k=0;k<v.length;++k)for(var A=v[k],E=A.bits,S=0;S<E.length;++S){var T=A.name+"_"+E[S];if($.push(T),w[T]=A.createMethod(E[S],A.padding),"sha3"!==A.name){var B=A.name+E[S];$.push(B),w[B]=w[T]}}function x(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function I(e,t,r){x.call(this,e,t,r)}x.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(i&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||i&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}for(var o,a,s=this.blocks,c=this.byteCount,l=t.length,f=this.blockCount,h=0,d=this.s;h<l;){if(this.reset)for(this.reset=!1,s[0]=this.block,o=1;o<f+1;++o)s[o]=0;if(r)for(o=this.start;h<l&&o<c;++h)s[o>>2]|=t[h]<<u[3&o++];else for(o=this.start;h<l&&o<c;++h)(a=t.charCodeAt(h))<128?s[o>>2]|=a<<u[3&o++]:a<2048?(s[o>>2]|=(192|a>>6)<<u[3&o++],s[o>>2]|=(128|63&a)<<u[3&o++]):a<55296||a>=57344?(s[o>>2]|=(224|a>>12)<<u[3&o++],s[o>>2]|=(128|a>>6&63)<<u[3&o++],s[o>>2]|=(128|63&a)<<u[3&o++]):(a=65536+((1023&a)<<10|1023&t.charCodeAt(++h)),s[o>>2]|=(240|a>>18)<<u[3&o++],s[o>>2]|=(128|a>>12&63)<<u[3&o++],s[o>>2]|=(128|a>>6&63)<<u[3&o++],s[o>>2]|=(128|63&a)<<u[3&o++]);if(this.lastByteIndex=o,o>=c){for(this.start=o-c,this.block=s[f],o=0;o<f;++o)d[o]^=s[o];C(d),this.reset=!0}else this.start=o}return this},x.prototype.encode=function(e,t){var r=255&e,n=1,o=[r];for(r=255&(e>>=8);r>0;)o.unshift(r),r=255&(e>>=8),++n;return t?o.push(n):o.unshift(n),this.update(o),o.length},x.prototype.encodeString=function(t){var r,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(e);if(null===t)throw new Error(e);if(i&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||i&&ArrayBuffer.isView(t)))throw new Error(e);r=!0}var o=0,a=t.length;if(r)o=a;else for(var s=0;s<t.length;++s){var u=t.charCodeAt(s);u<128?o+=1:u<2048?o+=2:u<55296||u>=57344?o+=3:(u=65536+((1023&u)<<10|1023&t.charCodeAt(++s)),o+=4)}return o+=this.encode(8*o),this.update(t),o},x.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var o=t-r%t,i=[];return i.length=o,this.update(i),this},x.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];C(n)}},x.prototype.toString=x.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,o=this.extraBytes,i=0,s=0,u="";s<n;){for(i=0;i<t&&s<n;++i,++s)e=r[i],u+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t==0&&(C(r),i=0)}return o&&(e=r[i],u+=a[e>>4&15]+a[15&e],o>1&&(u+=a[e>>12&15]+a[e>>8&15]),o>2&&(u+=a[e>>20&15]+a[e>>16&15])),u},x.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,o=this.extraBytes,i=0,a=0,s=this.outputBits>>3;e=o?new ArrayBuffer(n+1<<2):new ArrayBuffer(s);for(var u=new Uint32Array(e);a<n;){for(i=0;i<t&&a<n;++i,++a)u[a]=r[i];a%t==0&&C(r)}return o&&(u[i]=r[i],e=e.slice(0,s)),e},x.prototype.buffer=x.prototype.arrayBuffer,x.prototype.digest=x.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,o=this.outputBlocks,i=this.extraBytes,a=0,s=0,u=[];s<o;){for(a=0;a<r&&s<o;++a,++s)e=s<<2,t=n[a],u[e]=255&t,u[e+1]=t>>8&255,u[e+2]=t>>16&255,u[e+3]=t>>24&255;s%r==0&&C(n)}return i&&(e=s<<2,t=n[a],u[e]=255&t,i>1&&(u[e+1]=t>>8&255),i>2&&(u[e+2]=t>>16&255)),u},I.prototype=new x,I.prototype.finalize=function(){return this.encode(this.outputBits,!0),x.prototype.finalize.call(this)};var C=function(e){var t,r,n,o,i,a,s,u,l,f,h,d,p,y,m,_,g,b,v,w,$,k,A,E,S,T,B,x,I,C,D,R,N,j,L,P,O,U,M,F,z,K,G,H,W,q,V,Y,X,J,Z,Q,ee,te,re,ne,oe,ie,ae,se,ue,ce,le;for(n=0;n<48;n+=2)o=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],a=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],u=e[4]^e[14]^e[24]^e[34]^e[44],l=e[5]^e[15]^e[25]^e[35]^e[45],f=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],t=(d=e[8]^e[18]^e[28]^e[38]^e[48])^(a<<1|s>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(s<<1|a>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=o^(u<<1|l>>>31),r=i^(l<<1|u>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=a^(f<<1|h>>>31),r=s^(h<<1|f>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=u^(d<<1|p>>>31),r=l^(p<<1|d>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=f^(o<<1|i>>>31),r=h^(i<<1|o>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,y=e[0],m=e[1],q=e[11]<<4|e[10]>>>28,V=e[10]<<4|e[11]>>>28,x=e[20]<<3|e[21]>>>29,I=e[21]<<3|e[20]>>>29,se=e[31]<<9|e[30]>>>23,ue=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,G=e[41]<<18|e[40]>>>14,j=e[2]<<1|e[3]>>>31,L=e[3]<<1|e[2]>>>31,_=e[13]<<12|e[12]>>>20,g=e[12]<<12|e[13]>>>20,Y=e[22]<<10|e[23]>>>22,X=e[23]<<10|e[22]>>>22,C=e[33]<<13|e[32]>>>19,D=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,P=e[14]<<6|e[15]>>>26,O=e[15]<<6|e[14]>>>26,b=e[25]<<11|e[24]>>>21,v=e[24]<<11|e[25]>>>21,J=e[34]<<15|e[35]>>>17,Z=e[35]<<15|e[34]>>>17,R=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,E=e[6]<<28|e[7]>>>4,S=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,oe=e[16]<<23|e[17]>>>9,U=e[26]<<25|e[27]>>>7,M=e[27]<<25|e[26]>>>7,w=e[36]<<21|e[37]>>>11,$=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,H=e[8]<<27|e[9]>>>5,W=e[9]<<27|e[8]>>>5,T=e[18]<<20|e[19]>>>12,B=e[19]<<20|e[18]>>>12,ie=e[29]<<7|e[28]>>>25,ae=e[28]<<7|e[29]>>>25,F=e[38]<<8|e[39]>>>24,z=e[39]<<8|e[38]>>>24,k=e[48]<<14|e[49]>>>18,A=e[49]<<14|e[48]>>>18,e[0]=y^~_&b,e[1]=m^~g&v,e[10]=E^~T&x,e[11]=S^~B&I,e[20]=j^~P&U,e[21]=L^~O&M,e[30]=H^~q&Y,e[31]=W^~V&X,e[40]=te^~ne&ie,e[41]=re^~oe&ae,e[2]=_^~b&w,e[3]=g^~v&$,e[12]=T^~x&C,e[13]=B^~I&D,e[22]=P^~U&F,e[23]=O^~M&z,e[32]=q^~Y&J,e[33]=V^~X&Z,e[42]=ne^~ie&se,e[43]=oe^~ae&ue,e[4]=b^~w&k,e[5]=v^~$&A,e[14]=x^~C&R,e[15]=I^~D&N,e[24]=U^~F&K,e[25]=M^~z&G,e[34]=Y^~J&Q,e[35]=X^~Z&ee,e[44]=ie^~se&ce,e[45]=ae^~ue&le,e[6]=w^~k&y,e[7]=$^~A&m,e[16]=C^~R&E,e[17]=D^~N&S,e[26]=F^~K&j,e[27]=z^~G&L,e[36]=J^~Q&H,e[37]=Z^~ee&W,e[46]=se^~ce&te,e[47]=ue^~le&re,e[8]=k^~y&_,e[9]=A^~m&g,e[18]=R^~E&T,e[19]=N^~S&B,e[28]=K^~j&P,e[29]=G^~L&O,e[38]=Q^~H&q,e[39]=ee^~W&V,e[48]=ce^~te&ne,e[49]=le^~re&oe,e[0]^=c[n],e[1]^=c[n+1]};if(o)module.exports=w;else for(k=0;k<$.length;++k)r[$[k]]=w[$[k]]}();var murmurHash3js={exports:{}};!function(e,t){!function(r,n){var o={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function i(e){if(!Array.isArray(e)&&!ArrayBuffer.isView(e))return!1;for(var t=0;t<e.length;t++)if(!Number.isInteger(e[t])||e[t]<0||e[t]>255)return!1;return!0}function a(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function s(e,t){return e<<t|e>>>32-t}function u(e){return e=a(e^=e>>>16,2246822507),e=a(e^=e>>>13,3266489909),e^=e>>>16}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]+t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]+t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]+t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]+t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var r=[0,0,0,0];return r[3]+=e[3]*t[3],r[2]+=r[3]>>>16,r[3]&=65535,r[2]+=e[2]*t[3],r[1]+=r[2]>>>16,r[2]&=65535,r[2]+=e[3]*t[2],r[1]+=r[2]>>>16,r[2]&=65535,r[1]+=e[1]*t[3],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[2]*t[2],r[0]+=r[1]>>>16,r[1]&=65535,r[1]+=e[3]*t[1],r[0]+=r[1]>>>16,r[1]&=65535,r[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],r[0]&=65535,[r[0]<<16|r[1],r[2]<<16|r[3]]}function f(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function h(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function d(e,t){return[e[0]^t[0],e[1]^t[1]]}function p(e){return e=d(e,[0,e[0]>>>1]),e=d(e=l(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=d(e=l(e,[3301882366,444984403]),[0,e[0]>>>1])}o.x86.hash32=function(e,t){if(o.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%4,c=e.length-r,l=t,f=0,h=3432918353,d=461845907,p=0;p<c;p+=4)f=a(f=e[p]|e[p+1]<<8|e[p+2]<<16|e[p+3]<<24,h),f=a(f=s(f,15),d),l=a(l=s(l^=f,13),5)+3864292196;switch(f=0,r){case 3:f^=e[p+2]<<16;case 2:f^=e[p+1]<<8;case 1:f=a(f^=e[p],h),l^=f=a(f=s(f,15),d)}return(l=u(l^=e.length))>>>0},o.x86.hash128=function(e,t){if(o.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%16,c=e.length-r,l=t,f=t,h=t,d=t,p=0,y=0,m=0,_=0,g=597399067,b=2869860233,v=951274213,w=2716044179,$=0;$<c;$+=16)p=e[$]|e[$+1]<<8|e[$+2]<<16|e[$+3]<<24,y=e[$+4]|e[$+5]<<8|e[$+6]<<16|e[$+7]<<24,m=e[$+8]|e[$+9]<<8|e[$+10]<<16|e[$+11]<<24,_=e[$+12]|e[$+13]<<8|e[$+14]<<16|e[$+15]<<24,p=s(p=a(p,g),15),l=s(l^=p=a(p,b),19),l=a(l+=f,5)+1444728091,y=s(y=a(y,b),16),f=s(f^=y=a(y,v),17),f=a(f+=h,5)+197830471,m=s(m=a(m,v),17),h=s(h^=m=a(m,w),15),h=a(h+=d,5)+2530024501,_=s(_=a(_,w),18),d=s(d^=_=a(_,g),13),d=a(d+=l,5)+850148119;switch(p=0,y=0,m=0,_=0,r){case 15:_^=e[$+14]<<16;case 14:_^=e[$+13]<<8;case 13:_=a(_^=e[$+12],w),d^=_=a(_=s(_,18),g);case 12:m^=e[$+11]<<24;case 11:m^=e[$+10]<<16;case 10:m^=e[$+9]<<8;case 9:m=a(m^=e[$+8],v),h^=m=a(m=s(m,17),w);case 8:y^=e[$+7]<<24;case 7:y^=e[$+6]<<16;case 6:y^=e[$+5]<<8;case 5:y=a(y^=e[$+4],b),f^=y=a(y=s(y,16),v);case 4:p^=e[$+3]<<24;case 3:p^=e[$+2]<<16;case 2:p^=e[$+1]<<8;case 1:p=a(p^=e[$],g),l^=p=a(p=s(p,15),b)}return l^=e.length,l+=f^=e.length,l+=h^=e.length,f+=l+=d^=e.length,h+=l,d+=l,l=u(l),l+=f=u(f),l+=h=u(h),f+=l+=d=u(d),h+=l,d+=l,("00000000"+(l>>>0).toString(16)).slice(-8)+("00000000"+(f>>>0).toString(16)).slice(-8)+("00000000"+(h>>>0).toString(16)).slice(-8)+("00000000"+(d>>>0).toString(16)).slice(-8)},o.x64.hash128=function(e,t){if(o.inputValidation&&!i(e))return n;t=t||0;for(var r=e.length%16,a=e.length-r,s=[0,t],u=[0,t],y=[0,0],m=[0,0],_=[2277735313,289559509],g=[1291169091,658871167],b=0;b<a;b+=16)y=[e[b+4]|e[b+5]<<8|e[b+6]<<16|e[b+7]<<24,e[b]|e[b+1]<<8|e[b+2]<<16|e[b+3]<<24],m=[e[b+12]|e[b+13]<<8|e[b+14]<<16|e[b+15]<<24,e[b+8]|e[b+9]<<8|e[b+10]<<16|e[b+11]<<24],y=f(y=l(y,_),31),s=c(s=f(s=d(s,y=l(y,g)),27),u),s=c(l(s,[0,5]),[0,1390208809]),m=f(m=l(m,g),33),u=c(u=f(u=d(u,m=l(m,_)),31),s),u=c(l(u,[0,5]),[0,944331445]);switch(y=[0,0],m=[0,0],r){case 15:m=d(m,h([0,e[b+14]],48));case 14:m=d(m,h([0,e[b+13]],40));case 13:m=d(m,h([0,e[b+12]],32));case 12:m=d(m,h([0,e[b+11]],24));case 11:m=d(m,h([0,e[b+10]],16));case 10:m=d(m,h([0,e[b+9]],8));case 9:m=l(m=d(m,[0,e[b+8]]),g),u=d(u,m=l(m=f(m,33),_));case 8:y=d(y,h([0,e[b+7]],56));case 7:y=d(y,h([0,e[b+6]],48));case 6:y=d(y,h([0,e[b+5]],40));case 5:y=d(y,h([0,e[b+4]],32));case 4:y=d(y,h([0,e[b+3]],24));case 3:y=d(y,h([0,e[b+2]],16));case 2:y=d(y,h([0,e[b+1]],8));case 1:y=l(y=d(y,[0,e[b]]),_),s=d(s,y=l(y=f(y,31),g))}return s=c(s=d(s,[0,e.length]),u=d(u,[0,e.length])),u=c(u,s),s=c(s=p(s),u=p(u)),u=c(u,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(u[0]>>>0).toString(16)).slice(-8)+("00000000"+(u[1]>>>0).toString(16)).slice(-8)},e.exports&&(t=e.exports=o),t.murmurHash3=o}()}(murmurHash3js,murmurHash3js.exports);var murmurhash3jsRevisited=murmurHash3js.exports;const multihash$2=src$6,crypto$3=self.crypto||self.msCrypto,digest=async(e,t)=>{if("undefined"==typeof self||!crypto$3)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");switch(t){case"sha1":return new Uint8Array(await crypto$3.subtle.digest({name:"SHA-1"},e));case"sha2-256":return new Uint8Array(await crypto$3.subtle.digest({name:"SHA-256"},e));case"sha2-512":return new Uint8Array(await crypto$3.subtle.digest({name:"SHA-512"},e));case"dbl-sha2-256":{const t=await crypto$3.subtle.digest({name:"SHA-256"},e);return new Uint8Array(await crypto$3.subtle.digest({name:"SHA-256"},t))}default:throw new Error(`${t} is not a supported algorithm`)}};var sha_browser={factory:e=>async t=>digest(t,e),digest:digest,multihashing:async(e,t,r)=>{const n=await digest(e,t);return multihash$2.encode(n,t,r)}};const fromNumberTo32BitBuf$1=e=>{const t=new Uint8Array(4);for(let r=0;r<4;r++)t[r]=255&e,e>>=8;return t};var utils$3={fromNumberTo32BitBuf:fromNumberTo32BitBuf$1};function createCodec(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const string=createCodec("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),ascii=createCodec("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{e=e.substring(1);const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),BASES={utf8:string,"utf-8":string,hex:bases$3.base16,latin1:ascii,ascii:ascii,binary:ascii,...bases$3};function fromString$1(e,t="utf8"){const r=BASES[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return r.decoder.decode(`${r.prefix}${e}`)}var fromString$2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fromString:fromString$1}),require$$4=getAugmentedNamespace(fromString$2);const ERROR_MSG_INPUT="Input must be an string, Buffer or Uint8Array";function normalizeInput(e){let t;if(e instanceof Uint8Array)t=e;else if(e instanceof Buffer)t=new Uint8Array(e);else{if("string"!=typeof e)throw new Error(ERROR_MSG_INPUT);t=new Uint8Array(Buffer.from(e,"utf8"))}return t}function toHex$1(e){return Array.prototype.map.call(e,(function(e){return(e<16?"0":"")+e.toString(16)})).join("")}function uint32ToHex(e){return(4294967296+e).toString(16).substring(1)}function debugPrint(e,t,r){let n="\n"+e+" = ";for(let o=0;o<t.length;o+=2){if(32===r)n+=uint32ToHex(t[o]).toUpperCase(),n+=" ",n+=uint32ToHex(t[o+1]).toUpperCase();else{if(64!==r)throw new Error("Invalid size "+r);n+=uint32ToHex(t[o+1]).toUpperCase(),n+=uint32ToHex(t[o]).toUpperCase()}o%6==4?n+="\n"+new Array(e.length+4).join(" "):o<t.length-2&&(n+=" ")}console.log(n)}function testSpeed(e,t,r){let n=(new Date).getTime();const o=new Uint8Array(t);for(let a=0;a<t;a++)o[a]=a%256;const i=(new Date).getTime();console.log("Generated random input in "+(i-n)+"ms"),n=i;for(let a=0;a<r;a++){const r=e(o),i=(new Date).getTime(),a=i-n;n=i,console.log("Hashed in "+a+"ms: "+r.substring(0,20)+"..."),console.log(Math.round(t/(1<<20)/(a/1e3)*100)/100+" MB PER SECOND")}}var util$5={normalizeInput:normalizeInput,toHex:toHex$1,debugPrint:debugPrint,testSpeed:testSpeed};const util$4=util$5;function ADD64AA(e,t,r){const n=e[t]+e[r];let o=e[t+1]+e[r+1];n>=4294967296&&o++,e[t]=n,e[t+1]=o}function ADD64AC(e,t,r,n){let o=e[t]+r;r<0&&(o+=4294967296);let i=e[t+1]+n;o>=4294967296&&i++,e[t]=o,e[t+1]=i}function B2B_GET32(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function B2B_G(e,t,r,n,o,i){const a=m$1[o],s=m$1[o+1],u=m$1[i],c=m$1[i+1];ADD64AA(v$1,e,t),ADD64AC(v$1,e,a,s);let l=v$1[n]^v$1[e],f=v$1[n+1]^v$1[e+1];v$1[n]=f,v$1[n+1]=l,ADD64AA(v$1,r,n),l=v$1[t]^v$1[r],f=v$1[t+1]^v$1[r+1],v$1[t]=l>>>24^f<<8,v$1[t+1]=f>>>24^l<<8,ADD64AA(v$1,e,t),ADD64AC(v$1,e,u,c),l=v$1[n]^v$1[e],f=v$1[n+1]^v$1[e+1],v$1[n]=l>>>16^f<<16,v$1[n+1]=f>>>16^l<<16,ADD64AA(v$1,r,n),l=v$1[t]^v$1[r],f=v$1[t+1]^v$1[r+1],v$1[t]=f>>>31^l<<1,v$1[t+1]=l>>>31^f<<1}const BLAKE2B_IV32=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),SIGMA8=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],SIGMA82=new Uint8Array(SIGMA8.map((function(e){return 2*e}))),v$1=new Uint32Array(32),m$1=new Uint32Array(32);function blake2bCompress(e,t){let r=0;for(r=0;r<16;r++)v$1[r]=e.h[r],v$1[r+16]=BLAKE2B_IV32[r];for(v$1[24]=v$1[24]^e.t,v$1[25]=v$1[25]^e.t/4294967296,t&&(v$1[28]=~v$1[28],v$1[29]=~v$1[29]),r=0;r<32;r++)m$1[r]=B2B_GET32(e.b,4*r);for(r=0;r<12;r++)B2B_G(0,8,16,24,SIGMA82[16*r+0],SIGMA82[16*r+1]),B2B_G(2,10,18,26,SIGMA82[16*r+2],SIGMA82[16*r+3]),B2B_G(4,12,20,28,SIGMA82[16*r+4],SIGMA82[16*r+5]),B2B_G(6,14,22,30,SIGMA82[16*r+6],SIGMA82[16*r+7]),B2B_G(0,10,20,30,SIGMA82[16*r+8],SIGMA82[16*r+9]),B2B_G(2,12,22,24,SIGMA82[16*r+10],SIGMA82[16*r+11]),B2B_G(4,14,16,26,SIGMA82[16*r+12],SIGMA82[16*r+13]),B2B_G(6,8,18,28,SIGMA82[16*r+14],SIGMA82[16*r+15]);for(r=0;r<16;r++)e.h[r]=e.h[r]^v$1[r]^v$1[r+16]}function blake2bInit(e,t){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");const r={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e};for(let o=0;o<16;o++)r.h[o]=BLAKE2B_IV32[o];const n=t?t.length:0;return r.h[0]^=16842752^n<<8^e,t&&(blake2bUpdate(r,t),r.c=128),r}function blake2bUpdate(e,t){for(let r=0;r<t.length;r++)128===e.c&&(e.t+=e.c,blake2bCompress(e,!1),e.c=0),e.b[e.c++]=t[r]}function blake2bFinal(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;blake2bCompress(e,!0);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r);return t}function blake2b$1(e,t,r){r=r||64,e=util$4.normalizeInput(e);const n=blake2bInit(r,t);return blake2bUpdate(n,e),blake2bFinal(n)}function blake2bHex(e,t,r){const n=blake2b$1(e,t,r);return util$4.toHex(n)}var blake2b_1={blake2b:blake2b$1,blake2bHex:blake2bHex,blake2bInit:blake2bInit,blake2bUpdate:blake2bUpdate,blake2bFinal:blake2bFinal};const util$3=util$5;function B2S_GET32(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function B2S_G(e,t,r,n,o,i){v[e]=v[e]+v[t]+o,v[n]=ROTR32(v[n]^v[e],16),v[r]=v[r]+v[n],v[t]=ROTR32(v[t]^v[r],12),v[e]=v[e]+v[t]+i,v[n]=ROTR32(v[n]^v[e],8),v[r]=v[r]+v[n],v[t]=ROTR32(v[t]^v[r],7)}function ROTR32(e,t){return e>>>t^e<<32-t}const BLAKE2S_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SIGMA=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),v=new Uint32Array(16),m=new Uint32Array(16);function blake2sCompress(e,t){let r=0;for(r=0;r<8;r++)v[r]=e.h[r],v[r+8]=BLAKE2S_IV[r];for(v[12]^=e.t,v[13]^=e.t/4294967296,t&&(v[14]=~v[14]),r=0;r<16;r++)m[r]=B2S_GET32(e.b,4*r);for(r=0;r<10;r++)B2S_G(0,4,8,12,m[SIGMA[16*r+0]],m[SIGMA[16*r+1]]),B2S_G(1,5,9,13,m[SIGMA[16*r+2]],m[SIGMA[16*r+3]]),B2S_G(2,6,10,14,m[SIGMA[16*r+4]],m[SIGMA[16*r+5]]),B2S_G(3,7,11,15,m[SIGMA[16*r+6]],m[SIGMA[16*r+7]]),B2S_G(0,5,10,15,m[SIGMA[16*r+8]],m[SIGMA[16*r+9]]),B2S_G(1,6,11,12,m[SIGMA[16*r+10]],m[SIGMA[16*r+11]]),B2S_G(2,7,8,13,m[SIGMA[16*r+12]],m[SIGMA[16*r+13]]),B2S_G(3,4,9,14,m[SIGMA[16*r+14]],m[SIGMA[16*r+15]]);for(r=0;r<8;r++)e.h[r]^=v[r]^v[r+8]}function blake2sInit(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=t?t.length:0;if(t&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(BLAKE2S_IV),b:new Uint8Array(64),c:0,t:0,outlen:e};return n.h[0]^=16842752^r<<8^e,r>0&&(blake2sUpdate(n,t),n.c=64),n}function blake2sUpdate(e,t){for(let r=0;r<t.length;r++)64===e.c&&(e.t+=e.c,blake2sCompress(e,!1),e.c=0),e.b[e.c++]=t[r]}function blake2sFinal(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;blake2sCompress(e,!0);const t=new Uint8Array(e.outlen);for(let r=0;r<e.outlen;r++)t[r]=e.h[r>>2]>>8*(3&r)&255;return t}function blake2s$1(e,t,r){r=r||32,e=util$3.normalizeInput(e);const n=blake2sInit(r,t);return blake2sUpdate(n,e),blake2sFinal(n)}function blake2sHex(e,t,r){const n=blake2s$1(e,t,r);return util$3.toHex(n)}var blake2s_1={blake2s:blake2s$1,blake2sHex:blake2sHex,blake2sInit:blake2sInit,blake2sUpdate:blake2sUpdate,blake2sFinal:blake2sFinal};const b2b=blake2b_1,b2s=blake2s_1;var blakejs={blake2b:b2b.blake2b,blake2bHex:b2b.blake2bHex,blake2bInit:b2b.blake2bInit,blake2bUpdate:b2b.blake2bUpdate,blake2bFinal:b2b.blake2bFinal,blake2s:b2s.blake2s,blake2sHex:b2s.blake2sHex,blake2sInit:b2s.blake2sInit,blake2sUpdate:b2s.blake2sUpdate,blake2sFinal:b2s.blake2sFinal};const blake=blakejs,minB=45569,minS=45633,blake2b={init:blake.blake2bInit,update:blake.blake2bUpdate,digest:blake.blake2bFinal},blake2s={init:blake.blake2sInit,update:blake.blake2sUpdate,digest:blake.blake2sFinal},makeB2Hash=(e,t)=>async r=>{const n=t.init(e,null);return t.update(n,r),t.digest(n)};var blake_1=e=>{for(let t=0;t<64;t++)e[minB+t]=makeB2Hash(t+1,blake2b);for(let t=0;t<32;t++)e[minS+t]=makeB2Hash(t+1,blake2s)};const sha3=sha3$1.exports,mur=murmurhash3jsRevisited,{factory:sha}=sha_browser,{fromNumberTo32BitBuf:fromNumberTo32BitBuf}=utils$3,{fromString:uint8ArrayFromString$1}=require$$4,hash=e=>async t=>{switch(e){case"sha3-224":return new Uint8Array(sha3.sha3_224.arrayBuffer(t));case"sha3-256":return new Uint8Array(sha3.sha3_256.arrayBuffer(t));case"sha3-384":return new Uint8Array(sha3.sha3_384.arrayBuffer(t));case"sha3-512":return new Uint8Array(sha3.sha3_512.arrayBuffer(t));case"shake-128":return new Uint8Array(sha3.shake128.create(128).update(t).arrayBuffer());case"shake-256":return new Uint8Array(sha3.shake256.create(256).update(t).arrayBuffer());case"keccak-224":return new Uint8Array(sha3.keccak224.arrayBuffer(t));case"keccak-256":return new Uint8Array(sha3.keccak256.arrayBuffer(t));case"keccak-384":return new Uint8Array(sha3.keccak384.arrayBuffer(t));case"keccak-512":return new Uint8Array(sha3.keccak512.arrayBuffer(t));case"murmur3-128":return uint8ArrayFromString$1(mur.x64.hash128(t),"base16");case"murmur3-32":return fromNumberTo32BitBuf(mur.x86.hash32(t));default:throw new TypeError(`${e} is not a supported algorithm`)}},identity=e=>e;var crypto$2={identity:identity,sha1:sha("sha1"),sha2256:sha("sha2-256"),sha2512:sha("sha2-512"),dblSha2256:sha("dbl-sha2-256"),sha3224:hash("sha3-224"),sha3256:hash("sha3-256"),sha3384:hash("sha3-384"),sha3512:hash("sha3-512"),shake128:hash("shake-128"),shake256:hash("shake-256"),keccak224:hash("keccak-224"),keccak256:hash("keccak-256"),keccak384:hash("keccak-384"),keccak512:hash("keccak-512"),murmur3128:hash("murmur3-128"),murmur332:hash("murmur3-32"),addBlake:blake_1};function equals$1(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var equals$2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",equals:equals$1}),require$$3=getAugmentedNamespace(equals$2);const errcode=errCode,multihash$1=src$6,crypto$1=crypto$2,{equals:equals}=require$$3;async function Multihashing(e,t,r){const n=await Multihashing.digest(e,t,r);return multihash$1.encode(n,t,r)}Multihashing.multihash=multihash$1,Multihashing.digest=async(e,t,r)=>{const n=Multihashing.createHash(t),o=await n(e);return r?o.slice(0,r):o},Multihashing.createHash=function(e){if(!e){throw errcode(new Error("hash algorithm must be specified"),"ERR_HASH_ALGORITHM_NOT_SPECIFIED")}const t=multihash$1.coerceCode(e);if(!Multihashing.functions[t])throw errcode(new Error(`multihash function '${e}' not yet supported`),"ERR_HASH_ALGORITHM_NOT_SUPPORTED");return Multihashing.functions[t]},Multihashing.functions={0:crypto$1.identity,17:crypto$1.sha1,18:crypto$1.sha2256,19:crypto$1.sha2512,20:crypto$1.sha3512,21:crypto$1.sha3384,22:crypto$1.sha3256,23:crypto$1.sha3224,24:crypto$1.shake128,25:crypto$1.shake256,26:crypto$1.keccak224,27:crypto$1.keccak256,28:crypto$1.keccak384,29:crypto$1.keccak512,34:crypto$1.murmur3128,35:crypto$1.murmur332,86:crypto$1.dblSha2256},crypto$1.addBlake(Multihashing.functions),Multihashing.validate=async(e,t)=>{const r=await Multihashing(e,multihash$1.decode(t).name);return equals(t,r)};var src$1=Multihashing;const CID$2=src$4,multicodec=src$5,multihashing=src$1,{multihash:multihash}=multihashing,codec=multicodec.DAG_PB,defaultHashAlg=multihash.names["sha2-256"],cid$1=async(e,t={})=>{const r={cidVersion:null==t.cidVersion?1:t.cidVersion,hashAlg:null==t.hashAlg?defaultHashAlg:t.hashAlg},n=multihash.codes[r.hashAlg],o=await multihashing(e,n),i=multicodec.getNameFromCode(codec);return new CID$2(r.cidVersion,i,o)};var genCid$2={codec:codec,defaultHashAlg:defaultHashAlg,cid:cid$1};const DAGLink$3=dagLink,genCid$1=genCid$2,toDAGLink$2=async(e,t={})=>{const r=e.serialize(),n=await genCid$1.cid(r,t);return new DAGLink$3(t.name||"",e.size,n)};var toDagLink=toDAGLink$2;const sortLinks$1=sortLinks_1,DAGLink$2=dagLink,asDAGLink=e=>{if(e instanceof DAGLink$2)return e;if(!("cid"in e||"hash"in e||"Hash"in e||"multihash"in e))throw new Error("Link must be a DAGLink or DAGLink-like. Convert the DAGNode into a DAGLink via `node.toDAGLink()`.");return new DAGLink$2(e.Name||e.name,e.Tsize||e.size,e.Hash||e.multihash||e.hash||e.cid)},addLink$1=(e,t)=>{const r=asDAGLink(t);e.Links.push(r),sortLinks$1(e.Links)};var addLink_1=addLink$1;const CID$1=src$4,uint8ArrayEquals=equals_1,rmLink$1=(e,t)=>{let r=null;if("string"==typeof t?r=e=>e.Name===t:t instanceof Uint8Array?r=e=>uint8ArrayEquals(e.Hash.bytes,t):CID$1.isCID(t)&&(r=e=>uint8ArrayEquals(e.Hash.bytes,t.bytes)),!r)throw new Error("second arg needs to be a name or CID");{const t=e.Links;let n=0;for(;n<t.length;){r(t[n])?t.splice(n,1):n++}}};var rmLink_1=rmLink$1;const sortLinks=sortLinks_1,DAGLink$1=dagLink,{createDagLinkFromB58EncodedHash:createDagLinkFromB58EncodedHash}=util$6,{serializeDAGNode:serializeDAGNode$1}=serialize$1,toDAGLink$1=toDagLink,addLink=addLink_1,rmLink=rmLink_1,uint8ArrayFromString=fromString_1,uint8ArrayToString=toString_1;class DAGNode$1{constructor(e,t=[],r=null){if(e||(e=new Uint8Array(0)),"string"==typeof e&&(e=uint8ArrayFromString(e)),!(e instanceof Uint8Array))throw new Error("Passed 'data' is not a Uint8Array or a String!");if(null!==r&&"number"!=typeof r)throw new Error("Passed 'serializedSize' must be a number!");const n=t.map((e=>e instanceof DAGLink$1?e:createDagLinkFromB58EncodedHash(e)));sortLinks(n),this.Data=e,this.Links=n,Object.defineProperties(this,{_serializedSize:{value:r,writable:!0,enumerable:!1},_size:{value:null,writable:!0,enumerable:!1}})}toJSON(){return this._json||(this._json=Object.freeze({data:this.Data,links:this.Links.map((e=>e.toJSON())),size:this.size})),Object.assign({},this._json)}toString(){return`DAGNode <data: "${uint8ArrayToString(this.Data,"base64urlpad")}", links: ${this.Links.length}, size: ${this.size}>`}_invalidateCached(){this._serializedSize=null,this._size=null}addLink(e){return this._invalidateCached(),addLink(this,e)}rmLink(e){return this._invalidateCached(),rmLink(this,e)}toDAGLink(e){return toDAGLink$1(this,e)}serialize(){const e=serializeDAGNode$1(this);return this._serializedSize=e.length,e}get size(){if(null==this._size){let e;null==e&&(this._serializedSize=this.serialize().length,e=this._serializedSize),this._size=this.Links.reduce(((e,t)=>e+t.Tsize),e)}return this._size}set size(e){throw new Error("Can't set property: 'size' is immutable")}}var dagNode=DAGNode$1;const{PBNode:PBNode}=dag,DAGLink=dagLink,DAGNode=dagNode,{serializeDAGNode:serializeDAGNode,serializeDAGNodeLike:serializeDAGNodeLike}=serialize$1,genCid=genCid$2,cid=(e,t)=>genCid.cid(e,t),serialize=e=>e instanceof DAGNode?serializeDAGNode(e):serializeDAGNodeLike(e.Data,e.Links),deserialize=e=>{const t=PBNode.decode(e),r=PBNode.toObject(t,{defaults:!1,arrays:!0,longs:Number,objects:!1}),n=r.Links.map((e=>new DAGLink(e.Name,e.Tsize,e.Hash))),o=null==r.Data?new Uint8Array(0):r.Data;return new DAGNode(o,n,e.byteLength)};var util$2={codec:genCid.codec,defaultHashAlg:genCid.defaultHashAlg,serialize:serialize,deserialize:deserialize,cid:cid};const CID=src$4,util$1=util$2;resolver$1.resolve=(e,t="/")=>{let r=util$1.deserialize(e);const n=t.split("/").filter(Boolean);for(;n.length;){const e=n.shift();if(void 0===r[e]){for(const t of r.Links)if(t.Name===e)return{value:t.Hash,remainderPath:n.join("/")};throw new Error(`Object has no property '${e}'`)}if(r=r[e],CID.isCID(r))return{value:r,remainderPath:n.join("/")}}return{value:r,remainderPath:""}},resolver$1.tree=function*(e){const t=util$1.deserialize(e);yield"Data",yield"Links";for(let r=0;r<t.Links.length;r++)yield`Links/${r}`,yield`Links/${r}/Name`,yield`Links/${r}/Tsize`,yield`Links/${r}/Hash`};const resolver=resolver$1,util=util$2,DAGNodeClass=dagNode,DAGLinkClass=dagLink,format={DAGNode:DAGNodeClass,DAGLink:DAGLinkClass,resolver:resolver,util:util,codec:util.codec,defaultHashAlg:util.defaultHashAlg};var src=format;const rawToDAGLink=e=>new src.DAGLink(e.Name,e.Tsize,e.Hash),rawToDAGNode=e=>{const t=e?.value?.Data,r=e?.value?.Links?.map(rawToDAGLink);return new src.DAGNode(t,r)},DAG_NODE_DATA=new Uint8Array([8,1]),add$2=async e=>{const t=await get$2(),r=await t.add(e,{cidVersion:1,pin:setup$1.shouldPin});return{cid:r.cid.toString(),size:r.size,isFile:!0}},catRaw=async e=>{const t=await get$2(),r=[];await attemptPin(e);for await(const n of t.cat(e))r.push(n);return r},catBuf=async e=>{const t=await catRaw(e);return uint8arrays.concat(t)},cat=async e=>(await catBuf(e)).toString(),ls=async e=>{const t=await get$2(),r=[];for await(const n of t.ls(e))r.push(n);return r},dagGet=async e=>{const t=await get$2();await attemptPin(e);const r=await t.dag.get(new src$4(e));return rawToDAGNode(r)},dagPut=async e=>{const t=await get$2(),r=(await t.dag.put(e,{format:"dag-pb",hashAlg:"sha2-256"})).toV1().toString();await attemptPin(r);return{cid:r,size:await size(r),isFile:!1}},dagPutLinks=async e=>{const t=new src.DAGNode(DAG_NODE_DATA,e);return dagPut(t)},size=async e=>{const t=await get$2();return(await t.files.stat(`/ipfs/${e}`)).cumulativeSize},attemptPin=async e=>{if(!setup$1.shouldPin)return;const t=await get$2();try{await t.pin.add(e,{recursive:!1})}catch(r){if(!r.message||!r.message.includes("already pinned recursively"))throw new Error(r)}},typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";const t=typeof e;if(typeofs.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(isBuffer$1(e))return"Buffer";const r=getObjectType(e);return r||"Object"}function isBuffer$1(e){return e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e)}function getObjectType(e){const t=Object.prototype.toString.call(e).slice(8,-1);if(objectTypeNames.includes(t))return t}class Type{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0),Type.negint=new Type(1,"negint",!0),Type.bytes=new Type(2,"bytes",!0),Type.string=new Type(3,"string",!0),Type.array=new Type(4,"array",!1),Type.map=new Type(5,"map",!1),Type.tag=new Type(6,"tag",!1),Type.float=new Type(7,"float",!0),Type.false=new Type(7,"false",!0),Type.true=new Type(7,"true",!0),Type.null=new Type(7,"null",!0),Type.undefined=new Type(7,"undefined",!0),Type.break=new Type(7,"break",!0);class Token{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,textDecoder=new TextDecoder,textEncoder=new TextEncoder;function isBuffer(e){return useBuffer&&globalThis.Buffer.isBuffer(e)}function asU8A(e){return e instanceof Uint8Array?isBuffer(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}const toString$1=useBuffer?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):utf8Slice(e,t,r):(e,t,r)=>r-t>64?textDecoder.decode(e.subarray(t,r)):utf8Slice(e,t,r),fromString=useBuffer?e=>e.length>64?globalThis.Buffer.from(e):utf8ToBytes(e):e=>e.length>64?textEncoder.encode(e):utf8ToBytes(e),fromArray=e=>Uint8Array.from(e),slice=useBuffer?(e,t,r)=>isBuffer(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),concat=useBuffer?(e,t)=>(e=e.map((e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e))),asU8A(globalThis.Buffer.concat(e,t))):(e,t)=>{const r=new Uint8Array(t);let n=0;for(let o of e)n+o.length>r.length&&(o=o.subarray(0,r.length-n)),r.set(o,n),n+=o.length;return r},alloc=useBuffer?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function compare(e,t){if(isBuffer(e)&&isBuffer(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}function utf8ToBytes(e,t=1/0){let r;const n=e.length;let o=null;const i=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function utf8Slice(e,t,r){const n=[];for(;t<r;){const o=e[t];let i=null,a=o>239?4:o>223?3:o>191?2:1;if(t+a<=r){let r,n,s,u;switch(a){case 1:o<128&&(i=o);break;case 2:r=e[t+1],128==(192&r)&&(u=(31&o)<<6|63&r,u>127&&(i=u));break;case 3:r=e[t+1],n=e[t+2],128==(192&r)&&128==(192&n)&&(u=(15&o)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(i=u));break;case 4:r=e[t+1],n=e[t+2],s=e[t+3],128==(192&r)&&128==(192&n)&&128==(192&s)&&(u=(15&o)<<18|(63&r)<<12|(63&n)<<6|63&s,u>65535&&u<1114112&&(i=u))}}null===i?(i=65533,a=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),t+=a}return decodeCodePointsArray(n)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){const t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.chunks=[],this.cursor=0,this.maxCursor=-1,null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const r=t.length-(this.maxCursor-this.cursor)-1;t.set(e,r)}else{if(t){const e=t.length-(this.maxCursor-this.cursor)-1;e<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,e),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=alloc(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){const r=this.chunks[0];e&&this.cursor>r.length/2?(t=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=slice(r,0,this.cursor)}else t=concat(this.chunks,this.cursor);return e&&this.reset(),t}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(e,t,r){if(e.length-t<r)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(e,t,r){assertEnoughData(e,t,1);const n=e[t];if(!0===r.strict&&n<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint16(e,t,r){assertEnoughData(e,t,2);const n=e[t]<<8|e[t+1];if(!0===r.strict&&n<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint32(e,t,r){assertEnoughData(e,t,4);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===r.strict&&n<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return n}function readUint64(e,t,r){assertEnoughData(e,t,8);const n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],o=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],i=(BigInt(n)<<BigInt(32))+BigInt(o);if(!0===r.strict&&i<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(i<=Number.MAX_SAFE_INTEGER)return Number(i);if(!0===r.allowBigInt)return i;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(e,t,r,n){return new Token(Type.uint,readUint8(e,t+1,n),2)}function decodeUint16(e,t,r,n){return new Token(Type.uint,readUint16(e,t+1,n),3)}function decodeUint32(e,t,r,n){return new Token(Type.uint,readUint32(e,t+1,n),5)}function decodeUint64(e,t,r,n){return new Token(Type.uint,readUint64(e,t+1,n),9)}function encodeUint(e,t){return encodeUintValue(e,0,t.value)}function encodeUintValue(e,t,r){if(r<uintBoundaries[0]){const n=Number(r);e.push([t|n])}else if(r<uintBoundaries[1]){const n=Number(r);e.push([24|t,n])}else if(r<uintBoundaries[2]){const n=Number(r);e.push([25|t,n>>>8,255&n])}else if(r<uintBoundaries[3]){const n=Number(r);e.push([26|t,n>>>24&255,n>>>16&255,n>>>8&255,255&n])}else{const n=BigInt(r);if(!(n<uintBoundaries[4]))throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`);{const r=[27|t,0,0,0,0,0,0,0];let o=Number(n&BigInt(4294967295)),i=Number(n>>BigInt(32)&BigInt(4294967295));r[8]=255&o,o>>=8,r[7]=255&o,o>>=8,r[6]=255&o,o>>=8,r[5]=255&o,r[4]=255&i,i>>=8,r[3]=255&i,i>>=8,r[2]=255&i,i>>=8,r[1]=255&i,e.push(r)}}}function decodeNegint8(e,t,r,n){return new Token(Type.negint,-1-readUint8(e,t+1,n),2)}function decodeNegint16(e,t,r,n){return new Token(Type.negint,-1-readUint16(e,t+1,n),3)}function decodeNegint32(e,t,r,n){return new Token(Type.negint,-1-readUint32(e,t+1,n),5)}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)},encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9},encodeUint.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(e,t,r,n){const o=readUint64(e,t+1,n);if("bigint"!=typeof o){const e=-1-o;if(e>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,e,9)}if(!0!==n.allowBigInt)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(o),9)}function encodeNegint(e,t){const r=t.value,n="bigint"==typeof r?r*neg1b-pos1b:-1*r-1;encodeUintValue(e,t.type.majorEncoded,n)}function toToken$3(e,t,r,n){assertEnoughData(e,t,r+n);const o=slice(e,t+r,t+r+n);return new Token(Type.bytes,o,r+n)}function decodeBytesCompact(e,t,r,n){return toToken$3(e,t,1,r)}function decodeBytes8(e,t,r,n){return toToken$3(e,t,2,readUint8(e,t+1,n))}function decodeBytes16(e,t,r,n){return toToken$3(e,t,3,readUint16(e,t+1,n))}function decodeBytes32(e,t,r,n){return toToken$3(e,t,5,readUint32(e,t+1,n))}function decodeBytes64(e,t,r,n){const o=readUint64(e,t+1,n);if("bigint"==typeof o)throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(e,t,9,o)}function tokenBytes(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===Type.string?fromString(e.value):e.value),e.encodedBytes}function encodeBytes(e,t){const r=tokenBytes(t);encodeUintValue(e,t.type.majorEncoded,r.length),e.push(r)}function compareBytes(e,t){return e.length<t.length?-1:e.length>t.length?1:compare(e,t)}function toToken$2(e,t,r,n){const o=r+n;return assertEnoughData(e,t,o),new Token(Type.string,toString$1(e,t+r,t+o),o)}function decodeStringCompact(e,t,r,n){return toToken$2(e,t,1,r)}function decodeString8(e,t,r,n){return toToken$2(e,t,2,readUint8(e,t+1,n))}function decodeString16(e,t,r,n){return toToken$2(e,t,3,readUint16(e,t+1,n))}function decodeString32(e,t,r,n){return toToken$2(e,t,5,readUint32(e,t+1,n))}function decodeString64(e,t,r,n){const o=readUint64(e,t+1,n);if("bigint"==typeof o)throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(e,t,9,o)}encodeNegint.encodedSize=function(e){const t=e.value,r="bigint"==typeof t?t*neg1b-pos1b:-1*t-1;return r<uintBoundaries[0]?1:r<uintBoundaries[1]?2:r<uintBoundaries[2]?3:r<uintBoundaries[3]?5:9},encodeNegint.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},encodeBytes.encodedSize=function(e){const t=tokenBytes(e);return encodeUintValue.encodedSize(t.length)+t.length},encodeBytes.compareTokens=function(e,t){return compareBytes(tokenBytes(e),tokenBytes(t))};const encodeString=encodeBytes;function toToken$1(e,t,r,n){return new Token(Type.array,n,r)}function decodeArrayCompact(e,t,r,n){return toToken$1(e,t,1,r)}function decodeArray8(e,t,r,n){return toToken$1(e,t,2,readUint8(e,t+1,n))}function decodeArray16(e,t,r,n){return toToken$1(e,t,3,readUint16(e,t+1,n))}function decodeArray32(e,t,r,n){return toToken$1(e,t,5,readUint32(e,t+1,n))}function decodeArray64(e,t,r,n){const o=readUint64(e,t+1,n);if("bigint"==typeof o)throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(e,t,9,o)}function decodeArrayIndefinite(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(e,t,1,1/0)}function encodeArray(e,t){encodeUintValue(e,Type.array.majorEncoded,t.value)}function toToken(e,t,r,n){return new Token(Type.map,n,r)}function decodeMapCompact(e,t,r,n){return toToken(e,t,1,r)}function decodeMap8(e,t,r,n){return toToken(e,t,2,readUint8(e,t+1,n))}function decodeMap16(e,t,r,n){return toToken(e,t,3,readUint16(e,t+1,n))}function decodeMap32(e,t,r,n){return toToken(e,t,5,readUint32(e,t+1,n))}function decodeMap64(e,t,r,n){const o=readUint64(e,t+1,n);if("bigint"==typeof o)throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(e,t,9,o)}function decodeMapIndefinite(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(e,t,1,1/0)}function encodeMap(e,t){encodeUintValue(e,Type.map.majorEncoded,t.value)}function decodeTagCompact(e,t,r,n){return new Token(Type.tag,r,1)}function decodeTag8(e,t,r,n){return new Token(Type.tag,readUint8(e,t+1,n),2)}function decodeTag16(e,t,r,n){return new Token(Type.tag,readUint16(e,t+1,n),3)}function decodeTag32(e,t,r,n){return new Token(Type.tag,readUint32(e,t+1,n),5)}function decodeTag64(e,t,r,n){return new Token(Type.tag,readUint64(e,t+1,n),9)}function encodeTag(e,t){encodeUintValue(e,Type.tag.majorEncoded,t.value)}encodeArray.compareTokens=encodeUint.compareTokens,encodeMap.compareTokens=encodeUint.compareTokens,encodeTag.compareTokens=encodeUint.compareTokens;const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(e,t,r,n){if(!1===n.allowUndefined)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return new Token(Type.undefined,void 0,1)}function decodeBreak(e,t,r,n){if(!1===n.allowIndefinite)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(e,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(e))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(!1===r.allowInfinity&&(e===1/0||e===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,e,t)}function decodeFloat16(e,t,r,n){return createToken(readFloat16(e,t+1),3,n)}function decodeFloat32(e,t,r,n){return createToken(readFloat32(e,t+1),5,n)}function decodeFloat64(e,t,r,n){return createToken(readFloat64(e,t+1),9,n)}function encodeFloat(e,t,r){const n=t.value;if(!1===n)e.push([Type.float.majorEncoded|MINOR_FALSE]);else if(!0===n)e.push([Type.float.majorEncoded|MINOR_TRUE]);else if(null===n)e.push([Type.float.majorEncoded|MINOR_NULL]);else if(void 0===n)e.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let t,o=!1;r&&!0===r.float64||(encodeFloat16(n),t=readFloat16(ui8a,1),n===t||Number.isNaN(n)?(ui8a[0]=249,e.push(ui8a.slice(0,3)),o=!0):(encodeFloat32(n),t=readFloat32(ui8a,1),n===t&&(ui8a[0]=250,e.push(ui8a.slice(0,5)),o=!0))),o||(encodeFloat64(n),t=readFloat64(ui8a,1),ui8a[0]=251,e.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,t){const r=e.value;if(!1===r||!0===r||null==r)return 1;let n;if(!t||!0!==t.float64){if(encodeFloat16(r),n=readFloat16(ui8a,1),r===n||Number.isNaN(r))return 3;if(encodeFloat32(r),n=readFloat32(ui8a,1),r===n)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(e){if(e===1/0)dataView.setUint16(0,31744,!1);else if(e===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(e))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,e);const t=dataView.getUint32(0),r=(2139095040&t)>>23,n=8388607&t;if(255===r)dataView.setUint16(0,31744,!1);else if(0===r)dataView.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{const e=r-127;e<-24?dataView.setUint16(0,0):e<-14?dataView.setUint16(0,(2147483648&t)>>16|1<<24+e,!1):dataView.setUint16(0,(2147483648&t)>>16|e+15<<10|n>>13,!1)}}}function readFloat16(e,t){if(e.length-t<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const r=(e[t]<<8)+e[t+1];if(31744===r)return 1/0;if(64512===r)return-1/0;if(32256===r)return NaN;const n=r>>10&31,o=1023&r;let i;return i=0===n?o*2**-24:31!==n?(o+1024)*2**(n-25):0===o?1/0:NaN,32768&r?-i:i}function encodeFloat32(e){dataView.setFloat32(0,e,!1)}function readFloat32(e,t){if(e.length-t<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function encodeFloat64(e){dataView.setFloat64(0,e,!1)}function readFloat64(e,t){if(e.length-t<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}function invalidMinor(e,t,r){throw new Error(`${decodeErrPrefix} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function errorer(e){return()=>{throw new Error(`${decodeErrPrefix} ${e}`)}}encodeFloat.compareTokens=encodeUint.compareTokens;const jump=[];for(let e=0;e<=23;e++)jump[e]=invalidMinor;jump[24]=decodeUint8,jump[25]=decodeUint16,jump[26]=decodeUint32,jump[27]=decodeUint64,jump[28]=invalidMinor,jump[29]=invalidMinor,jump[30]=invalidMinor,jump[31]=invalidMinor;for(let e=32;e<=55;e++)jump[e]=invalidMinor;jump[56]=decodeNegint8,jump[57]=decodeNegint16,jump[58]=decodeNegint32,jump[59]=decodeNegint64,jump[60]=invalidMinor,jump[61]=invalidMinor,jump[62]=invalidMinor,jump[63]=invalidMinor;for(let e=64;e<=87;e++)jump[e]=decodeBytesCompact;jump[88]=decodeBytes8,jump[89]=decodeBytes16,jump[90]=decodeBytes32,jump[91]=decodeBytes64,jump[92]=invalidMinor,jump[93]=invalidMinor,jump[94]=invalidMinor,jump[95]=errorer("indefinite length bytes/strings are not supported");for(let e=96;e<=119;e++)jump[e]=decodeStringCompact;jump[120]=decodeString8,jump[121]=decodeString16,jump[122]=decodeString32,jump[123]=decodeString64,jump[124]=invalidMinor,jump[125]=invalidMinor,jump[126]=invalidMinor,jump[127]=errorer("indefinite length bytes/strings are not supported");for(let e=128;e<=151;e++)jump[e]=decodeArrayCompact;jump[152]=decodeArray8,jump[153]=decodeArray16,jump[154]=decodeArray32,jump[155]=decodeArray64,jump[156]=invalidMinor,jump[157]=invalidMinor,jump[158]=invalidMinor,jump[159]=decodeArrayIndefinite;for(let e=160;e<=183;e++)jump[e]=decodeMapCompact;jump[184]=decodeMap8,jump[185]=decodeMap16,jump[186]=decodeMap32,jump[187]=decodeMap64,jump[188]=invalidMinor,jump[189]=invalidMinor,jump[190]=invalidMinor,jump[191]=decodeMapIndefinite;for(let e=192;e<=215;e++)jump[e]=decodeTagCompact;jump[216]=decodeTag8,jump[217]=decodeTag16,jump[218]=decodeTag32,jump[219]=decodeTag64,jump[220]=invalidMinor,jump[221]=invalidMinor,jump[222]=invalidMinor,jump[223]=invalidMinor;for(let e=224;e<=243;e++)jump[e]=errorer("simple values are not supported");jump[244]=invalidMinor,jump[245]=invalidMinor,jump[246]=invalidMinor,jump[247]=decodeUndefined,jump[248]=errorer("simple values are not supported"),jump[249]=decodeFloat16,jump[250]=decodeFloat32,jump[251]=decodeFloat64,jump[252]=invalidMinor,jump[253]=invalidMinor,jump[254]=invalidMinor,jump[255]=decodeBreak;const quick=[];for(let e=0;e<24;e++)quick[e]=new Token(Type.uint,e,1);for(let e=-1;e>=-24;e--)quick[31-e]=new Token(Type.negint,e,1);function quickEncodeToken(e){switch(e.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return e.value.length?void 0:fromArray([64]);case Type.string:return""===e.value?fromArray([96]):void 0;case Type.array:return 0===e.value?fromArray([128]):void 0;case Type.map:return 0===e.value?fromArray([160]):void 0;case Type.uint:return e.value<24?fromArray([Number(e.value)]):void 0;case Type.negint:if(e.value>=-24)return fromArray([31-Number(e.value)])}}quick[64]=new Token(Type.bytes,new Uint8Array(0),1),quick[96]=new Token(Type.string,"",1),quick[128]=new Token(Type.array,0,1),quick[160]=new Token(Type.map,0,1),quick[244]=new Token(Type.false,!1,1),quick[245]=new Token(Type.true,!0,1),quick[246]=new Token(Type.null,null,1);const defaultEncodeOptions={float64:!1,mapSorter:mapSorter,quickEncodeToken:quickEncodeToken},cborEncoders=[];cborEncoders[Type.uint.major]=encodeUint,cborEncoders[Type.negint.major]=encodeNegint,cborEncoders[Type.bytes.major]=encodeBytes,cborEncoders[Type.string.major]=encodeString,cborEncoders[Type.array.major]=encodeArray,cborEncoders[Type.map.major]=encodeMap,cborEncoders[Type.tag.major]=encodeTag,cborEncoders[Type.float.major]=encodeFloat;const buf=new Bl;class Ref{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do{if(t.obj===e)return!0}while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(t,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number:(e,t,r,n)=>Number.isInteger(e)&&Number.isSafeInteger(e)?new Token(e>=0?Type.uint:Type.negint,e):new Token(Type.float,e),bigint:(e,t,r,n)=>e>=BigInt(0)?new Token(Type.uint,e):new Token(Type.negint,e),Uint8Array:(e,t,r,n)=>new Token(Type.bytes,e),string:(e,t,r,n)=>new Token(Type.string,e),boolean:(e,t,r,n)=>e?simpleTokens.true:simpleTokens.false,null:(e,t,r,n)=>simpleTokens.null,undefined:(e,t,r,n)=>simpleTokens.undefined,ArrayBuffer:(e,t,r,n)=>new Token(Type.bytes,new Uint8Array(e)),DataView:(e,t,r,n)=>new Token(Type.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,r,n){if(!e.length)return!0===r.addBreakTokens?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;n=Ref.createCheck(n,e);const o=[];let i=0;for(const a of e)o[i++]=objectToTokens(a,r,n);return r.addBreakTokens?[new Token(Type.array,e.length),o,new Token(Type.break)]:[new Token(Type.array,e.length),o]},Object(e,t,r,n){const o="Object"!==t,i=o?e.keys():Object.keys(e),a=o?e.size:i.length;if(!a)return!0===r.addBreakTokens?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;n=Ref.createCheck(n,e);const s=[];let u=0;for(const c of i)s[u++]=[objectToTokens(c,r,n),objectToTokens(o?e.get(c):e[c],r,n)];return sortMapEntries(s,r),r.addBreakTokens?[new Token(Type.map,a),s,new Token(Type.break)]:[new Token(Type.map,a),s]}};typeEncoders.Map=typeEncoders.Object,typeEncoders.Buffer=typeEncoders.Uint8Array;for(const e of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${e}Array`]=typeEncoders.DataView;function objectToTokens(e,t={},r){const n=is(e),o=t&&t.typeEncoders&&t.typeEncoders[n]||typeEncoders[n];if("function"==typeof o){const i=o(e,n,t,r);if(null!=i)return i}const i=typeEncoders[n];if(!i)throw new Error(`${encodeErrPrefix} unsupported type: ${n}`);return i(e,n,t,r)}function sortMapEntries(e,t){t.mapSorter&&e.sort(t.mapSorter)}function mapSorter(e,t){const r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);const o=r.type.major,i=cborEncoders[o].compareTokens(r,n);return 0===i&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),i}function tokensToEncoded(e,t,r,n){if(Array.isArray(t))for(const o of t)tokensToEncoded(e,o,r,n);else r[t.type.major](e,t,n)}function encodeCustom(e,t,r){const n=objectToTokens(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){const e=r.quickEncodeToken(n);if(e)return e;const o=t[n.type.major];if(o.encodedSize){const e=o.encodedSize(n,r),t=new Bl(e);if(o(t,n,r),1!==t.chunks.length)throw new Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return asU8A(t.chunks[0])}}return tokensToEncoded(buf,n,t,r),buf.toBytes(!0)}function encode$2(e,t){return t=Object.assign({},defaultEncodeOptions,t),encodeCustom(e,cborEncoders,t)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let t=quick[e];if(void 0===t){const r=jump[e];if(!r)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const n=31&e;t=r(this.data,this.pos,n,this.options)}return this.pos+=t.encodedLength,t}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(e,t,r){const n=[];for(let o=0;o<e.value;o++){const i=tokensToObject(t,r);if(i===BREAK){if(e.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(i===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${o}, expected ${e.value})`);n[o]=i}return n}function tokenToMap(e,t,r){const n=!0===r.useMaps,o=n?void 0:{},i=n?new Map:void 0;for(let a=0;a<e.value;a++){const s=tokensToObject(t,r);if(s===BREAK){if(e.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(s===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${a} [no key], expected ${e.value})`);if(!0!==n&&"string"!=typeof s)throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof s})`);const u=tokensToObject(t,r);if(u===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${a} [no value], expected ${e.value})`);n?i.set(s,u):o[s]=u}return n?i:o}function tokensToObject(e,t){if(e.done())return DONE;const r=e.next();if(r.type===Type.break)return BREAK;if(r.type.terminal)return r.value;if(r.type===Type.array)return tokenToArray(r,e,t);if(r.type===Type.map)return tokenToMap(r,e,t);if(r.type===Type.tag){if(t.tags&&"function"==typeof t.tags[r.value]){const n=tokensToObject(e,t);return t.tags[r.value](n)}throw new Error(`${decodeErrPrefix} tag not supported (${r.value})`)}throw new Error("unsupported")}function decode$1(e,t){if(!(e instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);const r=(t=Object.assign({},defaultDecodeOptions,t)).tokenizer||new Tokeniser(e,t),n=tokensToObject(r,t);if(n===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(n===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!r.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return n}var cborg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",decode:decode$1,encode:encode$2,Token:Token,Type:Type});const add$1=async(e,t)=>{const r=encode$2(isBlob(e)?await toUint8Array(e):e),n=isJust(t)?await aes.encrypt(r,t):r;return add$2(n)},catAndDecode=async(e,t)=>{const r=await catBuf(e);return decode$1(isJust(t)?await aes.decrypt(r,t):r)};var encoded=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",add:add$1,catAndDecode:catAndDecode}),ipfs=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",encoded:encoded,set:set,get:get$2,iframe:iframe,add:add$2,catRaw:catRaw,catBuf:catBuf,cat:cat,ls:ls,dagGet:dagGet,dagPut:dagPut,dagPutLinks:dagPutLinks,size:size,attemptPin:attemptPin,DAG_NODE_DATA:DAG_NODE_DATA}),KeyType,KeyType2;function appDataPath(e){return directory(Branch.Private,"Apps",e.creator,e.name)}function paths(e){let t=[];return e.app&&t.push(appDataPath(e.app)),e.fs?.private&&(t=t.concat(e.fs?.private.map((e=>combine(directory(Branch.Private),e))))),e.fs?.public&&(t=t.concat(e.fs?.public.map((e=>combine(directory(Branch.Public),e))))),t}KeyType2=KeyType||(KeyType={}),KeyType2.RSA="rsa",KeyType2.Edwards="ed25519",KeyType2.BLS="bls12-381";const EDWARDS_DID_PREFIX=new Uint8Array([237,1]),BLS_DID_PREFIX=new Uint8Array([234,1]),RSA_DID_PREFIX=new Uint8Array([0,245,2]),BASE58_DID_PREFIX="did:key:z";function magicBytes(e){switch(e){case KeyType.Edwards:return EDWARDS_DID_PREFIX;case KeyType.RSA:return RSA_DID_PREFIX;case KeyType.BLS:return BLS_DID_PREFIX;default:return null}}const parseMagicBytes=e=>{if(hasPrefix(e,RSA_DID_PREFIX))return{keyBuffer:e.slice(RSA_DID_PREFIX.byteLength),type:KeyType.RSA};if(hasPrefix(e,EDWARDS_DID_PREFIX))return{keyBuffer:e.slice(EDWARDS_DID_PREFIX.byteLength),type:KeyType.Edwards};if(hasPrefix(e,BLS_DID_PREFIX))return{keyBuffer:e.slice(BLS_DID_PREFIX.byteLength),type:KeyType.BLS};throw new Error("Unsupported key algorithm. Try using RSA.")},hasPrefix=(e,t)=>equal(t,e.slice(0,t.byteLength)),toKeyType=e=>{switch(e){case"rsa":return KeyType.RSA;case"ed25519":return KeyType.Edwards;case"bls12-381":return KeyType.BLS}throw new Error(`Key Type ${e} not supported`)};function publicKeyToDid(e,t){const r=utils$6.base64ToArrBuf(e),n=magicBytes(t);if(null===n)throw new Error(`Key type '${t}' not supported`);const o=utils$6.joinBufs(n,r);return BASE58_DID_PREFIX+uint8arrays.toString(new Uint8Array(o),"base58btc")}function didToPublicKey(e){if(!e.startsWith(BASE58_DID_PREFIX))throw new Error("Please use a base58-encoded DID formatted `did:key:z...`");const t=e.substr(BASE58_DID_PREFIX.length),r=uint8arrays.fromString(t,"base58btc"),{keyBuffer:n,type:o}=parseMagicBytes(r);return{publicKey:utils$6.arrBufToBase64(n),type:o}}async function exchange(){const e=await keystore.publicReadKey(),t=await keystore.getAlg();return publicKeyToDid(e,toKeyType(t))}async function write(){const e=await keystore.publicWriteKey(),t=await keystore.getAlg();return publicKeyToDid(e,toKeyType(t))}async function verifySignedData({charSize:e=16,data:t,did:r,signature:n}){try{const{type:o,publicKey:i}=didToPublicKey(r),a=new Uint8Array(utils$6.base64ToArrBuf(n)),s=new Uint8Array(utils$6.normalizeUnicodeToBuf(t,e)),u=new Uint8Array(utils$6.base64ToArrBuf(i));switch(o){case KeyType.Edwards:return await ed25519.verify(s,a,u);case KeyType.RSA:return await rsa.verify(s,a,u);default:return!1}}catch(o){return!1}}async function build({addSignature:e=!0,audience:t,facts:r=[],issuer:n,lifetimeInSeconds:o=30,expiration:i,potency:a="APPEND",proof:s,resource:u}){const c=Math.floor(Date.now()/1e3),l=s&&decode(s),f={alg:jwtAlgorithm(await keystore.getAlg())||"UnknownAlgorithm",typ:"JWT",uav:"1.0.0"};let h=i||c+o,d=c-60;if(l){const e=l.payload;h=Math.min(e.exp,h),d=Math.max(e.nbf,d)}const p={aud:t,exp:h,fct:r,iss:n||await write(),nbf:d,prf:s||null,ptc:a,rsc:u||(l?l.payload.rsc:"*")};return{header:f,payload:p,signature:e?await sign(f,p):null}}function decode(e){const t=e.split(".");return{header:JSON.parse(urlDecode(t[0])),payload:JSON.parse(urlDecode(t[1])),signature:t[2]||null}}function encode$1(e){return encodeHeader(e.header)+"."+encodePayload(e.payload)+"."+e.signature}function encodeHeader(e){return urlEncode(JSON.stringify(e))}function encodePayload(e){return urlEncode(JSON.stringify({...e}))}function isExpired(e){return e.payload.exp<=Math.floor(Date.now()/1e3)}async function isValid(e){const t=encodeHeader(e.header),r=encodePayload(e.payload),n=await verifySignedData({charSize:8,data:`${t}.${r}`,did:e.payload.iss,signature:makeUrlUnsafe(e.signature||"")});if(!n)return n;if(!e.payload.prf)return!0;const o=decode(e.payload.prf),i=o.payload.aud===e.payload.iss;return i?await isValid(o):i}function rootIssuer(e,t=0){const r=extractPayload(e,t);return r.prf?rootIssuer(r.prf,t+1):r.iss}async function sign(e,t){const r=encodeHeader(e),n=encodePayload(t);return makeUrlSafe(await keystore.sign(`${r}.${n}`,8))}function jwtAlgorithm(e){switch(e){case"ed25519":return"EdDSA";case"rsa":return"RS256";default:return null}}function extractPayload(e,t){try{return JSON.parse(urlDecode(e.split(".")[1]))}catch(r){throw new Error(`Invalid UCAN (${t} level${1===t?"":"s"} deep): \`${e}\``)}}let dictionary$1={};function getDictionary(){return dictionary$1}function setDictionary(e){dictionary$1=e}async function clearStorage(){dictionary$1={},await removeItem(UCANS_STORAGE_KEY)}const WNFS_PREFIX="wnfs";function compile(e){return e.reduce(((e,t)=>{const r=decode(t);if(isExpired(r))return e;const n=resourceLabel(r.payload.rsc);return{...e,[n]:t}}),{})}function resourceLabel(e){if("object"!=typeof e)return e;const t=Array.from(Object.entries(e))[0];return t[0]+":"+(t[0]===WNFS_PREFIX?t[1].replace(/^\/+/,""):t[1])}function filesystemPrefix(e){return WNFS_PREFIX+":"}function lookup$1(e){return getDictionary()[e]}async function lookupAppUcan(e){const t=getDictionary();return t["*"]||t["app:*"]||t[`app:${e}`]}async function lookupFilesystemUcan(e){if(lookup$1("*"))return lookup$1("*");const t="*"===e,r=!t&&isDirectory(e),n=t?["*"]:unwrap(e),o=await authenticatedUsername$1()?filesystemPrefix():"";return n.reduce(((e,t,i)=>{if(e)return e;const a=0===i,s=n.slice(0,n.length-i),u=toPosix(a&&!r?file(...s):directory(...s));return lookup$1(`${o}${u}`)||null}),null)}var dictionary=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",WNFS_PREFIX:WNFS_PREFIX,compile:compile,resourceLabel:resourceLabel,filesystemPrefix:filesystemPrefix,lookup:lookup$1,lookupAppUcan:lookupAppUcan,lookupFilesystemUcan:lookupFilesystemUcan});async function store(e){setDictionary(compile((await getItem(UCANS_STORAGE_KEY)||[]).concat(e)));const t=listFromDictionary();await setItem(UCANS_STORAGE_KEY,t)}function validatePermissions({app:e,fs:t,raw:r},n){const o=filesystemPrefix(),i=lookup$1("*");if(i&&!isExpired(decode(i)))return!0;if(e){const t=lookup$1(o+toPosix(appDataPath(e)));if(!t||isExpired(decode(t)))return!1}if(t?.private){if(!t.private.every((e=>{const t=lookup$1(`${o}private/`+toPosix(e));return t&&!isExpired(decode(t))})))return!1}if(t?.public){if(!t.public.every((e=>{const t=lookup$1(`${o}public/`+toPosix(e));return t&&!isExpired(decode(t))})))return!1}if(r){if(!r.every((e=>{const t=lookup$1(resourceLabel(e.rsc));return t&&!isExpired(decode(t))})))return!1}return!0}function listFromDictionary(){return Object.values(getDictionary())}async function root(e){const t=setup$1.endpoints.user;try{const r=await lookupTxtRecord(`_did.${e}.${t}`);if(null!==r)return r}catch(r){}throw new Error("Could not locate user DID in DNS.")}async function ownRoot(){const e=getDictionary(),t=Object.values(e)[0];if(void 0!==t)return rootIssuer(t[1]);const r=await authenticatedUsername$1();if(!isString(r))throw new Error("No logged in user");return root(r)}var did=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",exchange:exchange,ucan:write,write:write,root:root,ownRoot:ownRoot,publicKeyToDid:publicKeyToDid,didToPublicKey:didToPublicKey,get KeyType(){return KeyType},verifySignedData:verifySignedData});function throttle(e,t,r,n){var o,i=!1,a=0;function s(){o&&clearTimeout(o)}function u(){for(var u=arguments.length,c=new Array(u),l=0;l<u;l++)c[l]=arguments[l];var f=this,h=Date.now()-a;function d(){a=Date.now(),r.apply(f,c)}function p(){o=void 0}i||(n&&!o&&d(),s(),void 0===n&&h>e?d():!0!==t&&(o=setTimeout(n?p:d,void 0===n?e-h:e)))}return"boolean"!=typeof t&&(n=r,r=t,t=void 0),u.cancel=function(){s(),i=!0},u}const encode=(e,t,r)=>({major:e,minor:t,patch:r}),toString=e=>{const{major:t,minor:r,patch:n}=e;return`${t}.${r}.${n}`},v0=encode(0,0,0),v1=encode(1,0,0),latest=encode(1,0,0);var UnixNodeType,UnixNodeType2;UnixNodeType2=UnixNodeType||(UnixNodeType={}),UnixNodeType2.Raw="raw",UnixNodeType2.Directory="dir",UnixNodeType2.File="file",UnixNodeType2.Metadata="metadata",UnixNodeType2.Symlink="symlink",UnixNodeType2.HAMTShard="hamtShard";const emptyUnix=e=>({mtime:Date.now(),ctime:Date.now(),mode:e?644:755,_type:e?UnixNodeType.File:UnixNodeType.Directory}),empty=e=>({isFile:e,version:latest,unixMeta:emptyUnix(e)}),updateMtime=e=>({...e,unixMeta:{...e.unixMeta,mtime:Date.now()}});function mtimeFromMs(e){const t=Math.floor(e/1e3);return{secs:t,nsecs:1e3*(e-1e3*t)}}const toDAGLink=e=>{const{name:t,cid:r,size:n}=e;return new src.DAGLink(t,n,r)},fromFSFile=e=>{const{name:t="",cid:r,size:n,mtime:o,type:i}=e;return{name:t,cid:r.toString(),size:n,mtime:o,isFile:"dir"!==i}},fromDAGLink=e=>({name:e.Name,cid:e.Hash.toString(),size:e.Tsize}),make=(e,t,r,n)=>({name:e,cid:t,size:n,isFile:r,mtime:mtimeFromMs(Date.now())}),arrToMap=e=>e.reduce(((e,t)=>(e[t.name]=t,e)),{}),getFile=async e=>catBuf(e),getEncryptedFile=async(e,t)=>catAndDecode(e,t),putFile$1=async e=>add$2(e),putEncryptedFile=async(e,t)=>add$1(e,t),getSimpleLinks=async e=>{const t=await dagGet(e);return arrToMap(t.Links.map(fromDAGLink))},getLinks=async e=>{const t=await ls(e),r=arrToMap(t.map(fromFSFile));return(await dagGet(e)).Links.forEach((e=>{r[e.Name]&&0===r[e.Name].size&&(r[e.Name].size=e.Tsize)})),r},putLinks=async e=>{const t=Object.values(e).filter((e=>void 0!==e)).map(toDAGLink);return dagPutLinks(t)},isFile=e=>isObject$1(e)&&void 0!==e.content,isBaseLink=e=>isObject$1(e)&&isString(e.name)&&isNum(e.size)&&isBool(e.isFile),isLink=e=>isBaseLink(e)&&isCID(e.cid),isLinks=e=>isObject$1(e)&&Object.values(e).every(isLink),isUnixMeta=e=>isObject$1(e)&&isNum(e.mtime)&&isNum(e.ctime)&&isNum(e.mode)&&isString(e._type),isMetadata=e=>isObject$1(e)&&isUnixMeta(e.unixMeta)&&isBool(e.isFile)&&isSemVer(e.version),isSkeleton=e=>isObject$1(e)&&Object.values(e).every((e=>isObject$1(e)&&isCID(e.cid)&&isCID(e.userland)&&isCID(e.metadata)&&isSkeleton(e.subSkeleton))),isTreeHeader=e=>isObject$1(e)&&isSkeleton(e.skeleton)&&isMetadata(e.metadata)&&!1===e.metadata.isFile,isTreeInfo=e=>isTreeHeader(e)&&isCID(e.userland),isFileHeader=e=>isObject$1(e)&&isMetadata(e.metadata)&&!0===e.metadata.isFile,isFileInfo=e=>isFileHeader(e)&&isCID(e.userland),isCID=e=>isString(e),isSemVer=e=>{if(!isObject$1(e))return!1;const{major:t,minor:r,patch:n}=e;return isNum(t)&&isNum(r)&&isNum(n)},putTree=async(e,t,r,n)=>{const o=await putLinks(e),i=make("userland",o.cid,!0,o.size),[a,s]=await Promise.all([putAndMakeLink("metadata",r),putAndMakeLink("skeleton",t)]),u={metadata:a,skeleton:s,userland:i,previous:null!=n?make("previous",n,!1,await size(n)):void 0},{cid:c,size:l}=await putLinks(u);return{cid:c,userland:i.cid,metadata:a.cid,size:l,isFile:!1,skeleton:t}},putFile=async(e,t,r)=>{const n=await putFile$1(await normalizeFileContent(e)),o=make("userland",n.cid,!0,n.size),i=await putAndMakeLink("metadata",t),a={metadata:i,userland:o,previous:null!=r?make("previous",r,!1,await size(r)):void 0},{cid:s,size:u}=await putLinks(a);return{cid:s,userland:o.cid,metadata:i.cid,size:u,isFile:!0,skeleton:{}}},putAndMakeLink=async(e,t)=>{const{cid:r,size:n}=await add$1(t,null);return make(e,r,!0,n)},get$1=async e=>{const t=await getLinks(e),r=await getAndCheckValue(t,"metadata",isMetadata),n=r.isFile?void 0:await getAndCheckValue(t,"skeleton",isSkeleton),o=t.userland?.cid||null;if(!isCID(o))throw new Error("Could not find userland");return{userland:o,metadata:r,previous:t.previous?.cid||void 0,skeleton:n}},getValue=async(e,t)=>{if(isString(e)){const r=await getLinks(e);return getValueFromLinks(r,t)}return getValueFromLinks(e,t)},getValueFromLinks=async(e,t)=>{const r=e[t]?.cid;return r?catAndDecode(r,null):null},getAndCheckValue=async(e,t,r,n=!1)=>{const o=await getValue(e,t);return checkValue(o,t,r,n)},checkValue=(e,t,r,n=!1)=>{if(!isValue(e)){if(n)return e;throw new Error(`Could not find header value: ${t}`)}if(r(e))return e;throw new Error(`Improperly formatted header value: ${t}`)};async function normalizeFileContent(e){if(e instanceof Uint8Array)return e;if("undefined"!=typeof Blob&&e instanceof Blob)return await toUint8Array(e);const t=new TextEncoder;if("string"==typeof e)return t.encode(e);const r=JSON.stringify(e);return t.encode(r)}const isDecryptedNode=e=>isPrivateTreeInfo(e)||isPrivateFileInfo(e),isPrivateFileInfo=e=>isObject$1(e)&&isMetadata(e.metadata)&&e.metadata.isFile&&isString(e.key)&&isCID(e.content),isPrivateTreeInfo=e=>isObject$1(e)&&isMetadata(e.metadata)&&!1===e.metadata.isFile&&isNum(e.revision)&&isPrivateLinks(e.links)&&isPrivateSkeleton(e.skeleton),isPrivateLink=e=>isBaseLink(e)&&isString(e.key)&&isString(e.pointer),isPrivateLinks=e=>isObject$1(e)&&Object.values(e).every(isPrivateLink),isPrivateSkeleton=e=>isObject$1(e)&&Object.values(e).every(isPrivateSkeletonInfo),isPrivateSkeletonInfo=e=>isObject$1(e)&&isCID(e.cid)&&isString(e.key)&&isPrivateSkeleton(e.subSkeleton);var api={},bloomFilter={},baseFilter={},utils$2={},cuint={},uint32={exports:{}};!function(e){!function(t){function r(e,t){return this instanceof r?(this._low=0,this._high=0,this.remainder=null,void 0===t?o.call(this,e):"string"==typeof e?i.call(this,e,t):void n.call(this,e,t)):new r(e,t)}function n(e,t){return this._low=0|e,this._high=0|t,this}function o(e){return this._low=65535&e,this._high=e>>>16,this}function i(e,t){var r=parseInt(e,t||10);return this._low=65535&r,this._high=r>>>16,this}r(Math.pow(36,5)),r(Math.pow(16,7)),r(Math.pow(10,9)),r(Math.pow(2,30)),r(36),r(16),r(10),r(2),r.prototype.fromBits=n,r.prototype.fromNumber=o,r.prototype.fromString=i,r.prototype.toNumber=function(){return 65536*this._high+this._low},r.prototype.toString=function(e){return this.toNumber().toString(e||10)},r.prototype.add=function(e){var t=this._low+e._low,r=t>>>16;return r+=this._high+e._high,this._low=65535&t,this._high=65535&r,this},r.prototype.subtract=function(e){return this.add(e.clone().negate())},r.prototype.multiply=function(e){var t,r,n=this._high,o=this._low,i=e._high,a=e._low;return t=(r=o*a)>>>16,t+=n*a,t&=65535,t+=o*i,this._low=65535&r,this._high=65535&t,this},r.prototype.div=function(e){if(0==e._low&&0==e._high)throw Error("division by zero");if(0==e._high&&1==e._low)return this.remainder=new r(0),this;if(e.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(e))return this.remainder=new r(0),this._low=1,this._high=0,this;for(var t=e.clone(),n=-1;!this.lt(t);)t.shiftLeft(1,!0),n++;for(this.remainder=this.clone(),this._low=0,this._high=0;n>=0;n--)t.shiftRight(1),this.remainder.lt(t)||(this.remainder.subtract(t),n>=16?this._high|=1<<n-16:this._low|=1<<n);return this},r.prototype.negate=function(){var e=1+(65535&~this._low);return this._low=65535&e,this._high=~this._high+(e>>>16)&65535,this},r.prototype.equals=r.prototype.eq=function(e){return this._low==e._low&&this._high==e._high},r.prototype.greaterThan=r.prototype.gt=function(e){return this._high>e._high||!(this._high<e._high)&&this._low>e._low},r.prototype.lessThan=r.prototype.lt=function(e){return this._high<e._high||!(this._high>e._high)&&this._low<e._low},r.prototype.or=function(e){return this._low|=e._low,this._high|=e._high,this},r.prototype.and=function(e){return this._low&=e._low,this._high&=e._high,this},r.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},r.prototype.xor=function(e){return this._low^=e._low,this._high^=e._high,this},r.prototype.shiftRight=r.prototype.shiftr=function(e){return e>16?(this._low=this._high>>e-16,this._high=0):16==e?(this._low=this._high,this._high=0):(this._low=this._low>>e|this._high<<16-e&65535,this._high>>=e),this},r.prototype.shiftLeft=r.prototype.shiftl=function(e,t){return e>16?(this._high=this._low<<e-16,this._low=0,t||(this._high&=65535)):16==e?(this._high=this._low,this._low=0):(this._high=this._high<<e|this._low>>16-e,this._low=this._low<<e&65535,t||(this._high&=65535)),this},r.prototype.rotateLeft=r.prototype.rotl=function(e){var t=this._high<<16|this._low;return t=t<<e|t>>>32-e,this._low=65535&t,this._high=t>>>16,this},r.prototype.rotateRight=r.prototype.rotr=function(e){var t=this._high<<16|this._low;return t=t>>>e|t<<32-e,this._low=65535&t,this._high=t>>>16,this},r.prototype.clone=function(){return new r(this._low,this._high)},e.exports?e.exports=r:t.UINT32=r}(commonjsGlobal$1)}(uint32);var uint64={exports:{}};!function(e){!function(t){var r={16:o(Math.pow(16,5)),10:o(Math.pow(10,5)),2:o(Math.pow(2,5))},n={16:o(16),10:o(10),2:o(2)};function o(e,t,r,n){return this instanceof o?(this.remainder=null,"string"==typeof e?s.call(this,e,t):void 0===t?a.call(this,e):void i.apply(this,arguments)):new o(e,t,r,n)}function i(e,t,r,n){return void 0===r?(this._a00=65535&e,this._a16=e>>>16,this._a32=65535&t,this._a48=t>>>16,this):(this._a00=0|e,this._a16=0|t,this._a32=0|r,this._a48=0|n,this)}function a(e){return this._a00=65535&e,this._a16=e>>>16,this._a32=0,this._a48=0,this}function s(e,t){t=t||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var n=r[t]||new o(Math.pow(t,5)),i=0,a=e.length;i<a;i+=5){var s=Math.min(5,a-i),u=parseInt(e.slice(i,i+s),t);this.multiply(s<5?new o(Math.pow(t,s)):n).add(new o(u))}return this}o.prototype.fromBits=i,o.prototype.fromNumber=a,o.prototype.fromString=s,o.prototype.toNumber=function(){return 65536*this._a16+this._a00},o.prototype.toString=function(e){var t=n[e=e||10]||new o(e);if(!this.gt(t))return this.toNumber().toString(e);for(var r=this.clone(),i=new Array(64),a=63;a>=0&&(r.div(t),i[a]=r.remainder.toNumber().toString(e),r.gt(t));a--);return i[a-1]=r.toNumber().toString(e),i.join("")},o.prototype.add=function(e){var t=this._a00+e._a00,r=t>>>16,n=(r+=this._a16+e._a16)>>>16,o=(n+=this._a32+e._a32)>>>16;return o+=this._a48+e._a48,this._a00=65535&t,this._a16=65535&r,this._a32=65535&n,this._a48=65535&o,this},o.prototype.subtract=function(e){return this.add(e.clone().negate())},o.prototype.multiply=function(e){var t=this._a00,r=this._a16,n=this._a32,o=this._a48,i=e._a00,a=e._a16,s=e._a32,u=t*i,c=u>>>16,l=(c+=t*a)>>>16;c&=65535,l+=(c+=r*i)>>>16;var f=(l+=t*s)>>>16;return l&=65535,f+=(l+=r*a)>>>16,l&=65535,f+=(l+=n*i)>>>16,f+=t*e._a48,f&=65535,f+=r*s,f&=65535,f+=n*a,f&=65535,f+=o*i,this._a00=65535&u,this._a16=65535&c,this._a32=65535&l,this._a48=65535&f,this},o.prototype.div=function(e){if(0==e._a16&&0==e._a32&&0==e._a48){if(0==e._a00)throw Error("division by zero");if(1==e._a00)return this.remainder=new o(0),this}if(e.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(e))return this.remainder=new o(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var t=e.clone(),r=-1;!this.lt(t);)t.shiftLeft(1,!0),r++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;r>=0;r--)t.shiftRight(1),this.remainder.lt(t)||(this.remainder.subtract(t),r>=48?this._a48|=1<<r-48:r>=32?this._a32|=1<<r-32:r>=16?this._a16|=1<<r-16:this._a00|=1<<r);return this},o.prototype.negate=function(){var e=1+(65535&~this._a00);return this._a00=65535&e,e=(65535&~this._a16)+(e>>>16),this._a16=65535&e,e=(65535&~this._a32)+(e>>>16),this._a32=65535&e,this._a48=~this._a48+(e>>>16)&65535,this},o.prototype.equals=o.prototype.eq=function(e){return this._a48==e._a48&&this._a00==e._a00&&this._a32==e._a32&&this._a16==e._a16},o.prototype.greaterThan=o.prototype.gt=function(e){return this._a48>e._a48||!(this._a48<e._a48)&&(this._a32>e._a32||!(this._a32<e._a32)&&(this._a16>e._a16||!(this._a16<e._a16)&&this._a00>e._a00))},o.prototype.lessThan=o.prototype.lt=function(e){return this._a48<e._a48||!(this._a48>e._a48)&&(this._a32<e._a32||!(this._a32>e._a32)&&(this._a16<e._a16||!(this._a16>e._a16)&&this._a00<e._a00))},o.prototype.or=function(e){return this._a00|=e._a00,this._a16|=e._a16,this._a32|=e._a32,this._a48|=e._a48,this},o.prototype.and=function(e){return this._a00&=e._a00,this._a16&=e._a16,this._a32&=e._a32,this._a48&=e._a48,this},o.prototype.xor=function(e){return this._a00^=e._a00,this._a16^=e._a16,this._a32^=e._a32,this._a48^=e._a48,this},o.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},o.prototype.shiftRight=o.prototype.shiftr=function(e){return(e%=64)>=48?(this._a00=this._a48>>e-48,this._a16=0,this._a32=0,this._a48=0):e>=32?(e-=32,this._a00=65535&(this._a32>>e|this._a48<<16-e),this._a16=this._a48>>e&65535,this._a32=0,this._a48=0):e>=16?(e-=16,this._a00=65535&(this._a16>>e|this._a32<<16-e),this._a16=65535&(this._a32>>e|this._a48<<16-e),this._a32=this._a48>>e&65535,this._a48=0):(this._a00=65535&(this._a00>>e|this._a16<<16-e),this._a16=65535&(this._a16>>e|this._a32<<16-e),this._a32=65535&(this._a32>>e|this._a48<<16-e),this._a48=this._a48>>e&65535),this},o.prototype.shiftLeft=o.prototype.shiftl=function(e,t){return(e%=64)>=48?(this._a48=this._a00<<e-48,this._a32=0,this._a16=0,this._a00=0):e>=32?(e-=32,this._a48=this._a16<<e|this._a00>>16-e,this._a32=this._a00<<e&65535,this._a16=0,this._a00=0):e>=16?(e-=16,this._a48=this._a32<<e|this._a16>>16-e,this._a32=65535&(this._a16<<e|this._a00>>16-e),this._a16=this._a00<<e&65535,this._a00=0):(this._a48=this._a48<<e|this._a32>>16-e,this._a32=65535&(this._a32<<e|this._a16>>16-e),this._a16=65535&(this._a16<<e|this._a00>>16-e),this._a00=this._a00<<e&65535),t||(this._a48&=65535),this},o.prototype.rotateLeft=o.prototype.rotl=function(e){if(0==(e%=64))return this;if(e>=32){var t=this._a00;if(this._a00=this._a32,this._a32=t,t=this._a48,this._a48=this._a16,this._a16=t,32==e)return this;e-=32}var r=this._a48<<16|this._a32,n=this._a16<<16|this._a00,o=r<<e|n>>>32-e,i=n<<e|r>>>32-e;return this._a00=65535&i,this._a16=i>>>16,this._a32=65535&o,this._a48=o>>>16,this},o.prototype.rotateRight=o.prototype.rotr=function(e){if(0==(e%=64))return this;if(e>=32){var t=this._a00;if(this._a00=this._a32,this._a32=t,t=this._a48,this._a48=this._a16,this._a16=t,32==e)return this;e-=32}var r=this._a48<<16|this._a32,n=this._a16<<16|this._a00,o=r>>>e|n<<32-e,i=n>>>e|r<<32-e;return this._a00=65535&i,this._a16=i>>>16,this._a32=65535&o,this._a48=o>>>16,this},o.prototype.clone=function(){return new o(this._a00,this._a16,this._a32,this._a48)},e.exports?e.exports=o:t.UINT64=o}(commonjsGlobal$1)}(uint64),cuint.UINT32=uint32.exports,cuint.UINT64=uint64.exports;var UINT32=cuint.UINT32;UINT32.prototype.xxh_update=function(e,t){var r,n,o=PRIME32_2._low,i=PRIME32_2._high;r=(n=e*o)>>>16,r+=t*o,r&=65535,r+=e*i;var a=this._low+(65535&n),s=a>>>16,u=(s+=this._high+(65535&r))<<16|65535&a;s=(u=u<<13|u>>>19)>>>16,r=(n=(a=65535&u)*(o=PRIME32_1._low))>>>16,r+=s*o,r&=65535,r+=a*(i=PRIME32_1._high),this._low=65535&n,this._high=65535&r};var PRIME32_1=UINT32("2654435761"),PRIME32_2=UINT32("2246822519"),PRIME32_3=UINT32("3266489917"),PRIME32_4=UINT32("668265263"),PRIME32_5=UINT32("374761393");function toUTF8Array$1(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e.charCodeAt(r);o<128?t.push(o):o<2048?t.push(192|o>>6,128|63&o):o<55296||o>=57344?t.push(224|o>>12,128|o>>6&63,128|63&o):(r++,o=65536+((1023&o)<<10|1023&e.charCodeAt(r)),t.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o))}return new Uint8Array(t)}function XXH(){return 2==arguments.length?new XXH(arguments[1]).update(arguments[0]).digest():this instanceof XXH?void init$1.call(this,arguments[0]):new XXH(arguments[0])}function init$1(e){return this.seed=e instanceof UINT32?e.clone():UINT32(e),this.v1=this.seed.clone().add(PRIME32_1).add(PRIME32_2),this.v2=this.seed.clone().add(PRIME32_2),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(PRIME32_1),this.total_len=0,this.memsize=0,this.memory=null,this}XXH.prototype.init=init$1,XXH.prototype.update=function(e){var t,r="string"==typeof e;r&&(e=toUTF8Array$1(e),r=!1,t=!0),"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer&&(t=!0,e=new Uint8Array(e));var n=0,o=e.length,i=n+o;if(0==o)return this;if(this.total_len+=o,0==this.memsize&&(this.memory=r?"":t?new Uint8Array(16):new Buffer(16)),this.memsize+o<16)return r?this.memory+=e:t?this.memory.set(e.subarray(0,o),this.memsize):e.copy(this.memory,this.memsize,0,o),this.memsize+=o,this;if(this.memsize>0){r?this.memory+=e.slice(0,16-this.memsize):t?this.memory.set(e.subarray(0,16-this.memsize),this.memsize):e.copy(this.memory,this.memsize,0,16-this.memsize);var a=0;r?(this.v1.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v2.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v3.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2)),a+=4,this.v4.xxh_update(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2))):(this.v1.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v2.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v3.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2]),a+=4,this.v4.xxh_update(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2])),n+=16-this.memsize,this.memsize=0,r&&(this.memory="")}if(n<=i-16){var s=i-16;do{r?(this.v1.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2)),n+=4,this.v2.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2)),n+=4,this.v3.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2)),n+=4,this.v4.xxh_update(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2))):(this.v1.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2]),n+=4,this.v2.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2]),n+=4,this.v3.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2]),n+=4,this.v4.xxh_update(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2])),n+=4}while(n<=s)}return n<i&&(r?this.memory+=e.slice(n):t?this.memory.set(e.subarray(n,i),this.memsize):e.copy(this.memory,this.memsize,n,i),this.memsize=i-n),this},XXH.prototype.digest=function(){var e,t,r=this.memory,n="string"==typeof r,o=0,i=this.memsize,a=new UINT32;for((e=this.total_len>=16?this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):this.seed.clone().add(PRIME32_5)).add(a.fromNumber(this.total_len));o<=i-4;)n?a.fromBits(r.charCodeAt(o+1)<<8|r.charCodeAt(o),r.charCodeAt(o+3)<<8|r.charCodeAt(o+2)):a.fromBits(r[o+1]<<8|r[o],r[o+3]<<8|r[o+2]),e.add(a.multiply(PRIME32_3)).rotl(17).multiply(PRIME32_4),o+=4;for(;o<i;)a.fromBits(n?r.charCodeAt(o++):r[o++],0),e.add(a.multiply(PRIME32_5)).rotl(11).multiply(PRIME32_1);return t=e.clone().shiftRight(15),e.xor(t).multiply(PRIME32_2),t=e.clone().shiftRight(13),e.xor(t).multiply(PRIME32_3),t=e.clone().shiftRight(16),e.xor(t),this.init(this.seed),e};var xxhash=XXH,UINT64=cuint.UINT64,PRIME64_1=UINT64("11400714785074694791"),PRIME64_2=UINT64("14029467366897019727"),PRIME64_3=UINT64("1609587929392839161"),PRIME64_4=UINT64("9650029242287828579"),PRIME64_5=UINT64("2870177450012600261");function toUTF8Array(e){for(var t=[],r=0,n=e.length;r<n;r++){var o=e.charCodeAt(r);o<128?t.push(o):o<2048?t.push(192|o>>6,128|63&o):o<55296||o>=57344?t.push(224|o>>12,128|o>>6&63,128|63&o):(r++,o=65536+((1023&o)<<10|1023&e.charCodeAt(r)),t.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o))}return new Uint8Array(t)}function XXH64(){return 2==arguments.length?new XXH64(arguments[1]).update(arguments[0]).digest():this instanceof XXH64?void init.call(this,arguments[0]):new XXH64(arguments[0])}function init(e){return this.seed=e instanceof UINT64?e.clone():UINT64(e),this.v1=this.seed.clone().add(PRIME64_1).add(PRIME64_2),this.v2=this.seed.clone().add(PRIME64_2),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(PRIME64_1),this.total_len=0,this.memsize=0,this.memory=null,this}XXH64.prototype.init=init,XXH64.prototype.update=function(e){var t,r="string"==typeof e;r&&(e=toUTF8Array(e),r=!1,t=!0),"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer&&(t=!0,e=new Uint8Array(e));var n=0,o=e.length,i=n+o;if(0==o)return this;if(this.total_len+=o,0==this.memsize&&(this.memory=r?"":t?new Uint8Array(32):new Buffer(32)),this.memsize+o<32)return r?this.memory+=e:t?this.memory.set(e.subarray(0,o),this.memsize):e.copy(this.memory,this.memsize,0,o),this.memsize+=o,this;if(this.memsize>0){r?this.memory+=e.slice(0,32-this.memsize):t?this.memory.set(e.subarray(0,32-this.memsize),this.memsize):e.copy(this.memory,this.memsize,0,32-this.memsize);var a=0;if(r)u=UINT64(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v1.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),a+=8,u=UINT64(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v2.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),a+=8,u=UINT64(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v3.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),a+=8,u=UINT64(this.memory.charCodeAt(a+1)<<8|this.memory.charCodeAt(a),this.memory.charCodeAt(a+3)<<8|this.memory.charCodeAt(a+2),this.memory.charCodeAt(a+5)<<8|this.memory.charCodeAt(a+4),this.memory.charCodeAt(a+7)<<8|this.memory.charCodeAt(a+6)),this.v4.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);else u=UINT64(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v1.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),a+=8,u=UINT64(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v2.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),a+=8,u=UINT64(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v3.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),a+=8,u=UINT64(this.memory[a+1]<<8|this.memory[a],this.memory[a+3]<<8|this.memory[a+2],this.memory[a+5]<<8|this.memory[a+4],this.memory[a+7]<<8|this.memory[a+6]),this.v4.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);n+=32-this.memsize,this.memsize=0,r&&(this.memory="")}if(n<=i-32){var s=i-32;do{var u;if(r)u=UINT64(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v1.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),n+=8,u=UINT64(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v2.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),n+=8,u=UINT64(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v3.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),n+=8,u=UINT64(e.charCodeAt(n+1)<<8|e.charCodeAt(n),e.charCodeAt(n+3)<<8|e.charCodeAt(n+2),e.charCodeAt(n+5)<<8|e.charCodeAt(n+4),e.charCodeAt(n+7)<<8|e.charCodeAt(n+6)),this.v4.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);else u=UINT64(e[n+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v1.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),u=UINT64(e[(n+=8)+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v2.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),u=UINT64(e[(n+=8)+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v3.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1),u=UINT64(e[(n+=8)+1]<<8|e[n],e[n+3]<<8|e[n+2],e[n+5]<<8|e[n+4],e[n+7]<<8|e[n+6]),this.v4.add(u.multiply(PRIME64_2)).rotl(31).multiply(PRIME64_1);n+=8}while(n<=s)}return n<i&&(r?this.memory+=e.slice(n):t?this.memory.set(e.subarray(n,i),this.memsize):e.copy(this.memory,this.memsize,n,i),this.memsize=i-n),this},XXH64.prototype.digest=function(){var e,t,r=this.memory,n="string"==typeof r,o=0,i=this.memsize,a=new UINT64;for(this.total_len>=32?((e=this.v1.clone().rotl(1)).add(this.v2.clone().rotl(7)),e.add(this.v3.clone().rotl(12)),e.add(this.v4.clone().rotl(18)),e.xor(this.v1.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1)),e.multiply(PRIME64_1).add(PRIME64_4),e.xor(this.v2.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1)),e.multiply(PRIME64_1).add(PRIME64_4),e.xor(this.v3.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1)),e.multiply(PRIME64_1).add(PRIME64_4),e.xor(this.v4.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1)),e.multiply(PRIME64_1).add(PRIME64_4)):e=this.seed.clone().add(PRIME64_5),e.add(a.fromNumber(this.total_len));o<=i-8;)n?a.fromBits(r.charCodeAt(o+1)<<8|r.charCodeAt(o),r.charCodeAt(o+3)<<8|r.charCodeAt(o+2),r.charCodeAt(o+5)<<8|r.charCodeAt(o+4),r.charCodeAt(o+7)<<8|r.charCodeAt(o+6)):a.fromBits(r[o+1]<<8|r[o],r[o+3]<<8|r[o+2],r[o+5]<<8|r[o+4],r[o+7]<<8|r[o+6]),a.multiply(PRIME64_2).rotl(31).multiply(PRIME64_1),e.xor(a).rotl(27).multiply(PRIME64_1).add(PRIME64_4),o+=8;for(o+4<=i&&(n?a.fromBits(r.charCodeAt(o+1)<<8|r.charCodeAt(o),r.charCodeAt(o+3)<<8|r.charCodeAt(o+2),0,0):a.fromBits(r[o+1]<<8|r[o],r[o+3]<<8|r[o+2],0,0),e.xor(a.multiply(PRIME64_1)).rotl(23).multiply(PRIME64_2).add(PRIME64_3),o+=4);o<i;)a.fromBits(n?r.charCodeAt(o++):r[o++],0,0,0),e.xor(a.multiply(PRIME64_5)).rotl(11).multiply(PRIME64_1);return t=e.clone().shiftRight(33),e.xor(t).multiply(PRIME64_2),t=e.clone().shiftRight(29),e.xor(t).multiply(PRIME64_3),t=e.clone().shiftRight(32),e.xor(t),this.init(this.seed),e};var xxhash64=XXH64,lib={h32:xxhash,h64:xxhash64},__values$1=commonjsGlobal$1&&commonjsGlobal$1.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__importDefault$c=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(utils$2,"__esModule",{value:!0});var xxhashjs_1=__importDefault$c(lib),buffer_1$2=buffer$2;function allocateArray(e,t){for(var r=new Array(e),n="function"==typeof t?t:function(){return t},o=0;o<e;o++)r[o]=n();return r}function hashTwice(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=getDefaultSeed());var n=xxhashjs_1.default.h64(e,r+1),o=xxhashjs_1.default.h64(e,r+2);if(t)return{first:n.toNumber(),second:o.toNumber()};var i=n.toString(16);i.length<16&&(i="0".repeat(16-i.length)+i);var a=o.toString(16);return a.length<16&&(a="0".repeat(16-a.length)+a),{first:Number(i),second:Number(a)}}function hashTwiceAsString(e,t){void 0===t&&(t=getDefaultSeed());var r=xxhashjs_1.default.h64(e,t+1),n=xxhashjs_1.default.h64(e,t+2),o=r.toString(16);o.length<16&&(o="0".repeat(16-o.length)+o);var i=n.toString(16);return i.length<16&&(i="0".repeat(16-i.length)+i),{first:o,second:i}}function allInOneHashTwice(e,t){void 0===t&&(t=getDefaultSeed());var r=xxhashjs_1.default.h64(e,t+1),n=xxhashjs_1.default.h64(e,t+2),o=r.toString(16);o.length<16&&(o="0".repeat(16-o.length)+o);var i=n.toString(16);return i.length<16&&(i="0".repeat(16-i.length)+i),{int:{first:r.toNumber(),second:n.toNumber()},string:{first:o,second:i}}}function doubleHashing(e,t,r,n){return Math.abs((t+e*r)%n)}function getDistinctIndices(e,t,r,n){return void 0===n&&(n=getDefaultSeed()),function e(t,r,o,i,a){if(void 0===a&&(a=[]),a.length===i)return a;var s=hashTwice(r,!0,n+o%t),u=doubleHashing(t,s.first,s.second,o);return a.includes(u)||a.push(u),e(t+1,r,o,i,a)}(1,e,t,r)}function getIndices(e,t,r,n){void 0===n&&(n=getDefaultSeed());for(var o=[],i=1;i<=r;i++){var a=hashTwice(e,!0,n+t%i);o.push(doubleHashing(i,a.first,a.second,t))}if(o.length!==r)throw new Error("report this, please, shouldnt be of different size");return o}function randomInt(e,t,r){void 0===r&&(r=Math.random),e=Math.ceil(e),t=Math.floor(t);var n=r();return Math.floor(n*(t-e+1))+e}function xorBuffer(e,t){for(var r=Math.max(e.length,t.length),n=buffer_1$2.Buffer.allocUnsafe(r).fill(0),o=0;o<r;++o)o<e.length&&o<t.length?n[r-o-1]=e[e.length-o-1]^t[t.length-o-1]:o<e.length&&o>=t.length?n[r-o-1]^=e[e.length-o-1]:o<t.length&&o>=e.length&&(n[r-o-1]^=t[t.length-o-1]);for(var i=0,a=n.values(),s=a.next();!s.done&&0===s.value;)i++,s=a.next();return n.slice(i)}function isEmptyBuffer(e){var t,r;if(null===e||!e)return!0;try{for(var n=__values$1(e),o=n.next();!o.done;o=n.next()){if(0!==o.value)return!1}}catch(i){t={error:i}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return!0}function hashAsInt(e,t,r){switch(void 0===t&&(t=getDefaultSeed()),r){case 32:return xxhashjs_1.default.h32(e,t).toNumber();case 64:default:return xxhashjs_1.default.h64(e,t).toNumber()}}function hashAsString(e,t,r,n){var o;switch(void 0===t&&(t=getDefaultSeed()),void 0===r&&(r=16),void 0===n&&(n=64),n){case 32:o=xxhashjs_1.default.h32(e,t);break;case 64:default:o=xxhashjs_1.default.h64(e,t)}var i="";return 16===r?(i=o.toString(r)).length<n/4&&(i="0".repeat(n/4-i.length)+i):2===r&&(i=hex2bin(o.toString(16))).length<n&&(i="0".repeat(n-i.length)+i),i}function hashIntAndString(e,t,r,n){var o;switch(void 0===t&&(t=getDefaultSeed()),void 0===r&&(r=16),void 0===n&&(n=64),n){case 32:o=xxhashjs_1.default.h32(e,t);break;case 64:default:o=xxhashjs_1.default.h64(e,t)}var i="";return 16===r?(i=o.toString(r)).length<n/4&&(i="0".repeat(n/4-i.length)+i):2===r&&(i=hex2bin(o.toString(16))).length<n&&(i="0".repeat(n-i.length)+i),{int:o.toNumber(),string:i}}function getDefaultSeed(){return 78187493520}function power2(e){return Math.ceil(Math.pow(2,Math.floor(Math.log(e)/Math.log(2))))}function hex2bin(e){return parseInt(e,16).toString(2)}function uint8ToBits(e){return[128,64,32,16,8,4,2,1].map((function(t){return(t&e)>0?1:0}))}function bitsToUint8(e){return e.reduce((function(e,t,r){if(0===t)return e;if(1===t)return e+Math.pow(2,7-r);throw new Error("Not binary")}),0)}utils$2.allocateArray=allocateArray,utils$2.hashTwice=hashTwice,utils$2.hashTwiceAsString=hashTwiceAsString,utils$2.allInOneHashTwice=allInOneHashTwice,utils$2.doubleHashing=doubleHashing,utils$2.getDistinctIndices=getDistinctIndices,utils$2.getIndices=getIndices,utils$2.randomInt=randomInt,utils$2.xorBuffer=xorBuffer,utils$2.isEmptyBuffer=isEmptyBuffer,utils$2.hashAsInt=hashAsInt,utils$2.hashAsString=hashAsString,utils$2.hashIntAndString=hashIntAndString,utils$2.getDefaultSeed=getDefaultSeed,utils$2.power2=power2,utils$2.hex2bin=hex2bin,utils$2.uint8ToBits=uint8ToBits,utils$2.bitsToUint8=bitsToUint8;var alea$1={exports:{}};!function(e,t,r){function n(e){var t,r=this,n=(t=4022871197,function(e){e=String(e);for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)});r.next=function(){var e=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(e),r.s0<0&&(r.s0+=1),r.s1-=n(e),r.s1<0&&(r.s1+=1),r.s2-=n(e),r.s2<0&&(r.s2+=1),n=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var r=new n(e),i=t&&t.state,a=r.next;return a.int32=function(){return 4294967296*r.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,i&&("object"==typeof i&&o(i,r),a.state=function(){return o(r,{})}),a}t&&t.exports?t.exports=i:this.alea=i}(0,alea$1);var xor128$1={exports:{}};!function(e,t,r){function n(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var r=new n(e),i=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=r.next,a.quick=a,i&&("object"==typeof i&&o(i,r),a.state=function(){return o(r,{})}),a}t&&t.exports?t.exports=i:this.xor128=i}(0,xor128$1);var xorwow$1={exports:{}};!function(e,t,r){function n(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),n==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var r=new n(e),i=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=r.next,a.quick=a,i&&("object"==typeof i&&o(i,r),a.state=function(){return o(r,{})}),a}t&&t.exports?t.exports=i:this.xorwow=i}(0,xorwow$1);var xorshift7$1={exports:{}};!function(e,t,r){function n(e){var t=this;t.next=function(){var e,r,n=t.x,o=t.i;return e=n[o],r=(e^=e>>>7)^e<<24,r^=(e=n[o+1&7])^e>>>10,r^=(e=n[o+3&7])^e>>>3,r^=(e=n[o+4&7])^e<<7,e=n[o+7&7],r^=(e^=e<<13)^e<<9,n[o]=r,t.i=o+1&7,r},function(e,t){var r,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,r=0;r<t.length;++r)n[7&r]=n[7&r]<<15^t.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r&&(n[7]=-1),e.x=n,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var r=new n(e),i=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=r.next,a.quick=a,i&&(i.x&&o(i,r),a.state=function(){return o(r,{})}),a}t&&t.exports?t.exports=i:this.xorshift7=i}(0,xorshift7$1);var xor4096$1={exports:{}};!function(e,t,r){function n(e){var t=this;t.next=function(){var e,r,n=t.w,o=t.X,i=t.i;return t.w=n=n+1640531527|0,r=o[i+34&127],e=o[i=i+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=o[i]=r^e,t.i=i,r+(n^n>>>16)|0},function(e,t){var r,n,o,i,a,s=[],u=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,u=Math.max(u,t.length)),o=0,i=-32;i<u;++i)t&&(n^=t.charCodeAt((i+32)%t.length)),0===i&&(a=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,i>=0&&(a=a+1640531527|0,o=0==(r=s[127&i]^=n+a)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)n=s[o+34&127],r=s[o=o+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,s[o]=n^r;e.w=a,e.X=s,e.i=o}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var r=new n(e),i=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=r.next,a.quick=a,i&&(i.X&&o(i,r),a.state=function(){return o(r,{})}),a}t&&t.exports?t.exports=i:this.xor4096=i}(0,xor4096$1);var tychei$1={exports:{}};!function(e,t,r){function n(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,n=t.d,o=t.a;return e=e<<25^e>>>7^r,r=r-n|0,n=n<<24^n>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-n|0,t.d=n<<16^r>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var n=0;n<r.length+20;n++)t.b^=0|r.charCodeAt(n),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var r=new n(e),i=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=r.next,a.quick=a,i&&("object"==typeof i&&o(i,r),a.state=function(){return o(r,{})}),a}t&&t.exports?t.exports=i:this.tychei=i}(0,tychei$1);var seedrandom$1={exports:{}};!function(e){!function(t,r,n){var o,i=256,a=n.pow(i,6),s=n.pow(2,52),u=2*s,c=255;function l(e,c,l){var m=[],_=p(d((c=1==c?{entropy:!0}:c||{}).entropy?[e,y(r)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(i):(e=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(e)),y(e)}catch(s){var n=t.navigator,a=n&&n.plugins;return[+new Date,t,a,t.screen,y(r)]}}():e,3),m),g=new f(m),b=function(){for(var e=g.g(6),t=a,r=0;e<s;)e=(e+r)*i,t*=i,r=g.g(1);for(;e>=u;)e/=2,t/=2,r>>>=1;return(e+r)/t};return b.int32=function(){return 0|g.g(4)},b.quick=function(){return g.g(4)/4294967296},b.double=b,p(y(g.S),r),(c.pass||l||function(e,t,r,o){return o&&(o.S&&h(o,g),e.state=function(){return h(g,{})}),r?(n.random=e,t):e})(b,_,"global"in c?c.global:this==n,c.state)}function f(e){var t,r=e.length,n=this,o=0,a=n.i=n.j=0,s=n.S=[];for(r||(e=[r++]);o<i;)s[o]=o++;for(o=0;o<i;o++)s[o]=s[a=c&a+e[o%r]+(t=s[o])],s[a]=t;(n.g=function(e){for(var t,r=0,o=n.i,a=n.j,s=n.S;e--;)t=s[o=c&o+1],r=r*i+s[c&(s[o]=s[a=c&a+t])+(s[a]=t)];return n.i=o,n.j=a,r})(i)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function d(e,t){var r,n=[],o=typeof e;if(t&&"object"==o)for(r in e)try{n.push(d(e[r],t-1))}catch(i){}return n.length?n:"string"==o?e:e+"\0"}function p(e,t){for(var r,n=e+"",o=0;o<n.length;)t[c&o]=c&(r^=19*t[c&o])+n.charCodeAt(o++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(p(n.random(),r),e.exports){e.exports=l;try{o=require$$0$1}catch(m){}}else n.seedrandom=l}("undefined"!=typeof self?self:commonjsGlobal$1,[],Math)}(seedrandom$1);var alea=alea$1.exports,xor128=xor128$1.exports,xorwow=xorwow$1.exports,xorshift7=xorshift7$1.exports,xor4096=xor4096$1.exports,tychei=tychei$1.exports,sr=seedrandom$1.exports;sr.alea=alea,sr.xor128=xor128,sr.xorwow=xorwow,sr.xorshift7=xorshift7,sr.xor4096=xor4096,sr.tychei=tychei;var seedrandom=sr,__importStar$1=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},__importDefault$b=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(baseFilter,"__esModule",{value:!0});var utils$1=__importStar$1(utils$2),seedrandom_1=__importDefault$b(seedrandom),BaseFilter=function(){function e(){this._seed=utils$1.getDefaultSeed(),this._rng=seedrandom_1.default(""+this._seed)}return Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(e){this._seed=e,this._rng=seedrandom_1.default(""+this._seed)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"random",{get:function(){return this._rng},enumerable:!0,configurable:!0}),e.prototype.saveAsJSON=function(){throw new Error("not-implemented")},e.fromJSON=function(e){throw new Error("not-implemented")},e}();baseFilter.default=BaseFilter;var exportable={},Reflect$1,Reflect2;
/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */Reflect2=Reflect$1||(Reflect$1={}),function(e){var t="object"==typeof commonjsGlobal$1?commonjsGlobal$1:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=n(Reflect2);function n(e,t){return function(r,n){"function"!=typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}void 0===t.Reflect?t.Reflect=Reflect2:r=n(t.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",i="function"==typeof Object.create,a={__proto__:[]}instanceof Array,s=!i&&!a,u={create:i?function(){return ne(Object.create(null))}:a?function(){return ne({__proto__:null})}:function(){return ne({})},has:s?function(e,r){return t.call(e,r)}:function(e,t){return t in e},get:s?function(e,r){return t.call(e,r)?e[r]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,f=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,h=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,d=new(l||"function"!=typeof WeakMap?re():WeakMap);function p(e,t,r,n){if(j(r)){if(!G(e))throw new TypeError;if(!W(t))throw new TypeError;return A(e,t)}if(!G(e))throw new TypeError;if(!O(t))throw new TypeError;if(!O(n)&&!j(n)&&!L(n))throw new TypeError;return L(n)&&(n=void 0),E(e,t,r=K(r),n)}function y(e,t){function r(r,n){if(!O(r))throw new TypeError;if(!j(n)&&!q(n))throw new TypeError;C(e,t,r,n)}return r}function m(e,t,r,n){if(!O(r))throw new TypeError;return j(n)||(n=K(n)),C(e,t,r,n)}function _(e,t,r){if(!O(t))throw new TypeError;return j(r)||(r=K(r)),T(e,t,r)}function g(e,t,r){if(!O(t))throw new TypeError;return j(r)||(r=K(r)),B(e,t,r)}function b(e,t,r){if(!O(t))throw new TypeError;return j(r)||(r=K(r)),x(e,t,r)}function v(e,t,r){if(!O(t))throw new TypeError;return j(r)||(r=K(r)),I(e,t,r)}function w(e,t){if(!O(e))throw new TypeError;return j(t)||(t=K(t)),D(e,t)}function $(e,t){if(!O(e))throw new TypeError;return j(t)||(t=K(t)),R(e,t)}function k(e,t,r){if(!O(t))throw new TypeError;j(r)||(r=K(r));var n=S(t,r,!1);if(j(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var o=d.get(t);return o.delete(r),o.size>0||d.delete(t),!0}function A(e,t){for(var r=e.length-1;r>=0;--r){var n=(0,e[r])(t);if(!j(n)&&!L(n)){if(!W(n))throw new TypeError;t=n}}return t}function E(e,t,r,n){for(var o=e.length-1;o>=0;--o){var i=(0,e[o])(t,r,n);if(!j(i)&&!L(i)){if(!O(i))throw new TypeError;n=i}}return n}function S(e,t,r){var n=d.get(e);if(j(n)){if(!r)return;n=new f,d.set(e,n)}var o=n.get(t);if(j(o)){if(!r)return;o=new f,n.set(t,o)}return o}function T(e,t,r){if(B(e,t,r))return!0;var n=Q(t);return!L(n)&&T(e,n,r)}function B(e,t,r){var n=S(t,r,!1);return!j(n)&&F(n.has(e))}function x(e,t,r){if(B(e,t,r))return I(e,t,r);var n=Q(t);return L(n)?void 0:x(e,n,r)}function I(e,t,r){var n=S(t,r,!1);if(!j(n))return n.get(e)}function C(e,t,r,n){S(r,n,!0).set(e,t)}function D(e,t){var r=R(e,t),n=Q(e);if(null===n)return r;var o=D(n,t);if(o.length<=0)return r;if(r.length<=0)return o;for(var i=new h,a=[],s=0,u=r;s<u.length;s++){var c=u[s];i.has(c)||(i.add(c),a.push(c))}for(var l=0,f=o;l<f.length;l++)c=f[l],i.has(c)||(i.add(c),a.push(c));return a}function R(e,t){var r=[],n=S(e,t,!1);if(j(n))return r;for(var o=Y(n.keys()),i=0;;){var a=J(o);if(!a)return r.length=i,r;var s=X(a);try{r[i]=s}catch(u){try{Z(o)}finally{throw u}}i++}}function N(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function j(e){return void 0===e}function L(e){return null===e}function P(e){return"symbol"==typeof e}function O(e){return"object"==typeof e?null!==e:"function"==typeof e}function U(e,t){switch(N(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var r=3===t?"string":5===t?"number":"default",o=V(e,n);if(void 0!==o){var i=o.call(e,r);if(O(i))throw new TypeError;return i}return M(e,"default"===r?"number":r)}function M(e,t){if("string"===t){var r=e.toString;if(H(r)&&!O(o=r.call(e)))return o;if(H(n=e.valueOf)&&!O(o=n.call(e)))return o}else{var n;if(H(n=e.valueOf)&&!O(o=n.call(e)))return o;var o,i=e.toString;if(H(i)&&!O(o=i.call(e)))return o}throw new TypeError}function F(e){return!!e}function z(e){return""+e}function K(e){var t=U(e,3);return P(t)?t:z(t)}function G(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function H(e){return"function"==typeof e}function W(e){return"function"==typeof e}function q(e){switch(N(e)){case 3:case 4:return!0;default:return!1}}function V(e,t){var r=e[t];if(null!=r){if(!H(r))throw new TypeError;return r}}function Y(e){var t=V(e,o);if(!H(t))throw new TypeError;var r=t.call(e);if(!O(r))throw new TypeError;return r}function X(e){return e.value}function J(e){var t=e.next();return!t.done&&t}function Z(e){var t=e.return;t&&t.call(e)}function Q(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var o=n.constructor;return"function"!=typeof o||o===e?t:o}function ee(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,o=r+1;o<n;o++)this._keys[o-1]=this._keys[o],this._values[o-1]=this._values[o];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,i)},t.prototype.entries=function(){return new r(this._keys,this._values,a)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function i(e,t){return t}function a(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new f}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}()}function re(){var e=16,r=u.create(),n=o();return function(){function e(){this._key=o()}return e.prototype.has=function(e){var t=i(e,!1);return void 0!==t&&u.has(t,this._key)},e.prototype.get=function(e){var t=i(e,!1);return void 0!==t?u.get(t,this._key):void 0},e.prototype.set=function(e,t){return i(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=i(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=o()},e}();function o(){var e;do{e="@@WeakMap@@"+c()}while(u.has(r,e));return r[e]=!0,e}function i(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:u.create()})}return e[n]}function a(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function s(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):a(new Uint8Array(e),e):a(new Array(e),e)}function c(){var t=s(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var r="",n=0;n<e;++n){var o=t[n];4!==n&&6!==n&&8!==n||(r+="-"),o<16&&(r+="0"),r+=o.toString(16).toLowerCase()}return r}}function ne(e){return e.__=void 0,delete e.__,e}e("decorate",p),e("metadata",y),e("defineMetadata",m),e("hasMetadata",_),e("hasOwnMetadata",g),e("getMetadata",b),e("getOwnMetadata",v),e("getMetadataKeys",w),e("getOwnMetadataKeys",$),e("deleteMetadata",k)}(r)}();var __read$1=commonjsGlobal$1&&commonjsGlobal$1.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spread$1=commonjsGlobal$1&&commonjsGlobal$1.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read$1(arguments[t]));return e};function cloneField(e){return null==e?e:Array.isArray(e)?e.map(cloneField):"object"==typeof e?"saveAsJSON"in e?e.saveAsJSON():Object.assign({},e):e}function cloneObject(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(r){var n={type:e};return t.forEach((function(e){n[e]=cloneField(r[e])})),n}}function Exportable(e){return function(t){return t.prototype.saveAsJSON=function(){return e.export(this)},t.fromJSON=function(t){return e.import(t)},t}}Object.defineProperty(exportable,"__esModule",{value:!0}),exportable.cloneField=cloneField,exportable.cloneObject=cloneObject,exportable.Exportable=Exportable;var METADATA_CLASSNAME=Symbol("bloom-filters:exportable:class-name"),METADATA_FIELDS=Symbol("bloom-filters:exportable:fields"),METADATA_PARAMETERS=Symbol("bloom-filters:exportable:constructor-parameters");function Field(e,t){return void 0===e&&(e=cloneField),void 0===t&&(t=function(e){return e}),function(r,n){var o=[];Reflect.hasMetadata(METADATA_FIELDS,r)&&(o=Reflect.getMetadata(METADATA_FIELDS,r)),o.push({name:n,exporter:e,importer:t}),Reflect.defineMetadata(METADATA_FIELDS,o,r)}}function Parameter(e){return function(t,r,n){var o=new Map;Reflect.hasMetadata(METADATA_PARAMETERS,t)&&(o=Reflect.getMetadata(METADATA_PARAMETERS,t)),o.set(e,n),Reflect.defineMetadata(METADATA_PARAMETERS,o,t)}}function AutoExportable(e,t){return void 0===t&&(t=[]),function(r){if(Reflect.defineMetadata(METADATA_CLASSNAME,e,r.prototype),!Reflect.hasMetadata(METADATA_FIELDS,r.prototype)||0===t.length)throw new SyntaxError("No exported fields declared when @AutoExportable is called");Reflect.hasMetadata(METADATA_PARAMETERS,r)||Reflect.defineMetadata(METADATA_PARAMETERS,new Map,r),r.prototype.saveAsJSON=function(){var e=this,n={type:Reflect.getMetadata(METADATA_CLASSNAME,r.prototype)};return Reflect.getMetadata(METADATA_FIELDS,r.prototype).forEach((function(t){n[t.name]=t.exporter(e[t.name])})),t.forEach((function(t){n[t]=cloneField(e[t])})),n},r.fromJSON=function(e){var n=Reflect.getMetadata(METADATA_CLASSNAME,r.prototype),o=Reflect.getMetadata(METADATA_PARAMETERS,r),i=Reflect.getMetadata(METADATA_FIELDS,r.prototype);if(e.type!==n)throw new Error("Cannot create an object "+n+' from a JSON export with type "'+e.type+'"');var a=[],s=[];t.map((function(e){return{name:e,importer:function(e){return e}}})).concat(i).forEach((function(t){if(!(t.name in e))throw new Error('Invalid import: required field "'+t+'" not found in JSON export "'+e+'"');o.has(t.name)?a[o.get(t.name)]=t.importer(e[t.name]):s.push({name:t.name,value:t.importer(e[t.name])})}));var u=new(r.bind.apply(r,__spread$1([void 0],a)));return s.forEach((function(e){u[e.name]=e.value})),u}}}exportable.Field=Field,exportable.Parameter=Parameter,exportable.AutoExportable=AutoExportable;var formulas={};function optimalFilterSize(e,t){return Math.ceil(-e*Math.log(t)/Math.pow(Math.log(2),2))}function optimalHashes(e,t){return Math.ceil(e/t*Math.log(2))}Object.defineProperty(formulas,"__esModule",{value:!0}),formulas.optimalFilterSize=optimalFilterSize,formulas.optimalHashes=optimalHashes;var __extends$9=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__decorate$a=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__metadata$a=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param$8=commonjsGlobal$1&&commonjsGlobal$1.__param||function(e,t){return function(r,n){t(r,n,e)}},__importDefault$a=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bloomFilter,"__esModule",{value:!0});var base_filter_1$9=__importDefault$a(baseFilter),exportable_1$a=exportable,formulas_1$2=formulas,utils_1$8=utils$2,BloomFilter$1=function(e){function t(t,r){var n=e.call(this)||this;if(r<1)throw new Error("A BloomFilter cannot uses less than one hash function, while you tried to use "+r+".");return n._size=t,n._nbHashes=r,n._filter=utils_1$8.allocateArray(n._size,0),n._length=0,n}var r;return __extends$9(t,e),r=t,t.create=function(e,t){var n=formulas_1$2.optimalFilterSize(e,t),o=formulas_1$2.optimalHashes(n,e);return new r(n,o)},t.from=function(e,t){var n=Array.from(e),o=r.create(n.length,t);return n.forEach((function(e){return o.add(e)})),o},t.fromBytes=function(e,t){for(var n=[],o=0;o<e.length;o++){var i=utils_1$8.uint8ToBits(e[o]);n=n.concat(i)}var a=new r(n.length,t);return a._filter=n,a},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.add=function(e){for(var t=utils_1$8.getDistinctIndices(e,this._size,this._nbHashes,this.seed),r=0;r<t.length;r++)this._filter[t[r]]=1;this._length++},t.prototype.has=function(e){for(var t=utils_1$8.getDistinctIndices(e,this._size,this._nbHashes,this.seed),r=0;r<t.length;r++)if(!this._filter[t[r]])return!1;return!0},t.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},t.prototype.equals=function(e){return this._size===e._size&&this._nbHashes===e._nbHashes&&this._filter.every((function(t,r){return e._filter[r]===t}))},t.prototype.toBytes=function(){for(var e=new Uint8Array(Math.ceil(this._size/8)),t=0;t<e.length;t++){var r=this._filter.slice(8*t,8*t+8);e[t]=utils_1$8.bitsToUint8(r)}return e},__decorate$a([exportable_1$a.Field(),__metadata$a("design:type",Number)],t.prototype,"_size",void 0),__decorate$a([exportable_1$a.Field(),__metadata$a("design:type",Number)],t.prototype,"_nbHashes",void 0),__decorate$a([exportable_1$a.Field(),__metadata$a("design:type",Array)],t.prototype,"_filter",void 0),__decorate$a([exportable_1$a.Field(),__metadata$a("design:type",Number)],t.prototype,"_length",void 0),t=r=__decorate$a([exportable_1$a.AutoExportable("BloomFilter",["_seed"]),__param$8(0,exportable_1$a.Parameter("_size")),__param$8(1,exportable_1$a.Parameter("_nbHashes")),__metadata$a("design:paramtypes",[Number,Number])],t)}(base_filter_1$9.default);bloomFilter.default=BloomFilter$1;var countingBloomFilter={},__extends$8=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__decorate$9=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__metadata$9=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param$7=commonjsGlobal$1&&commonjsGlobal$1.__param||function(e,t){return function(r,n){t(r,n,e)}},__importDefault$9=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(countingBloomFilter,"__esModule",{value:!0});var base_filter_1$8=__importDefault$9(baseFilter),exportable_1$9=exportable,formulas_1$1=formulas,utils_1$7=utils$2,CountingBloomFilter=function(e){function t(t,r){var n=e.call(this)||this;if(r<1)throw new Error("A CountingBloomFilter must used at least one hash function, but you tried to use "+r+" functions. Consider increasing it.");return n._size=t,n._nbHashes=r,n._filter=utils_1$7.allocateArray(n._size,(function(){return[0,0]})),n._length=0,n}var r;return __extends$8(t,e),r=t,t.create=function(e,t){var n=formulas_1$1.optimalFilterSize(e,t);return new r(n,formulas_1$1.optimalHashes(n,e))},t.from=function(e,t){var n=Array.from(e),o=r.create(n.length,t);return n.forEach((function(e){return o.add(e)})),o},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),t.prototype.add=function(e){for(var t=utils_1$7.getDistinctIndices(e,this._size,this._nbHashes,this.seed),r=0;r<t.length;r++)this._filter[t[r]][1]+=1,this._filter[t[r]][1]>0&&(this._filter[t[r]][0]=1);this._length++},t.prototype.remove=function(e){for(var t=utils_1$7.getDistinctIndices(e,this._size,this._nbHashes,this.seed),r=0;r<t.length;r++)this._filter[t[r]][1]-=1,this._filter[t[r]][1]<=0&&(this._filter[t[r]][0]=0);return this._length--,!0},t.prototype.has=function(e){for(var t=utils_1$7.getDistinctIndices(e,this._size,this._nbHashes,this.seed),r=0;r<t.length;r++)if(!this._filter[t[r]][0])return!1;return!0},t.prototype.rate=function(){return Math.pow(1-Math.exp(-this._nbHashes*this._length/this._size),this._nbHashes)},t.prototype.equals=function(e){return this._size===e._size&&this._nbHashes===e._nbHashes&&this._length===e._length&&this._filter.every((function(t,r){return e._filter[r][0]===t[0]&&e._filter[r][1]===t[1]}))},__decorate$9([exportable_1$9.Field(),__metadata$9("design:type",Number)],t.prototype,"_size",void 0),__decorate$9([exportable_1$9.Field(),__metadata$9("design:type",Number)],t.prototype,"_nbHashes",void 0),__decorate$9([exportable_1$9.Field(),__metadata$9("design:type",Array)],t.prototype,"_filter",void 0),__decorate$9([exportable_1$9.Field(),__metadata$9("design:type",Number)],t.prototype,"_length",void 0),t=r=__decorate$9([exportable_1$9.AutoExportable("CountingBloomFilter",["_seed"]),__param$7(0,exportable_1$9.Parameter("_size")),__param$7(1,exportable_1$9.Parameter("_nbHashes")),__metadata$9("design:paramtypes",[Number,Number])],t)}(base_filter_1$8.default);countingBloomFilter.default=CountingBloomFilter;var partitionedBloomFilter={},__extends$7=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__decorate$8=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__metadata$8=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param$6=commonjsGlobal$1&&commonjsGlobal$1.__param||function(e,t){return function(r,n){t(r,n,e)}},__importDefault$8=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(partitionedBloomFilter,"__esModule",{value:!0});var base_filter_1$7=__importDefault$8(baseFilter),exportable_1$8=exportable,utils_1$6=utils$2;function computeOptimalNumberOfhashes(e,t){return Math.ceil(Math.log(e)/Math.log(t))}function computeOptimalNumberOfCells(e,t,r){return Math.ceil(e*-Math.log(t)/(Math.log(r)*Math.log(1-r)))}function computeNumberOfItems(e,t,r){return Math.ceil(e*(Math.log(t)*Math.log(1-t))/(-r*Math.log(t)))}var PartitionedBloomFilter=function(e){function t(t,r,n,o){var i=e.call(this)||this;return i._size=t,i._nbHashes=r,i._loadFactor=n,i._m=Math.ceil(i._size/i._nbHashes),i._filter=utils_1$6.allocateArray(i._nbHashes,(function(){return utils_1$6.allocateArray(i._m,0)})),i._capacity=void 0!==o?o:computeNumberOfItems(i._size,n,r),i._length=0,i}var r;return __extends$7(t,e),r=t,t.create=function(e,t,n){void 0===n&&(n=.5);var o=computeOptimalNumberOfCells(e,t,n),i=computeOptimalNumberOfhashes(t,n);return new r(o,i,n,e)},t.from=function(e,t,n){void 0===n&&(n=.5);var o=Array.from(e),i=r.create(o.length,t,n);return o.forEach((function(e){return i.add(e)})),i},Object.defineProperty(t.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadFactor",{get:function(){return this._loadFactor},enumerable:!0,configurable:!0}),t.prototype.add=function(e){for(var t=utils_1$6.getIndices(e,this._m,this._nbHashes,this.seed),r=0;r<this._nbHashes;r++)this._filter[r][t[r]]=1;this._length++},t.prototype.has=function(e){for(var t=utils_1$6.getIndices(e,this._m,this._nbHashes,this.seed),r=0;r<this._nbHashes;r++)if(!this._filter[r][t[r]])return!1;return!0},t.prototype.rate=function(){var e=this._currentload();return Math.pow(e,this._nbHashes)},t.prototype.equals=function(e){return this._size===e._size&&this._nbHashes===e._nbHashes&&this._length===e._length&&this._loadFactor===e._loadFactor&&this._filter.every((function(t,r){return e._filter[r].every((function(e,r){return t[r]===e}))}))},t.prototype._currentload=function(){return this._filter.map((function(e){return e.reduce((function(e,t){return e+t}),0)})).reduce((function(e,t){return e+t}),0)/this._size},__decorate$8([exportable_1$8.Field(),__metadata$8("design:type",Number)],t.prototype,"_size",void 0),__decorate$8([exportable_1$8.Field(),__metadata$8("design:type",Number)],t.prototype,"_nbHashes",void 0),__decorate$8([exportable_1$8.Field(),__metadata$8("design:type",Number)],t.prototype,"_loadFactor",void 0),__decorate$8([exportable_1$8.Field(),__metadata$8("design:type",Number)],t.prototype,"_m",void 0),__decorate$8([exportable_1$8.Field(),__metadata$8("design:type",Array)],t.prototype,"_filter",void 0),__decorate$8([exportable_1$8.Field(),__metadata$8("design:type",Number)],t.prototype,"_capacity",void 0),__decorate$8([exportable_1$8.Field(),__metadata$8("design:type",Number)],t.prototype,"_length",void 0),t=r=__decorate$8([exportable_1$8.AutoExportable("PartitionedBloomFilter",["_seed"]),__param$6(0,exportable_1$8.Parameter("_size")),__param$6(1,exportable_1$8.Parameter("_nbHashes")),__param$6(2,exportable_1$8.Parameter("_loadFactor")),__param$6(3,exportable_1$8.Parameter("_capacity")),__metadata$8("design:paramtypes",[Number,Number,Number,Number])],t)}(base_filter_1$7.default);partitionedBloomFilter.default=PartitionedBloomFilter;var countMinSketch={},__extends$6=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__decorate$7=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__metadata$7=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param$5=commonjsGlobal$1&&commonjsGlobal$1.__param||function(e,t){return function(r,n){t(r,n,e)}},__values=commonjsGlobal$1&&commonjsGlobal$1.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__importDefault$7=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(countMinSketch,"__esModule",{value:!0});var base_filter_1$6=__importDefault$7(baseFilter),exportable_1$7=exportable,utils_1$5=utils$2,CountMinSketch=function(e){function t(t,r){var n=e.call(this)||this;return n._columns=t,n._rows=r,n._matrix=utils_1$5.allocateArray(n._rows,(function(){return utils_1$5.allocateArray(n._columns,0)})),n._allSums=0,n}var r;return __extends$6(t,e),r=t,t.create=function(e,t){void 0===t&&(t=.999);var n=Math.ceil(Math.E/e),o=Math.ceil(Math.log(1/t));return new r(n,o)},t.from=function(e,t,n){var o,i;void 0===n&&(n=.999);var a=r.create(t,n);try{for(var s=__values(e),u=s.next();!u.done;u=s.next()){var c=u.value;a.update(c)}}catch(l){o={error:l}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(o)throw o.error}}return a},Object.defineProperty(t.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sum",{get:function(){return this._allSums},enumerable:!0,configurable:!0}),t.prototype.update=function(e,t){void 0===t&&(t=1),this._allSums+=t;for(var r=utils_1$5.getDistinctIndices(e,this._columns,this._rows,this.seed),n=0;n<this._rows;n++)this._matrix[n][r[n]]+=t},t.prototype.count=function(e){for(var t=1/0,r=utils_1$5.getDistinctIndices(e,this._columns,this._rows,this.seed),n=0;n<this._rows;n++){var o=this._matrix[n][r[n]];t=Math.min(o,t)}return t},t.prototype.equals=function(e){if(this._columns!==e._columns||this._rows!==e._rows)return!1;for(var t=0;t<this._rows;t++)for(var r=0;r<this._columns;r++)if(this._matrix[t][r]!==e._matrix[t][r])return!1;return!0},t.prototype.merge=function(e){if(this._columns!==e._columns)throw new Error("Cannot merge two sketches with different number of columns");if(this._rows!==e._rows)throw new Error("Cannot merge two sketches with different number of rows");for(var t=0;t<this._rows;t++)for(var r=0;r<this._columns;r++)this._matrix[t][r]+=e._matrix[t][r]},t.prototype.clone=function(){var e=new r(this._columns,this._rows);return e.merge(this),e.seed=this.seed,e},__decorate$7([exportable_1$7.Field(),__metadata$7("design:type",Number)],t.prototype,"_columns",void 0),__decorate$7([exportable_1$7.Field(),__metadata$7("design:type",Number)],t.prototype,"_rows",void 0),__decorate$7([exportable_1$7.Field(),__metadata$7("design:type",Array)],t.prototype,"_matrix",void 0),__decorate$7([exportable_1$7.Field(),__metadata$7("design:type",Number)],t.prototype,"_allSums",void 0),t=r=__decorate$7([exportable_1$7.AutoExportable("CountMinSketch",["_seed"]),__param$5(0,exportable_1$7.Parameter("_columns")),__param$5(1,exportable_1$7.Parameter("_rows")),__metadata$7("design:paramtypes",[Number,Number])],t)}(base_filter_1$6.default);countMinSketch.default=CountMinSketch;var hyperloglog={},__extends$5=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__decorate$6=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__metadata$6=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param$4=commonjsGlobal$1&&commonjsGlobal$1.__param||function(e,t){return function(r,n){t(r,n,e)}},__importDefault$6=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hyperloglog,"__esModule",{value:!0});var base_filter_1$5=__importDefault$6(baseFilter),exportable_1$6=exportable,utils_1$4=utils$2,TWO_POW_32=Math.pow(2,32);function computeAlpha(e){switch(e){case 16:return.673;case 32:return.697;case 64:return.709;default:return.7213/(1+1.079/e)}}var HyperLogLog=function(e){function t(t){var r=e.call(this)||this;return r._nbRegisters=t,r._nbBytesPerHash=Math.round(Math.log2(t)),r._correctionBias=computeAlpha(t),r._registers=utils_1$4.allocateArray(r._nbRegisters,0),r}var r;return __extends$5(t,e),r=t,Object.defineProperty(t.prototype,"nbRegisters",{get:function(){return this._nbRegisters},enumerable:!0,configurable:!0}),t.prototype.update=function(e){for(var t=utils_1$4.hashAsInt(e,this.seed).toString(2),r=1+parseInt(t.slice(0,this._nbBytesPerHash-1),2),n=t.slice(this._nbBytesPerHash),o=0;"1"!==n[o]&&o<n.length-1;)o++;this._registers[r]=Math.max(this._registers[r],o)},t.prototype.count=function(e){void 0===e&&(e=!1);var t=this._registers.reduce((function(e,t){return e+Math.pow(2,-t)}),0),r=this._correctionBias*Math.pow(this._nbRegisters,2)/t;return r>TWO_POW_32/30&&(r=-TWO_POW_32*Math.log(1-r/TWO_POW_32)),e&&(r=Math.round(r)),r},t.prototype.accuracy=function(){return 1.04/Math.sqrt(this._nbRegisters)},t.prototype.merge=function(e){if(this.nbRegisters!==e.nbRegisters)throw new Error("Two HyperLogLog must have the same number of registers to be merged. Tried to merge two HyperLogLog with m = "+this.nbRegisters+" and m = "+e.nbRegisters);for(var t=new r(this.nbRegisters),n=0;n<this.nbRegisters-1;n++)t._registers[n]=Math.max(this._registers[n],e._registers[n]);return t},t.prototype.equals=function(e){if(this.nbRegisters!==e.nbRegisters)return!1;for(var t=0;t<this.nbRegisters-1;t++)if(this._registers[t]!==e._registers[t])return!1;return!0},__decorate$6([exportable_1$6.Field(),__metadata$6("design:type",Number)],t.prototype,"_nbRegisters",void 0),__decorate$6([exportable_1$6.Field(),__metadata$6("design:type",Number)],t.prototype,"_nbBytesPerHash",void 0),__decorate$6([exportable_1$6.Field(),__metadata$6("design:type",Number)],t.prototype,"_correctionBias",void 0),__decorate$6([exportable_1$6.Field(),__metadata$6("design:type",Array)],t.prototype,"_registers",void 0),t=r=__decorate$6([exportable_1$6.AutoExportable("HyperLogLog",["_seed"]),__param$4(0,exportable_1$6.Parameter("_nbRegisters")),__metadata$6("design:paramtypes",[Number])],t)}(base_filter_1$5.default);hyperloglog.default=HyperLogLog;var topk={},lodash={exports:{}};
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
!function(e,t){(function(){var r,n="Expected a function",o="__lodash_hash_undefined__",i="__lodash_placeholder__",a=16,s=32,u=64,c=128,l=256,f=1/0,h=9007199254740991,d=NaN,p=4294967295,y=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",a],["flip",512],["partial",s],["partialRight",u],["rearg",l]],m="[object Arguments]",_="[object Array]",g="[object Boolean]",b="[object Date]",v="[object Error]",w="[object Function]",$="[object GeneratorFunction]",k="[object Map]",A="[object Number]",E="[object Object]",S="[object Promise]",T="[object RegExp]",B="[object Set]",x="[object String]",I="[object Symbol]",C="[object WeakMap]",D="[object ArrayBuffer]",R="[object DataView]",N="[object Float32Array]",j="[object Float64Array]",L="[object Int8Array]",P="[object Int16Array]",O="[object Int32Array]",U="[object Uint8Array]",M="[object Uint8ClampedArray]",F="[object Uint16Array]",z="[object Uint32Array]",K=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,V=RegExp(W.source),Y=RegExp(q.source),X=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ee=/^\w*$/,te=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(re.source),oe=/^\s+/,ie=/\s/,ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,se=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,ce=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,le=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,ye=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,_e=/^0o[0-7]+$/i,ge=/^(?:0|[1-9]\d*)$/,be=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ve=/($^)/,we=/['\n\r\u2028\u2029\\]/g,$e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ke="\\u2700-\\u27bf",Ae="a-z\\xdf-\\xf6\\xf8-\\xff",Ee="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Be="[']",xe="[\\ud800-\\udfff]",Ie="["+Te+"]",Ce="["+$e+"]",De="\\d+",Re="[\\u2700-\\u27bf]",Ne="["+Ae+"]",je="[^\\ud800-\\udfff"+Te+De+ke+Ae+Ee+"]",Le="\\ud83c[\\udffb-\\udfff]",Pe="[^\\ud800-\\udfff]",Oe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ue="[\\ud800-\\udbff][\\udc00-\\udfff]",Me="["+Ee+"]",Fe="(?:"+Ne+"|"+je+")",ze="(?:"+Me+"|"+je+")",Ke="(?:['](?:d|ll|m|re|s|t|ve))?",Ge="(?:['](?:D|LL|M|RE|S|T|VE))?",He="(?:"+Ce+"|"+Le+")"+"?",We="[\\ufe0e\\ufe0f]?",qe=We+He+("(?:\\u200d(?:"+[Pe,Oe,Ue].join("|")+")"+We+He+")*"),Ve="(?:"+[Re,Oe,Ue].join("|")+")"+qe,Ye="(?:"+[Pe+Ce+"?",Ce,Oe,Ue,xe].join("|")+")",Xe=RegExp(Be,"g"),Je=RegExp(Ce,"g"),Ze=RegExp(Le+"(?="+Le+")|"+Ye+qe,"g"),Qe=RegExp([Me+"?"+Ne+"+"+Ke+"(?="+[Ie,Me,"$"].join("|")+")",ze+"+"+Ge+"(?="+[Ie,Me+Fe,"$"].join("|")+")",Me+"?"+Fe+"+"+Ke,Me+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,Ve].join("|"),"g"),et=RegExp("[\\u200d\\ud800-\\udfff"+$e+Se+"]"),tt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],nt=-1,ot={};ot[N]=ot[j]=ot[L]=ot[P]=ot[O]=ot[U]=ot[M]=ot[F]=ot[z]=!0,ot[m]=ot[_]=ot[D]=ot[g]=ot[R]=ot[b]=ot[v]=ot[w]=ot[k]=ot[A]=ot[E]=ot[T]=ot[B]=ot[x]=ot[C]=!1;var it={};it[m]=it[_]=it[D]=it[R]=it[g]=it[b]=it[N]=it[j]=it[L]=it[P]=it[O]=it[k]=it[A]=it[E]=it[T]=it[B]=it[x]=it[I]=it[U]=it[M]=it[F]=it[z]=!0,it[v]=it[w]=it[C]=!1;var at={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,ut=parseInt,ct="object"==typeof commonjsGlobal$1&&commonjsGlobal$1&&commonjsGlobal$1.Object===Object&&commonjsGlobal$1,lt="object"==typeof self&&self&&self.Object===Object&&self,ft=ct||lt||Function("return this")(),ht=t&&!t.nodeType&&t,dt=ht&&e&&!e.nodeType&&e,pt=dt&&dt.exports===ht,yt=pt&&ct.process,mt=function(){try{var e=dt&&dt.require&&dt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(t){}}(),_t=mt&&mt.isArrayBuffer,gt=mt&&mt.isDate,bt=mt&&mt.isMap,vt=mt&&mt.isRegExp,wt=mt&&mt.isSet,$t=mt&&mt.isTypedArray;function kt(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function At(e,t,r,n){for(var o=-1,i=null==e?0:e.length;++o<i;){var a=e[o];t(n,a,r(a),e)}return n}function Et(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function St(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Tt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Bt(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}function xt(e,t){return!!(null==e?0:e.length)&&Ut(e,t,0)>-1}function It(e,t,r){for(var n=-1,o=null==e?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}function Ct(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}function Dt(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function Rt(e,t,r,n){var o=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++o]);++o<i;)r=t(r,e[o],o,e);return r}function Nt(e,t,r,n){var o=null==e?0:e.length;for(n&&o&&(r=e[--o]);o--;)r=t(r,e[o],o,e);return r}function jt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Lt=Kt("length");function Pt(e,t,r){var n;return r(e,(function(e,r,o){if(t(e,r,o))return n=r,!1})),n}function Ot(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function Ut(e,t,r){return t==t?function(e,t,r){var n=r-1,o=e.length;for(;++n<o;)if(e[n]===t)return n;return-1}(e,t,r):Ot(e,Ft,r)}function Mt(e,t,r,n){for(var o=r-1,i=e.length;++o<i;)if(n(e[o],t))return o;return-1}function Ft(e){return e!=e}function zt(e,t){var r=null==e?0:e.length;return r?Wt(e,t)/r:d}function Kt(e){return function(t){return null==t?r:t[e]}}function Gt(e){return function(t){return null==e?r:e[t]}}function Ht(e,t,r,n,o){return o(e,(function(e,o,i){r=n?(n=!1,e):t(r,e,o,i)})),r}function Wt(e,t){for(var n,o=-1,i=e.length;++o<i;){var a=t(e[o]);a!==r&&(n=n===r?a:n+a)}return n}function qt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Vt(e){return e?e.slice(0,fr(e)+1).replace(oe,""):e}function Yt(e){return function(t){return e(t)}}function Xt(e,t){return Ct(t,(function(t){return e[t]}))}function Jt(e,t){return e.has(t)}function Zt(e,t){for(var r=-1,n=e.length;++r<n&&Ut(t,e[r],0)>-1;);return r}function Qt(e,t){for(var r=e.length;r--&&Ut(t,e[r],0)>-1;);return r}function er(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}var tr=Gt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),rr=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function nr(e){return"\\"+at[e]}function or(e){return et.test(e)}function ir(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function ar(e,t){return function(r){return e(t(r))}}function sr(e,t){for(var r=-1,n=e.length,o=0,a=[];++r<n;){var s=e[r];s!==t&&s!==i||(e[r]=i,a[o++]=r)}return a}function ur(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function cr(e){return or(e)?function(e){var t=Ze.lastIndex=0;for(;Ze.test(e);)++t;return t}(e):Lt(e)}function lr(e){return or(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.split("")}(e)}function fr(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var hr=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var dr=function e(t){var ie,$e=(t=null==t?ft:dr.defaults(ft.Object(),t,dr.pick(ft,rt))).Array,ke=t.Date,Ae=t.Error,Ee=t.Function,Se=t.Math,Te=t.Object,Be=t.RegExp,xe=t.String,Ie=t.TypeError,Ce=$e.prototype,De=Ee.prototype,Re=Te.prototype,Ne=t["__core-js_shared__"],je=De.toString,Le=Re.hasOwnProperty,Pe=0,Oe=(ie=/[^.]+$/.exec(Ne&&Ne.keys&&Ne.keys.IE_PROTO||""))?"Symbol(src)_1."+ie:"",Ue=Re.toString,Me=je.call(Te),Fe=ft._,ze=Be("^"+je.call(Le).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=pt?t.Buffer:r,Ge=t.Symbol,He=t.Uint8Array,We=Ke?Ke.allocUnsafe:r,qe=ar(Te.getPrototypeOf,Te),Ve=Te.create,Ye=Re.propertyIsEnumerable,Ze=Ce.splice,et=Ge?Ge.isConcatSpreadable:r,at=Ge?Ge.iterator:r,ct=Ge?Ge.toStringTag:r,lt=function(){try{var e=di(Te,"defineProperty");return e({},"",{}),e}catch(t){}}(),ht=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,dt=ke&&ke.now!==ft.Date.now&&ke.now,yt=t.setTimeout!==ft.setTimeout&&t.setTimeout,mt=Se.ceil,Lt=Se.floor,Gt=Te.getOwnPropertySymbols,pr=Ke?Ke.isBuffer:r,yr=t.isFinite,mr=Ce.join,_r=ar(Te.keys,Te),gr=Se.max,br=Se.min,vr=ke.now,wr=t.parseInt,$r=Se.random,kr=Ce.reverse,Ar=di(t,"DataView"),Er=di(t,"Map"),Sr=di(t,"Promise"),Tr=di(t,"Set"),Br=di(t,"WeakMap"),xr=di(Te,"create"),Ir=Br&&new Br,Cr={},Dr=Ki(Ar),Rr=Ki(Er),Nr=Ki(Sr),jr=Ki(Tr),Lr=Ki(Br),Pr=Ge?Ge.prototype:r,Or=Pr?Pr.valueOf:r,Ur=Pr?Pr.toString:r;function Mr(e){if(as(e)&&!Ya(e)&&!(e instanceof Gr)){if(e instanceof Kr)return e;if(Le.call(e,"__wrapped__"))return Gi(e)}return new Kr(e)}var Fr=function(){function e(){}return function(t){if(!is(t))return{};if(Ve)return Ve(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function zr(){}function Kr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Gr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Hr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Wr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function qr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Vr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new qr;++t<r;)this.add(e[t])}function Yr(e){var t=this.__data__=new Wr(e);this.size=t.size}function Xr(e,t){var r=Ya(e),n=!r&&Va(e),o=!r&&!n&&Qa(e),i=!r&&!n&&!o&&ps(e),a=r||n||o||i,s=a?qt(e.length,xe):[],u=s.length;for(var c in e)!t&&!Le.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||vi(c,u))||s.push(c);return s}function Jr(e){var t=e.length;return t?e[Yn(0,t-1)]:r}function Zr(e,t){return Pi(Co(e),un(t,0,e.length))}function Qr(e){return Pi(Co(e))}function en(e,t,n){(n!==r&&!Ha(e[t],n)||n===r&&!(t in e))&&an(e,t,n)}function tn(e,t,n){var o=e[t];Le.call(e,t)&&Ha(o,n)&&(n!==r||t in e)||an(e,t,n)}function rn(e,t){for(var r=e.length;r--;)if(Ha(e[r][0],t))return r;return-1}function nn(e,t,r,n){return dn(e,(function(e,o,i){t(n,e,r(e),i)})),n}function on(e,t){return e&&Do(t,Ls(t),e)}function an(e,t,r){"__proto__"==t&&lt?lt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function sn(e,t){for(var n=-1,o=t.length,i=$e(o),a=null==e;++n<o;)i[n]=a?r:Cs(e,t[n]);return i}function un(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function cn(e,t,n,o,i,a){var s,u=1&t,c=2&t,l=4&t;if(n&&(s=i?n(e,o,i,a):n(e)),s!==r)return s;if(!is(e))return e;var f=Ya(e);if(f){if(s=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!u)return Co(e,s)}else{var h=mi(e),d=h==w||h==$;if(Qa(e))return Eo(e,u);if(h==E||h==m||d&&!i){if(s=c||d?{}:gi(e),!u)return c?function(e,t){return Do(e,yi(e),t)}(e,function(e,t){return e&&Do(t,Ps(t),e)}(s,e)):function(e,t){return Do(e,pi(e),t)}(e,on(s,e))}else{if(!it[h])return i?e:{};s=function(e,t,r){var n=e.constructor;switch(t){case D:return So(e);case g:case b:return new n(+e);case R:return function(e,t){var r=t?So(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case N:case j:case L:case P:case O:case U:case M:case F:case z:return To(e,r);case k:return new n;case A:case x:return new n(e);case T:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case B:return new n;case I:return o=e,Or?Te(Or.call(o)):{}}var o}(e,h,u)}}a||(a=new Yr);var p=a.get(e);if(p)return p;a.set(e,s),fs(e)?e.forEach((function(r){s.add(cn(r,t,n,r,e,a))})):ss(e)&&e.forEach((function(r,o){s.set(o,cn(r,t,n,o,e,a))}));var y=f?r:(l?c?ai:ii:c?Ps:Ls)(e);return Et(y||e,(function(r,o){y&&(r=e[o=r]),tn(s,o,cn(r,t,n,o,e,a))})),s}function ln(e,t,n){var o=n.length;if(null==e)return!o;for(e=Te(e);o--;){var i=n[o],a=t[i],s=e[i];if(s===r&&!(i in e)||!a(s))return!1}return!0}function fn(e,t,o){if("function"!=typeof e)throw new Ie(n);return Ri((function(){e.apply(r,o)}),t)}function hn(e,t,r,n){var o=-1,i=xt,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;r&&(t=Ct(t,Yt(r))),n?(i=It,a=!1):t.length>=200&&(i=Jt,a=!1,t=new Vr(t));e:for(;++o<s;){var l=e[o],f=null==r?l:r(l);if(l=n||0!==l?l:0,a&&f==f){for(var h=c;h--;)if(t[h]===f)continue e;u.push(l)}else i(t,f,n)||u.push(l)}return u}Mr.templateSettings={escape:X,evaluate:J,interpolate:Z,variable:"",imports:{_:Mr}},Mr.prototype=zr.prototype,Mr.prototype.constructor=Mr,Kr.prototype=Fr(zr.prototype),Kr.prototype.constructor=Kr,Gr.prototype=Fr(zr.prototype),Gr.prototype.constructor=Gr,Hr.prototype.clear=function(){this.__data__=xr?xr(null):{},this.size=0},Hr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hr.prototype.get=function(e){var t=this.__data__;if(xr){var n=t[e];return n===o?r:n}return Le.call(t,e)?t[e]:r},Hr.prototype.has=function(e){var t=this.__data__;return xr?t[e]!==r:Le.call(t,e)},Hr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=xr&&t===r?o:t,this},Wr.prototype.clear=function(){this.__data__=[],this.size=0},Wr.prototype.delete=function(e){var t=this.__data__,r=rn(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ze.call(t,r,1),--this.size,!0)},Wr.prototype.get=function(e){var t=this.__data__,n=rn(t,e);return n<0?r:t[n][1]},Wr.prototype.has=function(e){return rn(this.__data__,e)>-1},Wr.prototype.set=function(e,t){var r=this.__data__,n=rn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},qr.prototype.clear=function(){this.size=0,this.__data__={hash:new Hr,map:new(Er||Wr),string:new Hr}},qr.prototype.delete=function(e){var t=fi(this,e).delete(e);return this.size-=t?1:0,t},qr.prototype.get=function(e){return fi(this,e).get(e)},qr.prototype.has=function(e){return fi(this,e).has(e)},qr.prototype.set=function(e,t){var r=fi(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Vr.prototype.add=Vr.prototype.push=function(e){return this.__data__.set(e,o),this},Vr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.clear=function(){this.__data__=new Wr,this.size=0},Yr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Yr.prototype.get=function(e){return this.__data__.get(e)},Yr.prototype.has=function(e){return this.__data__.has(e)},Yr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Wr){var n=r.__data__;if(!Er||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new qr(n)}return r.set(e,t),this.size=r.size,this};var dn=jo(wn),pn=jo($n,!0);function yn(e,t){var r=!0;return dn(e,(function(e,n,o){return r=!!t(e,n,o)})),r}function mn(e,t,n){for(var o=-1,i=e.length;++o<i;){var a=e[o],s=t(a);if(null!=s&&(u===r?s==s&&!ds(s):n(s,u)))var u=s,c=a}return c}function _n(e,t){var r=[];return dn(e,(function(e,n,o){t(e,n,o)&&r.push(e)})),r}function gn(e,t,r,n,o){var i=-1,a=e.length;for(r||(r=bi),o||(o=[]);++i<a;){var s=e[i];t>0&&r(s)?t>1?gn(s,t-1,r,n,o):Dt(o,s):n||(o[o.length]=s)}return o}var bn=Lo(),vn=Lo(!0);function wn(e,t){return e&&bn(e,t,Ls)}function $n(e,t){return e&&vn(e,t,Ls)}function kn(e,t){return Bt(t,(function(t){return rs(e[t])}))}function An(e,t){for(var n=0,o=(t=wo(t,e)).length;null!=e&&n<o;)e=e[zi(t[n++])];return n&&n==o?e:r}function En(e,t,r){var n=t(e);return Ya(e)?n:Dt(n,r(e))}function Sn(e){return null==e?e===r?"[object Undefined]":"[object Null]":ct&&ct in Te(e)?function(e){var t=Le.call(e,ct),n=e[ct];try{e[ct]=r;var o=!0}catch(a){}var i=Ue.call(e);o&&(t?e[ct]=n:delete e[ct]);return i}(e):function(e){return Ue.call(e)}(e)}function Tn(e,t){return e>t}function Bn(e,t){return null!=e&&Le.call(e,t)}function xn(e,t){return null!=e&&t in Te(e)}function In(e,t,n){for(var o=n?It:xt,i=e[0].length,a=e.length,s=a,u=$e(a),c=1/0,l=[];s--;){var f=e[s];s&&t&&(f=Ct(f,Yt(t))),c=br(f.length,c),u[s]=!n&&(t||i>=120&&f.length>=120)?new Vr(s&&f):r}f=e[0];var h=-1,d=u[0];e:for(;++h<i&&l.length<c;){var p=f[h],y=t?t(p):p;if(p=n||0!==p?p:0,!(d?Jt(d,y):o(l,y,n))){for(s=a;--s;){var m=u[s];if(!(m?Jt(m,y):o(e[s],y,n)))continue e}d&&d.push(y),l.push(p)}}return l}function Cn(e,t,n){var o=null==(e=xi(e,t=wo(t,e)))?e:e[zi(ta(t))];return null==o?r:kt(o,e,n)}function Dn(e){return as(e)&&Sn(e)==m}function Rn(e,t,n,o,i){return e===t||(null==e||null==t||!as(e)&&!as(t)?e!=e&&t!=t:function(e,t,n,o,i,a){var s=Ya(e),u=Ya(t),c=s?_:mi(e),l=u?_:mi(t),f=(c=c==m?E:c)==E,h=(l=l==m?E:l)==E,d=c==l;if(d&&Qa(e)){if(!Qa(t))return!1;s=!0,f=!1}if(d&&!f)return a||(a=new Yr),s||ps(e)?ni(e,t,n,o,i,a):function(e,t,r,n,o,i,a){switch(r){case R:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case D:return!(e.byteLength!=t.byteLength||!i(new He(e),new He(t)));case g:case b:case A:return Ha(+e,+t);case v:return e.name==t.name&&e.message==t.message;case T:case x:return e==t+"";case k:var s=ir;case B:var u=1&n;if(s||(s=ur),e.size!=t.size&&!u)return!1;var c=a.get(e);if(c)return c==t;n|=2,a.set(e,t);var l=ni(s(e),s(t),n,o,i,a);return a.delete(e),l;case I:if(Or)return Or.call(e)==Or.call(t)}return!1}(e,t,c,n,o,i,a);if(!(1&n)){var p=f&&Le.call(e,"__wrapped__"),y=h&&Le.call(t,"__wrapped__");if(p||y){var w=p?e.value():e,$=y?t.value():t;return a||(a=new Yr),i(w,$,n,o,a)}}if(!d)return!1;return a||(a=new Yr),function(e,t,n,o,i,a){var s=1&n,u=ii(e),c=u.length,l=ii(t).length;if(c!=l&&!s)return!1;var f=c;for(;f--;){var h=u[f];if(!(s?h in t:Le.call(t,h)))return!1}var d=a.get(e),p=a.get(t);if(d&&p)return d==t&&p==e;var y=!0;a.set(e,t),a.set(t,e);var m=s;for(;++f<c;){var _=e[h=u[f]],g=t[h];if(o)var b=s?o(g,_,h,t,e,a):o(_,g,h,e,t,a);if(!(b===r?_===g||i(_,g,n,o,a):b)){y=!1;break}m||(m="constructor"==h)}if(y&&!m){var v=e.constructor,w=t.constructor;v==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(y=!1)}return a.delete(e),a.delete(t),y}(e,t,n,o,i,a)}(e,t,n,o,Rn,i))}function Nn(e,t,n,o){var i=n.length,a=i,s=!o;if(null==e)return!a;for(e=Te(e);i--;){var u=n[i];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){var c=(u=n[i])[0],l=e[c],f=u[1];if(s&&u[2]){if(l===r&&!(c in e))return!1}else{var h=new Yr;if(o)var d=o(l,f,c,e,t,h);if(!(d===r?Rn(f,l,3,o,h):d))return!1}}return!0}function jn(e){return!(!is(e)||(t=e,Oe&&Oe in t))&&(rs(e)?ze:me).test(Ki(e));var t}function Ln(e){return"function"==typeof e?e:null==e?uu:"object"==typeof e?Ya(e)?zn(e[0],e[1]):Fn(e):_u(e)}function Pn(e){if(!Ei(e))return _r(e);var t=[];for(var r in Te(e))Le.call(e,r)&&"constructor"!=r&&t.push(r);return t}function On(e){if(!is(e))return function(e){var t=[];if(null!=e)for(var r in Te(e))t.push(r);return t}(e);var t=Ei(e),r=[];for(var n in e)("constructor"!=n||!t&&Le.call(e,n))&&r.push(n);return r}function Un(e,t){return e<t}function Mn(e,t){var r=-1,n=Ja(e)?$e(e.length):[];return dn(e,(function(e,o,i){n[++r]=t(e,o,i)})),n}function Fn(e){var t=hi(e);return 1==t.length&&t[0][2]?Ti(t[0][0],t[0][1]):function(r){return r===e||Nn(r,e,t)}}function zn(e,t){return $i(e)&&Si(t)?Ti(zi(e),t):function(n){var o=Cs(n,e);return o===r&&o===t?Ds(n,e):Rn(t,o,3)}}function Kn(e,t,n,o,i){e!==t&&bn(t,(function(a,s){if(i||(i=new Yr),is(a))!function(e,t,n,o,i,a,s){var u=Ci(e,n),c=Ci(t,n),l=s.get(c);if(l)return void en(e,n,l);var f=a?a(u,c,n+"",e,t,s):r,h=f===r;if(h){var d=Ya(c),p=!d&&Qa(c),y=!d&&!p&&ps(c);f=c,d||p||y?Ya(u)?f=u:Za(u)?f=Co(u):p?(h=!1,f=Eo(c,!0)):y?(h=!1,f=To(c,!0)):f=[]:cs(c)||Va(c)?(f=u,Va(u)?f=$s(u):is(u)&&!rs(u)||(f=gi(c))):h=!1}h&&(s.set(c,f),i(f,c,o,a,s),s.delete(c));en(e,n,f)}(e,t,s,n,Kn,o,i);else{var u=o?o(Ci(e,s),a,s+"",e,t,i):r;u===r&&(u=a),en(e,s,u)}}),Ps)}function Gn(e,t){var n=e.length;if(n)return vi(t+=t<0?n:0,n)?e[t]:r}function Hn(e,t,r){t=t.length?Ct(t,(function(e){return Ya(e)?function(t){return An(t,1===e.length?e[0]:e)}:e})):[uu];var n=-1;return t=Ct(t,Yt(li())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(Mn(e,(function(e,r,o){return{criteria:Ct(t,(function(t){return t(e)})),index:++n,value:e}})),(function(e,t){return function(e,t,r){var n=-1,o=e.criteria,i=t.criteria,a=o.length,s=r.length;for(;++n<a;){var u=Bo(o[n],i[n]);if(u)return n>=s?u:u*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function Wn(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var a=t[n],s=An(e,a);r(s,a)&&eo(i,wo(a,e),s)}return i}function qn(e,t,r,n){var o=n?Mt:Ut,i=-1,a=t.length,s=e;for(e===t&&(t=Co(t)),r&&(s=Ct(e,Yt(r)));++i<a;)for(var u=0,c=t[i],l=r?r(c):c;(u=o(s,l,u,n))>-1;)s!==e&&Ze.call(s,u,1),Ze.call(e,u,1);return e}function Vn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var o=t[r];if(r==n||o!==i){var i=o;vi(o)?Ze.call(e,o,1):ho(e,o)}}return e}function Yn(e,t){return e+Lt($r()*(t-e+1))}function Xn(e,t){var r="";if(!e||t<1||t>h)return r;do{t%2&&(r+=e),(t=Lt(t/2))&&(e+=e)}while(t);return r}function Jn(e,t){return Ni(Bi(e,t,uu),e+"")}function Zn(e){return Jr(Hs(e))}function Qn(e,t){var r=Hs(e);return Pi(r,un(t,0,r.length))}function eo(e,t,n,o){if(!is(e))return e;for(var i=-1,a=(t=wo(t,e)).length,s=a-1,u=e;null!=u&&++i<a;){var c=zi(t[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=s){var f=u[c];(l=o?o(f,c,u):r)===r&&(l=is(f)?f:vi(t[i+1])?[]:{})}tn(u,c,l),u=u[c]}return e}var to=Ir?function(e,t){return Ir.set(e,t),e}:uu,ro=lt?function(e,t){return lt(e,"toString",{configurable:!0,enumerable:!1,value:iu(t),writable:!0})}:uu;function no(e){return Pi(Hs(e))}function oo(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=$e(o);++n<o;)i[n]=e[n+t];return i}function io(e,t){var r;return dn(e,(function(e,n,o){return!(r=t(e,n,o))})),!!r}function ao(e,t,r){var n=0,o=null==e?n:e.length;if("number"==typeof t&&t==t&&o<=2147483647){for(;n<o;){var i=n+o>>>1,a=e[i];null!==a&&!ds(a)&&(r?a<=t:a<t)?n=i+1:o=i}return o}return so(e,t,uu,r)}function so(e,t,n,o){var i=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,u=null===t,c=ds(t),l=t===r;i<a;){var f=Lt((i+a)/2),h=n(e[f]),d=h!==r,p=null===h,y=h==h,m=ds(h);if(s)var _=o||y;else _=l?y&&(o||d):u?y&&d&&(o||!p):c?y&&d&&!p&&(o||!m):!p&&!m&&(o?h<=t:h<t);_?i=f+1:a=f}return br(a,4294967294)}function uo(e,t){for(var r=-1,n=e.length,o=0,i=[];++r<n;){var a=e[r],s=t?t(a):a;if(!r||!Ha(s,u)){var u=s;i[o++]=0===a?0:a}}return i}function co(e){return"number"==typeof e?e:ds(e)?d:+e}function lo(e){if("string"==typeof e)return e;if(Ya(e))return Ct(e,lo)+"";if(ds(e))return Ur?Ur.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fo(e,t,r){var n=-1,o=xt,i=e.length,a=!0,s=[],u=s;if(r)a=!1,o=It;else if(i>=200){var c=t?null:Jo(e);if(c)return ur(c);a=!1,o=Jt,u=new Vr}else u=t?[]:s;e:for(;++n<i;){var l=e[n],f=t?t(l):l;if(l=r||0!==l?l:0,a&&f==f){for(var h=u.length;h--;)if(u[h]===f)continue e;t&&u.push(f),s.push(l)}else o(u,f,r)||(u!==s&&u.push(f),s.push(l))}return s}function ho(e,t){return null==(e=xi(e,t=wo(t,e)))||delete e[zi(ta(t))]}function po(e,t,r,n){return eo(e,t,r(An(e,t)),n)}function yo(e,t,r,n){for(var o=e.length,i=n?o:-1;(n?i--:++i<o)&&t(e[i],i,e););return r?oo(e,n?0:i,n?i+1:o):oo(e,n?i+1:0,n?o:i)}function mo(e,t){var r=e;return r instanceof Gr&&(r=r.value()),Rt(t,(function(e,t){return t.func.apply(t.thisArg,Dt([e],t.args))}),r)}function _o(e,t,r){var n=e.length;if(n<2)return n?fo(e[0]):[];for(var o=-1,i=$e(n);++o<n;)for(var a=e[o],s=-1;++s<n;)s!=o&&(i[o]=hn(i[o]||a,e[s],t,r));return fo(gn(i,1),t,r)}function go(e,t,n){for(var o=-1,i=e.length,a=t.length,s={};++o<i;){var u=o<a?t[o]:r;n(s,e[o],u)}return s}function bo(e){return Za(e)?e:[]}function vo(e){return"function"==typeof e?e:uu}function wo(e,t){return Ya(e)?e:$i(e,t)?[e]:Fi(ks(e))}var $o=Jn;function ko(e,t,n){var o=e.length;return n=n===r?o:n,!t&&n>=o?e:oo(e,t,n)}var Ao=ht||function(e){return ft.clearTimeout(e)};function Eo(e,t){if(t)return e.slice();var r=e.length,n=We?We(r):new e.constructor(r);return e.copy(n),n}function So(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function To(e,t){var r=t?So(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Bo(e,t){if(e!==t){var n=e!==r,o=null===e,i=e==e,a=ds(e),s=t!==r,u=null===t,c=t==t,l=ds(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||o&&s&&c||!n&&c||!i)return 1;if(!o&&!a&&!l&&e<t||l&&n&&i&&!o&&!a||u&&n&&i||!s&&i||!c)return-1}return 0}function xo(e,t,r,n){for(var o=-1,i=e.length,a=r.length,s=-1,u=t.length,c=gr(i-a,0),l=$e(u+c),f=!n;++s<u;)l[s]=t[s];for(;++o<a;)(f||o<i)&&(l[r[o]]=e[o]);for(;c--;)l[s++]=e[o++];return l}function Io(e,t,r,n){for(var o=-1,i=e.length,a=-1,s=r.length,u=-1,c=t.length,l=gr(i-s,0),f=$e(l+c),h=!n;++o<l;)f[o]=e[o];for(var d=o;++u<c;)f[d+u]=t[u];for(;++a<s;)(h||o<i)&&(f[d+r[a]]=e[o++]);return f}function Co(e,t){var r=-1,n=e.length;for(t||(t=$e(n));++r<n;)t[r]=e[r];return t}function Do(e,t,n,o){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],c=o?o(n[u],e[u],u,n,e):r;c===r&&(c=e[u]),i?an(n,u,c):tn(n,u,c)}return n}function Ro(e,t){return function(r,n){var o=Ya(r)?At:nn,i=t?t():{};return o(r,e,li(n,2),i)}}function No(e){return Jn((function(t,n){var o=-1,i=n.length,a=i>1?n[i-1]:r,s=i>2?n[2]:r;for(a=e.length>3&&"function"==typeof a?(i--,a):r,s&&wi(n[0],n[1],s)&&(a=i<3?r:a,i=1),t=Te(t);++o<i;){var u=n[o];u&&e(t,u,o,a)}return t}))}function jo(e,t){return function(r,n){if(null==r)return r;if(!Ja(r))return e(r,n);for(var o=r.length,i=t?o:-1,a=Te(r);(t?i--:++i<o)&&!1!==n(a[i],i,a););return r}}function Lo(e){return function(t,r,n){for(var o=-1,i=Te(t),a=n(t),s=a.length;s--;){var u=a[e?s:++o];if(!1===r(i[u],u,i))break}return t}}function Po(e){return function(t){var n=or(t=ks(t))?lr(t):r,o=n?n[0]:t.charAt(0),i=n?ko(n,1).join(""):t.slice(1);return o[e]()+i}}function Oo(e){return function(t){return Rt(ru(Vs(t).replace(Xe,"")),e,"")}}function Uo(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=Fr(e.prototype),n=e.apply(r,t);return is(n)?n:r}}function Mo(e){return function(t,n,o){var i=Te(t);if(!Ja(t)){var a=li(n,3);t=Ls(t),n=function(e){return a(i[e],e,i)}}var s=e(t,n,o);return s>-1?i[a?t[s]:s]:r}}function Fo(e){return oi((function(t){var o=t.length,i=o,a=Kr.prototype.thru;for(e&&t.reverse();i--;){var s=t[i];if("function"!=typeof s)throw new Ie(n);if(a&&!u&&"wrapper"==ui(s))var u=new Kr([],!0)}for(i=u?i:o;++i<o;){var c=ui(s=t[i]),l="wrapper"==c?si(s):r;u=l&&ki(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[ui(l[0])].apply(u,l[3]):1==s.length&&ki(s)?u[c]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&Ya(r))return u.plant(r).value();for(var n=0,i=o?t[n].apply(this,e):r;++n<o;)i=t[n].call(this,i);return i}}))}function zo(e,t,n,o,i,a,s,u,l,f){var h=t&c,d=1&t,p=2&t,y=24&t,m=512&t,_=p?r:Uo(e);return function r(){for(var c=arguments.length,g=$e(c),b=c;b--;)g[b]=arguments[b];if(y)var v=ci(r),w=er(g,v);if(o&&(g=xo(g,o,i,y)),a&&(g=Io(g,a,s,y)),c-=w,y&&c<f){var $=sr(g,v);return Yo(e,t,zo,r.placeholder,n,g,$,u,l,f-c)}var k=d?n:this,A=p?k[e]:e;return c=g.length,u?g=Ii(g,u):m&&c>1&&g.reverse(),h&&l<c&&(g.length=l),this&&this!==ft&&this instanceof r&&(A=_||Uo(A)),A.apply(k,g)}}function Ko(e,t){return function(r,n){return function(e,t,r,n){return wn(e,(function(e,o,i){t(n,r(e),o,i)})),n}(r,e,t(n),{})}}function Go(e,t){return function(n,o){var i;if(n===r&&o===r)return t;if(n!==r&&(i=n),o!==r){if(i===r)return o;"string"==typeof n||"string"==typeof o?(n=lo(n),o=lo(o)):(n=co(n),o=co(o)),i=e(n,o)}return i}}function Ho(e){return oi((function(t){return t=Ct(t,Yt(li())),Jn((function(r){var n=this;return e(t,(function(e){return kt(e,n,r)}))}))}))}function Wo(e,t){var n=(t=t===r?" ":lo(t)).length;if(n<2)return n?Xn(t,e):t;var o=Xn(t,mt(e/cr(t)));return or(t)?ko(lr(o),0,e).join(""):o.slice(0,e)}function qo(e){return function(t,n,o){return o&&"number"!=typeof o&&wi(t,n,o)&&(n=o=r),t=gs(t),n===r?(n=t,t=0):n=gs(n),function(e,t,r,n){for(var o=-1,i=gr(mt((t-e)/(r||1)),0),a=$e(i);i--;)a[n?i:++o]=e,e+=r;return a}(t,n,o=o===r?t<n?1:-1:gs(o),e)}}function Vo(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=ws(t),r=ws(r)),e(t,r)}}function Yo(e,t,n,o,i,a,c,l,f,h){var d=8&t;t|=d?s:u,4&(t&=~(d?u:s))||(t&=-4);var p=[e,t,i,d?a:r,d?c:r,d?r:a,d?r:c,l,f,h],y=n.apply(r,p);return ki(e)&&Di(y,p),y.placeholder=o,ji(y,e,t)}function Xo(e){var t=Se[e];return function(e,r){if(e=ws(e),(r=null==r?0:br(bs(r),292))&&yr(e)){var n=(ks(e)+"e").split("e");return+((n=(ks(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Jo=Tr&&1/ur(new Tr([,-0]))[1]==f?function(e){return new Tr(e)}:du;function Zo(e){return function(t){var r=mi(t);return r==k?ir(t):r==B?function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}(t):function(e,t){return Ct(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Qo(e,t,o,f,h,d,p,y){var m=2&t;if(!m&&"function"!=typeof e)throw new Ie(n);var _=f?f.length:0;if(_||(t&=-97,f=h=r),p=p===r?p:gr(bs(p),0),y=y===r?y:bs(y),_-=h?h.length:0,t&u){var g=f,b=h;f=h=r}var v=m?r:si(e),w=[e,t,o,f,h,g,b,d,p,y];if(v&&function(e,t){var r=e[1],n=t[1],o=r|n,a=o<131,s=n==c&&8==r||n==c&&r==l&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!a&&!s)return e;1&n&&(e[2]=t[2],o|=1&r?0:4);var u=t[3];if(u){var f=e[3];e[3]=f?xo(f,u,t[4]):u,e[4]=f?sr(e[3],i):t[4]}(u=t[5])&&(f=e[5],e[5]=f?Io(f,u,t[6]):u,e[6]=f?sr(e[5],i):t[6]);(u=t[7])&&(e[7]=u);n&c&&(e[8]=null==e[8]?t[8]:br(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=o}(w,v),e=w[0],t=w[1],o=w[2],f=w[3],h=w[4],!(y=w[9]=w[9]===r?m?0:e.length:gr(w[9]-_,0))&&24&t&&(t&=-25),t&&1!=t)$=8==t||t==a?function(e,t,n){var o=Uo(e);return function i(){for(var a=arguments.length,s=$e(a),u=a,c=ci(i);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:sr(s,c);return(a-=l.length)<n?Yo(e,t,zo,i.placeholder,r,s,l,r,r,n-a):kt(this&&this!==ft&&this instanceof i?o:e,this,s)}}(e,t,y):t!=s&&33!=t||h.length?zo.apply(r,w):function(e,t,r,n){var o=1&t,i=Uo(e);return function t(){for(var a=-1,s=arguments.length,u=-1,c=n.length,l=$e(c+s),f=this&&this!==ft&&this instanceof t?i:e;++u<c;)l[u]=n[u];for(;s--;)l[u++]=arguments[++a];return kt(f,o?r:this,l)}}(e,t,o,f);else var $=function(e,t,r){var n=1&t,o=Uo(e);return function t(){return(this&&this!==ft&&this instanceof t?o:e).apply(n?r:this,arguments)}}(e,t,o);return ji((v?to:Di)($,w),e,t)}function ei(e,t,n,o){return e===r||Ha(e,Re[n])&&!Le.call(o,n)?t:e}function ti(e,t,n,o,i,a){return is(e)&&is(t)&&(a.set(t,e),Kn(e,t,r,ti,a),a.delete(t)),e}function ri(e){return cs(e)?r:e}function ni(e,t,n,o,i,a){var s=1&n,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(e),f=a.get(t);if(l&&f)return l==t&&f==e;var h=-1,d=!0,p=2&n?new Vr:r;for(a.set(e,t),a.set(t,e);++h<u;){var y=e[h],m=t[h];if(o)var _=s?o(m,y,h,t,e,a):o(y,m,h,e,t,a);if(_!==r){if(_)continue;d=!1;break}if(p){if(!jt(t,(function(e,t){if(!Jt(p,t)&&(y===e||i(y,e,n,o,a)))return p.push(t)}))){d=!1;break}}else if(y!==m&&!i(y,m,n,o,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function oi(e){return Ni(Bi(e,r,Xi),e+"")}function ii(e){return En(e,Ls,pi)}function ai(e){return En(e,Ps,yi)}var si=Ir?function(e){return Ir.get(e)}:du;function ui(e){for(var t=e.name+"",r=Cr[t],n=Le.call(Cr,t)?r.length:0;n--;){var o=r[n],i=o.func;if(null==i||i==e)return o.name}return t}function ci(e){return(Le.call(Mr,"placeholder")?Mr:e).placeholder}function li(){var e=Mr.iteratee||cu;return e=e===cu?Ln:e,arguments.length?e(arguments[0],arguments[1]):e}function fi(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function hi(e){for(var t=Ls(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,Si(o)]}return t}function di(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return jn(n)?n:r}var pi=Gt?function(e){return null==e?[]:(e=Te(e),Bt(Gt(e),(function(t){return Ye.call(e,t)})))}:vu,yi=Gt?function(e){for(var t=[];e;)Dt(t,pi(e)),e=qe(e);return t}:vu,mi=Sn;function _i(e,t,r){for(var n=-1,o=(t=wo(t,e)).length,i=!1;++n<o;){var a=zi(t[n]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&os(o)&&vi(a,o)&&(Ya(e)||Va(e))}function gi(e){return"function"!=typeof e.constructor||Ei(e)?{}:Fr(qe(e))}function bi(e){return Ya(e)||Va(e)||!!(et&&e&&e[et])}function vi(e,t){var r=typeof e;return!!(t=null==t?h:t)&&("number"==r||"symbol"!=r&&ge.test(e))&&e>-1&&e%1==0&&e<t}function wi(e,t,r){if(!is(r))return!1;var n=typeof t;return!!("number"==n?Ja(r)&&vi(t,r.length):"string"==n&&t in r)&&Ha(r[t],e)}function $i(e,t){if(Ya(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!ds(e))||(ee.test(e)||!Q.test(e)||null!=t&&e in Te(t))}function ki(e){var t=ui(e),r=Mr[t];if("function"!=typeof r||!(t in Gr.prototype))return!1;if(e===r)return!0;var n=si(r);return!!n&&e===n[0]}(Ar&&mi(new Ar(new ArrayBuffer(1)))!=R||Er&&mi(new Er)!=k||Sr&&mi(Sr.resolve())!=S||Tr&&mi(new Tr)!=B||Br&&mi(new Br)!=C)&&(mi=function(e){var t=Sn(e),n=t==E?e.constructor:r,o=n?Ki(n):"";if(o)switch(o){case Dr:return R;case Rr:return k;case Nr:return S;case jr:return B;case Lr:return C}return t});var Ai=Ne?rs:wu;function Ei(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function Si(e){return e==e&&!is(e)}function Ti(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Te(n)))}}function Bi(e,t,n){return t=gr(t===r?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=gr(r.length-t,0),a=$e(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=$e(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),kt(e,this,s)}}function xi(e,t){return t.length<2?e:An(e,oo(t,0,-1))}function Ii(e,t){for(var n=e.length,o=br(t.length,n),i=Co(e);o--;){var a=t[o];e[o]=vi(a,n)?i[a]:r}return e}function Ci(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Di=Li(to),Ri=yt||function(e,t){return ft.setTimeout(e,t)},Ni=Li(ro);function ji(e,t,r){var n=t+"";return Ni(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(ae,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return Et(y,(function(r){var n="_."+r[0];t&r[1]&&!xt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(se);return t?t[1].split(ue):[]}(n),r)))}function Li(e){var t=0,n=0;return function(){var o=vr(),i=16-(o-n);if(n=o,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Pi(e,t){var n=-1,o=e.length,i=o-1;for(t=t===r?o:t;++n<t;){var a=Yn(n,i),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Oi,Ui,Mi,Fi=(Oi=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(te,(function(e,r,n,o){t.push(n?o.replace(fe,"$1"):r||e)})),t},Ui=Ua(Oi,(function(e){return 500===Mi.size&&Mi.clear(),e})),Mi=Ui.cache,Ui);function zi(e){if("string"==typeof e||ds(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ki(e){if(null!=e){try{return je.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Gi(e){if(e instanceof Gr)return e.clone();var t=new Kr(e.__wrapped__,e.__chain__);return t.__actions__=Co(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Hi=Jn((function(e,t){return Za(e)?hn(e,gn(t,1,Za,!0)):[]})),Wi=Jn((function(e,t){var n=ta(t);return Za(n)&&(n=r),Za(e)?hn(e,gn(t,1,Za,!0),li(n,2)):[]})),qi=Jn((function(e,t){var n=ta(t);return Za(n)&&(n=r),Za(e)?hn(e,gn(t,1,Za,!0),r,n):[]}));function Vi(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:bs(r);return o<0&&(o=gr(n+o,0)),Ot(e,li(t,3),o)}function Yi(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var i=o-1;return n!==r&&(i=bs(n),i=n<0?gr(o+i,0):br(i,o-1)),Ot(e,li(t,3),i,!0)}function Xi(e){return(null==e?0:e.length)?gn(e,1):[]}function Ji(e){return e&&e.length?e[0]:r}var Zi=Jn((function(e){var t=Ct(e,bo);return t.length&&t[0]===e[0]?In(t):[]})),Qi=Jn((function(e){var t=ta(e),n=Ct(e,bo);return t===ta(n)?t=r:n.pop(),n.length&&n[0]===e[0]?In(n,li(t,2)):[]})),ea=Jn((function(e){var t=ta(e),n=Ct(e,bo);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?In(n,r,t):[]}));function ta(e){var t=null==e?0:e.length;return t?e[t-1]:r}var ra=Jn(na);function na(e,t){return e&&e.length&&t&&t.length?qn(e,t):e}var oa=oi((function(e,t){var r=null==e?0:e.length,n=sn(e,t);return Vn(e,Ct(t,(function(e){return vi(e,r)?+e:e})).sort(Bo)),n}));function ia(e){return null==e?e:kr.call(e)}var aa=Jn((function(e){return fo(gn(e,1,Za,!0))})),sa=Jn((function(e){var t=ta(e);return Za(t)&&(t=r),fo(gn(e,1,Za,!0),li(t,2))})),ua=Jn((function(e){var t=ta(e);return t="function"==typeof t?t:r,fo(gn(e,1,Za,!0),r,t)}));function ca(e){if(!e||!e.length)return[];var t=0;return e=Bt(e,(function(e){if(Za(e))return t=gr(e.length,t),!0})),qt(t,(function(t){return Ct(e,Kt(t))}))}function la(e,t){if(!e||!e.length)return[];var n=ca(e);return null==t?n:Ct(n,(function(e){return kt(t,r,e)}))}var fa=Jn((function(e,t){return Za(e)?hn(e,t):[]})),ha=Jn((function(e){return _o(Bt(e,Za))})),da=Jn((function(e){var t=ta(e);return Za(t)&&(t=r),_o(Bt(e,Za),li(t,2))})),pa=Jn((function(e){var t=ta(e);return t="function"==typeof t?t:r,_o(Bt(e,Za),r,t)})),ya=Jn(ca);var ma=Jn((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,la(e,n)}));function _a(e){var t=Mr(e);return t.__chain__=!0,t}function ga(e,t){return t(e)}var ba=oi((function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,i=function(t){return sn(t,e)};return!(t>1||this.__actions__.length)&&o instanceof Gr&&vi(n)?((o=o.slice(n,+n+(t?1:0))).__actions__.push({func:ga,args:[i],thisArg:r}),new Kr(o,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(i)}));var va=Ro((function(e,t,r){Le.call(e,r)?++e[r]:an(e,r,1)}));var wa=Mo(Vi),$a=Mo(Yi);function ka(e,t){return(Ya(e)?Et:dn)(e,li(t,3))}function Aa(e,t){return(Ya(e)?St:pn)(e,li(t,3))}var Ea=Ro((function(e,t,r){Le.call(e,r)?e[r].push(t):an(e,r,[t])}));var Sa=Jn((function(e,t,r){var n=-1,o="function"==typeof t,i=Ja(e)?$e(e.length):[];return dn(e,(function(e){i[++n]=o?kt(t,e,r):Cn(e,t,r)})),i})),Ta=Ro((function(e,t,r){an(e,r,t)}));function Ba(e,t){return(Ya(e)?Ct:Mn)(e,li(t,3))}var xa=Ro((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var Ia=Jn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&wi(e,t[0],t[1])?t=[]:r>2&&wi(t[0],t[1],t[2])&&(t=[t[0]]),Hn(e,gn(t,1),[])})),Ca=dt||function(){return ft.Date.now()};function Da(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Qo(e,c,r,r,r,r,t)}function Ra(e,t){var o;if("function"!=typeof t)throw new Ie(n);return e=bs(e),function(){return--e>0&&(o=t.apply(this,arguments)),e<=1&&(t=r),o}}var Na=Jn((function(e,t,r){var n=1;if(r.length){var o=sr(r,ci(Na));n|=s}return Qo(e,n,t,r,o)})),ja=Jn((function(e,t,r){var n=3;if(r.length){var o=sr(r,ci(ja));n|=s}return Qo(t,n,e,r,o)}));function La(e,t,o){var i,a,s,u,c,l,f=0,h=!1,d=!1,p=!0;if("function"!=typeof e)throw new Ie(n);function y(t){var n=i,o=a;return i=a=r,f=t,u=e.apply(o,n)}function m(e){return f=e,c=Ri(g,t),h?y(e):u}function _(e){var n=e-l;return l===r||n>=t||n<0||d&&e-f>=s}function g(){var e=Ca();if(_(e))return b(e);c=Ri(g,function(e){var r=t-(e-l);return d?br(r,s-(e-f)):r}(e))}function b(e){return c=r,p&&i?y(e):(i=a=r,u)}function v(){var e=Ca(),n=_(e);if(i=arguments,a=this,l=e,n){if(c===r)return m(l);if(d)return Ao(c),c=Ri(g,t),y(l)}return c===r&&(c=Ri(g,t)),u}return t=ws(t)||0,is(o)&&(h=!!o.leading,s=(d="maxWait"in o)?gr(ws(o.maxWait)||0,t):s,p="trailing"in o?!!o.trailing:p),v.cancel=function(){c!==r&&Ao(c),f=0,i=l=a=c=r},v.flush=function(){return c===r?u:b(Ca())},v}var Pa=Jn((function(e,t){return fn(e,1,t)})),Oa=Jn((function(e,t,r){return fn(e,ws(t)||0,r)}));function Ua(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ie(n);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Ua.Cache||qr),r}function Ma(e){if("function"!=typeof e)throw new Ie(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ua.Cache=qr;var Fa=$o((function(e,t){var r=(t=1==t.length&&Ya(t[0])?Ct(t[0],Yt(li())):Ct(gn(t,1),Yt(li()))).length;return Jn((function(n){for(var o=-1,i=br(n.length,r);++o<i;)n[o]=t[o].call(this,n[o]);return kt(e,this,n)}))})),za=Jn((function(e,t){var n=sr(t,ci(za));return Qo(e,s,r,t,n)})),Ka=Jn((function(e,t){var n=sr(t,ci(Ka));return Qo(e,u,r,t,n)})),Ga=oi((function(e,t){return Qo(e,l,r,r,r,t)}));function Ha(e,t){return e===t||e!=e&&t!=t}var Wa=Vo(Tn),qa=Vo((function(e,t){return e>=t})),Va=Dn(function(){return arguments}())?Dn:function(e){return as(e)&&Le.call(e,"callee")&&!Ye.call(e,"callee")},Ya=$e.isArray,Xa=_t?Yt(_t):function(e){return as(e)&&Sn(e)==D};function Ja(e){return null!=e&&os(e.length)&&!rs(e)}function Za(e){return as(e)&&Ja(e)}var Qa=pr||wu,es=gt?Yt(gt):function(e){return as(e)&&Sn(e)==b};function ts(e){if(!as(e))return!1;var t=Sn(e);return t==v||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!cs(e)}function rs(e){if(!is(e))return!1;var t=Sn(e);return t==w||t==$||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ns(e){return"number"==typeof e&&e==bs(e)}function os(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=h}function is(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function as(e){return null!=e&&"object"==typeof e}var ss=bt?Yt(bt):function(e){return as(e)&&mi(e)==k};function us(e){return"number"==typeof e||as(e)&&Sn(e)==A}function cs(e){if(!as(e)||Sn(e)!=E)return!1;var t=qe(e);if(null===t)return!0;var r=Le.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&je.call(r)==Me}var ls=vt?Yt(vt):function(e){return as(e)&&Sn(e)==T};var fs=wt?Yt(wt):function(e){return as(e)&&mi(e)==B};function hs(e){return"string"==typeof e||!Ya(e)&&as(e)&&Sn(e)==x}function ds(e){return"symbol"==typeof e||as(e)&&Sn(e)==I}var ps=$t?Yt($t):function(e){return as(e)&&os(e.length)&&!!ot[Sn(e)]};var ys=Vo(Un),ms=Vo((function(e,t){return e<=t}));function _s(e){if(!e)return[];if(Ja(e))return hs(e)?lr(e):Co(e);if(at&&e[at])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[at]());var t=mi(e);return(t==k?ir:t==B?ur:Hs)(e)}function gs(e){return e?(e=ws(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function bs(e){var t=gs(e),r=t%1;return t==t?r?t-r:t:0}function vs(e){return e?un(bs(e),0,p):0}function ws(e){if("number"==typeof e)return e;if(ds(e))return d;if(is(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=is(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Vt(e);var r=ye.test(e);return r||_e.test(e)?ut(e.slice(2),r?2:8):pe.test(e)?d:+e}function $s(e){return Do(e,Ps(e))}function ks(e){return null==e?"":lo(e)}var As=No((function(e,t){if(Ei(t)||Ja(t))Do(t,Ls(t),e);else for(var r in t)Le.call(t,r)&&tn(e,r,t[r])})),Es=No((function(e,t){Do(t,Ps(t),e)})),Ss=No((function(e,t,r,n){Do(t,Ps(t),e,n)})),Ts=No((function(e,t,r,n){Do(t,Ls(t),e,n)})),Bs=oi(sn);var xs=Jn((function(e,t){e=Te(e);var n=-1,o=t.length,i=o>2?t[2]:r;for(i&&wi(t[0],t[1],i)&&(o=1);++n<o;)for(var a=t[n],s=Ps(a),u=-1,c=s.length;++u<c;){var l=s[u],f=e[l];(f===r||Ha(f,Re[l])&&!Le.call(e,l))&&(e[l]=a[l])}return e})),Is=Jn((function(e){return e.push(r,ti),kt(Us,r,e)}));function Cs(e,t,n){var o=null==e?r:An(e,t);return o===r?n:o}function Ds(e,t){return null!=e&&_i(e,t,xn)}var Rs=Ko((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=r}),iu(uu)),Ns=Ko((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),Le.call(e,t)?e[t].push(r):e[t]=[r]}),li),js=Jn(Cn);function Ls(e){return Ja(e)?Xr(e):Pn(e)}function Ps(e){return Ja(e)?Xr(e,!0):On(e)}var Os=No((function(e,t,r){Kn(e,t,r)})),Us=No((function(e,t,r,n){Kn(e,t,r,n)})),Ms=oi((function(e,t){var r={};if(null==e)return r;var n=!1;t=Ct(t,(function(t){return t=wo(t,e),n||(n=t.length>1),t})),Do(e,ai(e),r),n&&(r=cn(r,7,ri));for(var o=t.length;o--;)ho(r,t[o]);return r}));var Fs=oi((function(e,t){return null==e?{}:function(e,t){return Wn(e,t,(function(t,r){return Ds(e,r)}))}(e,t)}));function zs(e,t){if(null==e)return{};var r=Ct(ai(e),(function(e){return[e]}));return t=li(t),Wn(e,r,(function(e,r){return t(e,r[0])}))}var Ks=Zo(Ls),Gs=Zo(Ps);function Hs(e){return null==e?[]:Xt(e,Ls(e))}var Ws=Oo((function(e,t,r){return t=t.toLowerCase(),e+(r?qs(t):t)}));function qs(e){return tu(ks(e).toLowerCase())}function Vs(e){return(e=ks(e))&&e.replace(be,tr).replace(Je,"")}var Ys=Oo((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Xs=Oo((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Js=Po("toLowerCase");var Zs=Oo((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));var Qs=Oo((function(e,t,r){return e+(r?" ":"")+tu(t)}));var eu=Oo((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),tu=Po("toUpperCase");function ru(e,t,n){return e=ks(e),(t=n?r:t)===r?function(e){return tt.test(e)}(e)?function(e){return e.match(Qe)||[]}(e):function(e){return e.match(ce)||[]}(e):e.match(t)||[]}var nu=Jn((function(e,t){try{return kt(e,r,t)}catch(n){return ts(n)?n:new Ae(n)}})),ou=oi((function(e,t){return Et(t,(function(t){t=zi(t),an(e,t,Na(e[t],e))})),e}));function iu(e){return function(){return e}}var au=Fo(),su=Fo(!0);function uu(e){return e}function cu(e){return Ln("function"==typeof e?e:cn(e,1))}var lu=Jn((function(e,t){return function(r){return Cn(r,e,t)}})),fu=Jn((function(e,t){return function(r){return Cn(e,r,t)}}));function hu(e,t,r){var n=Ls(t),o=kn(t,n);null!=r||is(t)&&(o.length||!n.length)||(r=t,t=e,e=this,o=kn(t,Ls(t)));var i=!(is(r)&&"chain"in r&&!r.chain),a=rs(e);return Et(o,(function(r){var n=t[r];e[r]=n,a&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__),o=r.__actions__=Co(this.__actions__);return o.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Dt([this.value()],arguments))})})),e}function du(){}var pu=Ho(Ct),yu=Ho(Tt),mu=Ho(jt);function _u(e){return $i(e)?Kt(zi(e)):function(e){return function(t){return An(t,e)}}(e)}var gu=qo(),bu=qo(!0);function vu(){return[]}function wu(){return!1}var $u=Go((function(e,t){return e+t}),0),ku=Xo("ceil"),Au=Go((function(e,t){return e/t}),1),Eu=Xo("floor");var Su,Tu=Go((function(e,t){return e*t}),1),Bu=Xo("round"),xu=Go((function(e,t){return e-t}),0);return Mr.after=function(e,t){if("function"!=typeof t)throw new Ie(n);return e=bs(e),function(){if(--e<1)return t.apply(this,arguments)}},Mr.ary=Da,Mr.assign=As,Mr.assignIn=Es,Mr.assignInWith=Ss,Mr.assignWith=Ts,Mr.at=Bs,Mr.before=Ra,Mr.bind=Na,Mr.bindAll=ou,Mr.bindKey=ja,Mr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ya(e)?e:[e]},Mr.chain=_a,Mr.chunk=function(e,t,n){t=(n?wi(e,t,n):t===r)?1:gr(bs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var i=0,a=0,s=$e(mt(o/t));i<o;)s[a++]=oo(e,i,i+=t);return s},Mr.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,o=[];++t<r;){var i=e[t];i&&(o[n++]=i)}return o},Mr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=$e(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Dt(Ya(r)?Co(r):[r],gn(t,1))},Mr.cond=function(e){var t=null==e?0:e.length,r=li();return e=t?Ct(e,(function(e){if("function"!=typeof e[1])throw new Ie(n);return[r(e[0]),e[1]]})):[],Jn((function(r){for(var n=-1;++n<t;){var o=e[n];if(kt(o[0],this,r))return kt(o[1],this,r)}}))},Mr.conforms=function(e){return function(e){var t=Ls(e);return function(r){return ln(r,e,t)}}(cn(e,1))},Mr.constant=iu,Mr.countBy=va,Mr.create=function(e,t){var r=Fr(e);return null==t?r:on(r,t)},Mr.curry=function e(t,n,o){var i=Qo(t,8,r,r,r,r,r,n=o?r:n);return i.placeholder=e.placeholder,i},Mr.curryRight=function e(t,n,o){var i=Qo(t,a,r,r,r,r,r,n=o?r:n);return i.placeholder=e.placeholder,i},Mr.debounce=La,Mr.defaults=xs,Mr.defaultsDeep=Is,Mr.defer=Pa,Mr.delay=Oa,Mr.difference=Hi,Mr.differenceBy=Wi,Mr.differenceWith=qi,Mr.drop=function(e,t,n){var o=null==e?0:e.length;return o?oo(e,(t=n||t===r?1:bs(t))<0?0:t,o):[]},Mr.dropRight=function(e,t,n){var o=null==e?0:e.length;return o?oo(e,0,(t=o-(t=n||t===r?1:bs(t)))<0?0:t):[]},Mr.dropRightWhile=function(e,t){return e&&e.length?yo(e,li(t,3),!0,!0):[]},Mr.dropWhile=function(e,t){return e&&e.length?yo(e,li(t,3),!0):[]},Mr.fill=function(e,t,n,o){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&wi(e,t,n)&&(n=0,o=i),function(e,t,n,o){var i=e.length;for((n=bs(n))<0&&(n=-n>i?0:i+n),(o=o===r||o>i?i:bs(o))<0&&(o+=i),o=n>o?0:vs(o);n<o;)e[n++]=t;return e}(e,t,n,o)):[]},Mr.filter=function(e,t){return(Ya(e)?Bt:_n)(e,li(t,3))},Mr.flatMap=function(e,t){return gn(Ba(e,t),1)},Mr.flatMapDeep=function(e,t){return gn(Ba(e,t),f)},Mr.flatMapDepth=function(e,t,n){return n=n===r?1:bs(n),gn(Ba(e,t),n)},Mr.flatten=Xi,Mr.flattenDeep=function(e){return(null==e?0:e.length)?gn(e,f):[]},Mr.flattenDepth=function(e,t){return(null==e?0:e.length)?gn(e,t=t===r?1:bs(t)):[]},Mr.flip=function(e){return Qo(e,512)},Mr.flow=au,Mr.flowRight=su,Mr.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var o=e[t];n[o[0]]=o[1]}return n},Mr.functions=function(e){return null==e?[]:kn(e,Ls(e))},Mr.functionsIn=function(e){return null==e?[]:kn(e,Ps(e))},Mr.groupBy=Ea,Mr.initial=function(e){return(null==e?0:e.length)?oo(e,0,-1):[]},Mr.intersection=Zi,Mr.intersectionBy=Qi,Mr.intersectionWith=ea,Mr.invert=Rs,Mr.invertBy=Ns,Mr.invokeMap=Sa,Mr.iteratee=cu,Mr.keyBy=Ta,Mr.keys=Ls,Mr.keysIn=Ps,Mr.map=Ba,Mr.mapKeys=function(e,t){var r={};return t=li(t,3),wn(e,(function(e,n,o){an(r,t(e,n,o),e)})),r},Mr.mapValues=function(e,t){var r={};return t=li(t,3),wn(e,(function(e,n,o){an(r,n,t(e,n,o))})),r},Mr.matches=function(e){return Fn(cn(e,1))},Mr.matchesProperty=function(e,t){return zn(e,cn(t,1))},Mr.memoize=Ua,Mr.merge=Os,Mr.mergeWith=Us,Mr.method=lu,Mr.methodOf=fu,Mr.mixin=hu,Mr.negate=Ma,Mr.nthArg=function(e){return e=bs(e),Jn((function(t){return Gn(t,e)}))},Mr.omit=Ms,Mr.omitBy=function(e,t){return zs(e,Ma(li(t)))},Mr.once=function(e){return Ra(2,e)},Mr.orderBy=function(e,t,n,o){return null==e?[]:(Ya(t)||(t=null==t?[]:[t]),Ya(n=o?r:n)||(n=null==n?[]:[n]),Hn(e,t,n))},Mr.over=pu,Mr.overArgs=Fa,Mr.overEvery=yu,Mr.overSome=mu,Mr.partial=za,Mr.partialRight=Ka,Mr.partition=xa,Mr.pick=Fs,Mr.pickBy=zs,Mr.property=_u,Mr.propertyOf=function(e){return function(t){return null==e?r:An(e,t)}},Mr.pull=ra,Mr.pullAll=na,Mr.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?qn(e,t,li(r,2)):e},Mr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?qn(e,t,r,n):e},Mr.pullAt=oa,Mr.range=gu,Mr.rangeRight=bu,Mr.rearg=Ga,Mr.reject=function(e,t){return(Ya(e)?Bt:_n)(e,Ma(li(t,3)))},Mr.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,o=[],i=e.length;for(t=li(t,3);++n<i;){var a=e[n];t(a,n,e)&&(r.push(a),o.push(n))}return Vn(e,o),r},Mr.rest=function(e,t){if("function"!=typeof e)throw new Ie(n);return Jn(e,t=t===r?t:bs(t))},Mr.reverse=ia,Mr.sampleSize=function(e,t,n){return t=(n?wi(e,t,n):t===r)?1:bs(t),(Ya(e)?Zr:Qn)(e,t)},Mr.set=function(e,t,r){return null==e?e:eo(e,t,r)},Mr.setWith=function(e,t,n,o){return o="function"==typeof o?o:r,null==e?e:eo(e,t,n,o)},Mr.shuffle=function(e){return(Ya(e)?Qr:no)(e)},Mr.slice=function(e,t,n){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&wi(e,t,n)?(t=0,n=o):(t=null==t?0:bs(t),n=n===r?o:bs(n)),oo(e,t,n)):[]},Mr.sortBy=Ia,Mr.sortedUniq=function(e){return e&&e.length?uo(e):[]},Mr.sortedUniqBy=function(e,t){return e&&e.length?uo(e,li(t,2)):[]},Mr.split=function(e,t,n){return n&&"number"!=typeof n&&wi(e,t,n)&&(t=n=r),(n=n===r?p:n>>>0)?(e=ks(e))&&("string"==typeof t||null!=t&&!ls(t))&&!(t=lo(t))&&or(e)?ko(lr(e),0,n):e.split(t,n):[]},Mr.spread=function(e,t){if("function"!=typeof e)throw new Ie(n);return t=null==t?0:gr(bs(t),0),Jn((function(r){var n=r[t],o=ko(r,0,t);return n&&Dt(o,n),kt(e,this,o)}))},Mr.tail=function(e){var t=null==e?0:e.length;return t?oo(e,1,t):[]},Mr.take=function(e,t,n){return e&&e.length?oo(e,0,(t=n||t===r?1:bs(t))<0?0:t):[]},Mr.takeRight=function(e,t,n){var o=null==e?0:e.length;return o?oo(e,(t=o-(t=n||t===r?1:bs(t)))<0?0:t,o):[]},Mr.takeRightWhile=function(e,t){return e&&e.length?yo(e,li(t,3),!1,!0):[]},Mr.takeWhile=function(e,t){return e&&e.length?yo(e,li(t,3)):[]},Mr.tap=function(e,t){return t(e),e},Mr.throttle=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw new Ie(n);return is(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),La(e,t,{leading:o,maxWait:t,trailing:i})},Mr.thru=ga,Mr.toArray=_s,Mr.toPairs=Ks,Mr.toPairsIn=Gs,Mr.toPath=function(e){return Ya(e)?Ct(e,zi):ds(e)?[e]:Co(Fi(ks(e)))},Mr.toPlainObject=$s,Mr.transform=function(e,t,r){var n=Ya(e),o=n||Qa(e)||ps(e);if(t=li(t,4),null==r){var i=e&&e.constructor;r=o?n?new i:[]:is(e)&&rs(i)?Fr(qe(e)):{}}return(o?Et:wn)(e,(function(e,n,o){return t(r,e,n,o)})),r},Mr.unary=function(e){return Da(e,1)},Mr.union=aa,Mr.unionBy=sa,Mr.unionWith=ua,Mr.uniq=function(e){return e&&e.length?fo(e):[]},Mr.uniqBy=function(e,t){return e&&e.length?fo(e,li(t,2)):[]},Mr.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?fo(e,r,t):[]},Mr.unset=function(e,t){return null==e||ho(e,t)},Mr.unzip=ca,Mr.unzipWith=la,Mr.update=function(e,t,r){return null==e?e:po(e,t,vo(r))},Mr.updateWith=function(e,t,n,o){return o="function"==typeof o?o:r,null==e?e:po(e,t,vo(n),o)},Mr.values=Hs,Mr.valuesIn=function(e){return null==e?[]:Xt(e,Ps(e))},Mr.without=fa,Mr.words=ru,Mr.wrap=function(e,t){return za(vo(t),e)},Mr.xor=ha,Mr.xorBy=da,Mr.xorWith=pa,Mr.zip=ya,Mr.zipObject=function(e,t){return go(e||[],t||[],tn)},Mr.zipObjectDeep=function(e,t){return go(e||[],t||[],eo)},Mr.zipWith=ma,Mr.entries=Ks,Mr.entriesIn=Gs,Mr.extend=Es,Mr.extendWith=Ss,hu(Mr,Mr),Mr.add=$u,Mr.attempt=nu,Mr.camelCase=Ws,Mr.capitalize=qs,Mr.ceil=ku,Mr.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=ws(n))==n?n:0),t!==r&&(t=(t=ws(t))==t?t:0),un(ws(e),t,n)},Mr.clone=function(e){return cn(e,4)},Mr.cloneDeep=function(e){return cn(e,5)},Mr.cloneDeepWith=function(e,t){return cn(e,5,t="function"==typeof t?t:r)},Mr.cloneWith=function(e,t){return cn(e,4,t="function"==typeof t?t:r)},Mr.conformsTo=function(e,t){return null==t||ln(e,t,Ls(t))},Mr.deburr=Vs,Mr.defaultTo=function(e,t){return null==e||e!=e?t:e},Mr.divide=Au,Mr.endsWith=function(e,t,n){e=ks(e),t=lo(t);var o=e.length,i=n=n===r?o:un(bs(n),0,o);return(n-=t.length)>=0&&e.slice(n,i)==t},Mr.eq=Ha,Mr.escape=function(e){return(e=ks(e))&&Y.test(e)?e.replace(q,rr):e},Mr.escapeRegExp=function(e){return(e=ks(e))&&ne.test(e)?e.replace(re,"\\$&"):e},Mr.every=function(e,t,n){var o=Ya(e)?Tt:yn;return n&&wi(e,t,n)&&(t=r),o(e,li(t,3))},Mr.find=wa,Mr.findIndex=Vi,Mr.findKey=function(e,t){return Pt(e,li(t,3),wn)},Mr.findLast=$a,Mr.findLastIndex=Yi,Mr.findLastKey=function(e,t){return Pt(e,li(t,3),$n)},Mr.floor=Eu,Mr.forEach=ka,Mr.forEachRight=Aa,Mr.forIn=function(e,t){return null==e?e:bn(e,li(t,3),Ps)},Mr.forInRight=function(e,t){return null==e?e:vn(e,li(t,3),Ps)},Mr.forOwn=function(e,t){return e&&wn(e,li(t,3))},Mr.forOwnRight=function(e,t){return e&&$n(e,li(t,3))},Mr.get=Cs,Mr.gt=Wa,Mr.gte=qa,Mr.has=function(e,t){return null!=e&&_i(e,t,Bn)},Mr.hasIn=Ds,Mr.head=Ji,Mr.identity=uu,Mr.includes=function(e,t,r,n){e=Ja(e)?e:Hs(e),r=r&&!n?bs(r):0;var o=e.length;return r<0&&(r=gr(o+r,0)),hs(e)?r<=o&&e.indexOf(t,r)>-1:!!o&&Ut(e,t,r)>-1},Mr.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var o=null==r?0:bs(r);return o<0&&(o=gr(n+o,0)),Ut(e,t,o)},Mr.inRange=function(e,t,n){return t=gs(t),n===r?(n=t,t=0):n=gs(n),function(e,t,r){return e>=br(t,r)&&e<gr(t,r)}(e=ws(e),t,n)},Mr.invoke=js,Mr.isArguments=Va,Mr.isArray=Ya,Mr.isArrayBuffer=Xa,Mr.isArrayLike=Ja,Mr.isArrayLikeObject=Za,Mr.isBoolean=function(e){return!0===e||!1===e||as(e)&&Sn(e)==g},Mr.isBuffer=Qa,Mr.isDate=es,Mr.isElement=function(e){return as(e)&&1===e.nodeType&&!cs(e)},Mr.isEmpty=function(e){if(null==e)return!0;if(Ja(e)&&(Ya(e)||"string"==typeof e||"function"==typeof e.splice||Qa(e)||ps(e)||Va(e)))return!e.length;var t=mi(e);if(t==k||t==B)return!e.size;if(Ei(e))return!Pn(e).length;for(var r in e)if(Le.call(e,r))return!1;return!0},Mr.isEqual=function(e,t){return Rn(e,t)},Mr.isEqualWith=function(e,t,n){var o=(n="function"==typeof n?n:r)?n(e,t):r;return o===r?Rn(e,t,r,n):!!o},Mr.isError=ts,Mr.isFinite=function(e){return"number"==typeof e&&yr(e)},Mr.isFunction=rs,Mr.isInteger=ns,Mr.isLength=os,Mr.isMap=ss,Mr.isMatch=function(e,t){return e===t||Nn(e,t,hi(t))},Mr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,Nn(e,t,hi(t),n)},Mr.isNaN=function(e){return us(e)&&e!=+e},Mr.isNative=function(e){if(Ai(e))throw new Ae("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return jn(e)},Mr.isNil=function(e){return null==e},Mr.isNull=function(e){return null===e},Mr.isNumber=us,Mr.isObject=is,Mr.isObjectLike=as,Mr.isPlainObject=cs,Mr.isRegExp=ls,Mr.isSafeInteger=function(e){return ns(e)&&e>=-9007199254740991&&e<=h},Mr.isSet=fs,Mr.isString=hs,Mr.isSymbol=ds,Mr.isTypedArray=ps,Mr.isUndefined=function(e){return e===r},Mr.isWeakMap=function(e){return as(e)&&mi(e)==C},Mr.isWeakSet=function(e){return as(e)&&"[object WeakSet]"==Sn(e)},Mr.join=function(e,t){return null==e?"":mr.call(e,t)},Mr.kebabCase=Ys,Mr.last=ta,Mr.lastIndexOf=function(e,t,n){var o=null==e?0:e.length;if(!o)return-1;var i=o;return n!==r&&(i=(i=bs(n))<0?gr(o+i,0):br(i,o-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,i):Ot(e,Ft,i,!0)},Mr.lowerCase=Xs,Mr.lowerFirst=Js,Mr.lt=ys,Mr.lte=ms,Mr.max=function(e){return e&&e.length?mn(e,uu,Tn):r},Mr.maxBy=function(e,t){return e&&e.length?mn(e,li(t,2),Tn):r},Mr.mean=function(e){return zt(e,uu)},Mr.meanBy=function(e,t){return zt(e,li(t,2))},Mr.min=function(e){return e&&e.length?mn(e,uu,Un):r},Mr.minBy=function(e,t){return e&&e.length?mn(e,li(t,2),Un):r},Mr.stubArray=vu,Mr.stubFalse=wu,Mr.stubObject=function(){return{}},Mr.stubString=function(){return""},Mr.stubTrue=function(){return!0},Mr.multiply=Tu,Mr.nth=function(e,t){return e&&e.length?Gn(e,bs(t)):r},Mr.noConflict=function(){return ft._===this&&(ft._=Fe),this},Mr.noop=du,Mr.now=Ca,Mr.pad=function(e,t,r){e=ks(e);var n=(t=bs(t))?cr(e):0;if(!t||n>=t)return e;var o=(t-n)/2;return Wo(Lt(o),r)+e+Wo(mt(o),r)},Mr.padEnd=function(e,t,r){e=ks(e);var n=(t=bs(t))?cr(e):0;return t&&n<t?e+Wo(t-n,r):e},Mr.padStart=function(e,t,r){e=ks(e);var n=(t=bs(t))?cr(e):0;return t&&n<t?Wo(t-n,r)+e:e},Mr.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),wr(ks(e).replace(oe,""),t||0)},Mr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&wi(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=gs(e),t===r?(t=e,e=0):t=gs(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var i=$r();return br(e+i*(t-e+st("1e-"+((i+"").length-1))),t)}return Yn(e,t)},Mr.reduce=function(e,t,r){var n=Ya(e)?Rt:Ht,o=arguments.length<3;return n(e,li(t,4),r,o,dn)},Mr.reduceRight=function(e,t,r){var n=Ya(e)?Nt:Ht,o=arguments.length<3;return n(e,li(t,4),r,o,pn)},Mr.repeat=function(e,t,n){return t=(n?wi(e,t,n):t===r)?1:bs(t),Xn(ks(e),t)},Mr.replace=function(){var e=arguments,t=ks(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Mr.result=function(e,t,n){var o=-1,i=(t=wo(t,e)).length;for(i||(i=1,e=r);++o<i;){var a=null==e?r:e[zi(t[o])];a===r&&(o=i,a=n),e=rs(a)?a.call(e):a}return e},Mr.round=Bu,Mr.runInContext=e,Mr.sample=function(e){return(Ya(e)?Jr:Zn)(e)},Mr.size=function(e){if(null==e)return 0;if(Ja(e))return hs(e)?cr(e):e.length;var t=mi(e);return t==k||t==B?e.size:Pn(e).length},Mr.snakeCase=Zs,Mr.some=function(e,t,n){var o=Ya(e)?jt:io;return n&&wi(e,t,n)&&(t=r),o(e,li(t,3))},Mr.sortedIndex=function(e,t){return ao(e,t)},Mr.sortedIndexBy=function(e,t,r){return so(e,t,li(r,2))},Mr.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ao(e,t);if(n<r&&Ha(e[n],t))return n}return-1},Mr.sortedLastIndex=function(e,t){return ao(e,t,!0)},Mr.sortedLastIndexBy=function(e,t,r){return so(e,t,li(r,2),!0)},Mr.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=ao(e,t,!0)-1;if(Ha(e[r],t))return r}return-1},Mr.startCase=Qs,Mr.startsWith=function(e,t,r){return e=ks(e),r=null==r?0:un(bs(r),0,e.length),t=lo(t),e.slice(r,r+t.length)==t},Mr.subtract=xu,Mr.sum=function(e){return e&&e.length?Wt(e,uu):0},Mr.sumBy=function(e,t){return e&&e.length?Wt(e,li(t,2)):0},Mr.template=function(e,t,n){var o=Mr.templateSettings;n&&wi(e,t,n)&&(t=r),e=ks(e),t=Ss({},t,o,ei);var i,a,s=Ss({},t.imports,o.imports,ei),u=Ls(s),c=Xt(s,u),l=0,f=t.interpolate||ve,h="__p += '",d=Be((t.escape||ve).source+"|"+f.source+"|"+(f===Z?he:ve).source+"|"+(t.evaluate||ve).source+"|$","g"),p="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++nt+"]")+"\n";e.replace(d,(function(t,r,n,o,s,u){return n||(n=o),h+=e.slice(l,u).replace(we,nr),r&&(i=!0,h+="' +\n__e("+r+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+t.length,t})),h+="';\n";var y=Le.call(t,"variable")&&t.variable;if(y){if(le.test(y))throw new Ae("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(a?h.replace(K,""):h).replace(G,"$1").replace(H,"$1;"),h="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=nu((function(){return Ee(u,p+"return "+h).apply(r,c)}));if(m.source=h,ts(m))throw m;return m},Mr.times=function(e,t){if((e=bs(e))<1||e>h)return[];var r=p,n=br(e,p);t=li(t),e-=p;for(var o=qt(n,t);++r<e;)t(r);return o},Mr.toFinite=gs,Mr.toInteger=bs,Mr.toLength=vs,Mr.toLower=function(e){return ks(e).toLowerCase()},Mr.toNumber=ws,Mr.toSafeInteger=function(e){return e?un(bs(e),-9007199254740991,h):0===e?e:0},Mr.toString=ks,Mr.toUpper=function(e){return ks(e).toUpperCase()},Mr.trim=function(e,t,n){if((e=ks(e))&&(n||t===r))return Vt(e);if(!e||!(t=lo(t)))return e;var o=lr(e),i=lr(t);return ko(o,Zt(o,i),Qt(o,i)+1).join("")},Mr.trimEnd=function(e,t,n){if((e=ks(e))&&(n||t===r))return e.slice(0,fr(e)+1);if(!e||!(t=lo(t)))return e;var o=lr(e);return ko(o,0,Qt(o,lr(t))+1).join("")},Mr.trimStart=function(e,t,n){if((e=ks(e))&&(n||t===r))return e.replace(oe,"");if(!e||!(t=lo(t)))return e;var o=lr(e);return ko(o,Zt(o,lr(t))).join("")},Mr.truncate=function(e,t){var n=30,o="...";if(is(t)){var i="separator"in t?t.separator:i;n="length"in t?bs(t.length):n,o="omission"in t?lo(t.omission):o}var a=(e=ks(e)).length;if(or(e)){var s=lr(e);a=s.length}if(n>=a)return e;var u=n-cr(o);if(u<1)return o;var c=s?ko(s,0,u).join(""):e.slice(0,u);if(i===r)return c+o;if(s&&(u+=c.length-u),ls(i)){if(e.slice(u).search(i)){var l,f=c;for(i.global||(i=Be(i.source,ks(de.exec(i))+"g")),i.lastIndex=0;l=i.exec(f);)var h=l.index;c=c.slice(0,h===r?u:h)}}else if(e.indexOf(lo(i),u)!=u){var d=c.lastIndexOf(i);d>-1&&(c=c.slice(0,d))}return c+o},Mr.unescape=function(e){return(e=ks(e))&&V.test(e)?e.replace(W,hr):e},Mr.uniqueId=function(e){var t=++Pe;return ks(e)+t},Mr.upperCase=eu,Mr.upperFirst=tu,Mr.each=ka,Mr.eachRight=Aa,Mr.first=Ji,hu(Mr,(Su={},wn(Mr,(function(e,t){Le.call(Mr.prototype,t)||(Su[t]=e)})),Su),{chain:!1}),Mr.VERSION="4.17.21",Et(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Mr[e].placeholder=Mr})),Et(["drop","take"],(function(e,t){Gr.prototype[e]=function(n){n=n===r?1:gr(bs(n),0);var o=this.__filtered__&&!t?new Gr(this):this.clone();return o.__filtered__?o.__takeCount__=br(n,o.__takeCount__):o.__views__.push({size:br(n,p),type:e+(o.__dir__<0?"Right":"")}),o},Gr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Et(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;Gr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:li(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),Et(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Gr.prototype[e]=function(){return this[r](1).value()[0]}})),Et(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Gr.prototype[e]=function(){return this.__filtered__?new Gr(this):this[r](1)}})),Gr.prototype.compact=function(){return this.filter(uu)},Gr.prototype.find=function(e){return this.filter(e).head()},Gr.prototype.findLast=function(e){return this.reverse().find(e)},Gr.prototype.invokeMap=Jn((function(e,t){return"function"==typeof e?new Gr(this):this.map((function(r){return Cn(r,e,t)}))})),Gr.prototype.reject=function(e){return this.filter(Ma(li(e)))},Gr.prototype.slice=function(e,t){e=bs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=bs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gr.prototype.toArray=function(){return this.take(p)},wn(Gr.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),i=Mr[o?"take"+("last"==t?"Right":""):t],a=o||/^find/.test(t);i&&(Mr.prototype[t]=function(){var t=this.__wrapped__,s=o?[1]:arguments,u=t instanceof Gr,c=s[0],l=u||Ya(t),f=function(e){var t=i.apply(Mr,Dt([e],s));return o&&h?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var h=this.__chain__,d=!!this.__actions__.length,p=a&&!h,y=u&&!d;if(!a&&l){t=y?t:new Gr(this);var m=e.apply(t,s);return m.__actions__.push({func:ga,args:[f],thisArg:r}),new Kr(m,h)}return p&&y?e.apply(this,s):(m=this.thru(f),p?o?m.value()[0]:m.value():m)})})),Et(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ce[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Mr.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var o=this.value();return t.apply(Ya(o)?o:[],e)}return this[r]((function(r){return t.apply(Ya(r)?r:[],e)}))}})),wn(Gr.prototype,(function(e,t){var r=Mr[t];if(r){var n=r.name+"";Le.call(Cr,n)||(Cr[n]=[]),Cr[n].push({name:t,func:r})}})),Cr[zo(r,2).name]=[{name:"wrapper",func:r}],Gr.prototype.clone=function(){var e=new Gr(this.__wrapped__);return e.__actions__=Co(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Co(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Co(this.__views__),e},Gr.prototype.reverse=function(){if(this.__filtered__){var e=new Gr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=Ya(e),n=t<0,o=r?e.length:0,i=function(e,t,r){var n=-1,o=r.length;for(;++n<o;){var i=r[n],a=i.size;switch(i.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=br(t,e+a);break;case"takeRight":e=gr(e,t-a)}}return{start:e,end:t}}(0,o,this.__views__),a=i.start,s=i.end,u=s-a,c=n?s:a-1,l=this.__iteratees__,f=l.length,h=0,d=br(u,this.__takeCount__);if(!r||!n&&o==u&&d==u)return mo(e,this.__actions__);var p=[];e:for(;u--&&h<d;){for(var y=-1,m=e[c+=t];++y<f;){var _=l[y],g=_.iteratee,b=_.type,v=g(m);if(2==b)m=v;else if(!v){if(1==b)continue e;break e}}p[h++]=m}return p},Mr.prototype.at=ba,Mr.prototype.chain=function(){return _a(this)},Mr.prototype.commit=function(){return new Kr(this.value(),this.__chain__)},Mr.prototype.next=function(){this.__values__===r&&(this.__values__=_s(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Mr.prototype.plant=function(e){for(var t,n=this;n instanceof zr;){var o=Gi(n);o.__index__=0,o.__values__=r,t?i.__wrapped__=o:t=o;var i=o;n=n.__wrapped__}return i.__wrapped__=e,t},Mr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gr){var t=e;return this.__actions__.length&&(t=new Gr(this)),(t=t.reverse()).__actions__.push({func:ga,args:[ia],thisArg:r}),new Kr(t,this.__chain__)}return this.thru(ia)},Mr.prototype.toJSON=Mr.prototype.valueOf=Mr.prototype.value=function(){return mo(this.__wrapped__,this.__actions__)},Mr.prototype.first=Mr.prototype.head,at&&(Mr.prototype[at]=function(){return this}),Mr}();dt?((dt.exports=dr)._=dr,ht._=dr):ft._=dr}).call(commonjsGlobal$1)}(lodash,lodash.exports);var __extends$4=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__decorate$5=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__metadata$5=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param$3=commonjsGlobal$1&&commonjsGlobal$1.__param||function(e,t){return function(r,n){t(r,n,e)}},__generator$1=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},__importDefault$5=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(topk,"__esModule",{value:!0});var base_filter_1$4=__importDefault$5(baseFilter),count_min_sketch_1$1=__importDefault$5(countMinSketch),exportable_1$5=exportable,lodash_1$2=lodash.exports,MinHeap=function(){function e(){this._content=[]}return Object.defineProperty(e.prototype,"length",{get:function(){return this._content.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return this._content[e]},e.prototype.add=function(e){var t=lodash_1$2.sortedIndexBy(this._content,e,(function(e){return e.frequency}));this._content.splice(t,0,e)},e.prototype.remove=function(e){this._content.splice(e,1)},e.prototype.popMin=function(){return this._content.shift()},e.prototype.indexOf=function(e){return this._content.findIndex((function(t){return t.value===e}))},e.prototype.clear=function(){this._content=[]},e}(),TopK=function(e){function t(t,r,n){var o=e.call(this)||this;return o._k=t,o._errorRate=r,o._accuracy=n,o._sketch=count_min_sketch_1$1.default.create(r,n),o._heap=new MinHeap,o}return __extends$4(t,e),t.prototype.add=function(e){this._sketch.update(e);var t=this._sketch.count(e);if(this._heap.length<this._k||t>=this._heap.get(0).frequency){var r=this._heap.indexOf(e);r>-1&&this._heap.remove(r),this._heap.add({value:e,frequency:t}),this._heap.length>this._k&&this._heap.popMin()}},t.prototype.clear=function(){this._sketch=count_min_sketch_1$1.default.create(this._errorRate,this._accuracy),this._heap.clear()},t.prototype.values=function(){for(var e=[],t=this._heap.length-1;t>=0;t--){var r=this._heap.get(t);e.push({value:r.value,frequency:r.frequency,rank:this._heap.length-t})}return e},t.prototype.iterator=function(){var e=this._heap;return function(){var t,r;return __generator$1(this,(function(n){switch(n.label){case 0:t=e.length-1,n.label=1;case 1:return t>=0?[4,{value:(r=e.get(t)).value,frequency:r.frequency,rank:e.length-t}]:[3,4];case 2:n.sent(),n.label=3;case 3:return t--,[3,1];case 4:return[2]}}))}()},__decorate$5([exportable_1$5.Field(),__metadata$5("design:type",Number)],t.prototype,"_k",void 0),__decorate$5([exportable_1$5.Field(),__metadata$5("design:type",Number)],t.prototype,"_errorRate",void 0),__decorate$5([exportable_1$5.Field(),__metadata$5("design:type",Number)],t.prototype,"_accuracy",void 0),__decorate$5([exportable_1$5.Field(),__metadata$5("design:type",count_min_sketch_1$1.default)],t.prototype,"_sketch",void 0),__decorate$5([exportable_1$5.Field((function(e){return e.content}),(function(e){var t=new MinHeap;return t.content=e,t})),__metadata$5("design:type",MinHeap)],t.prototype,"_heap",void 0),t=__decorate$5([exportable_1$5.AutoExportable("TopK",["_seed"]),__param$3(0,exportable_1$5.Parameter("_k")),__param$3(1,exportable_1$5.Parameter("_errorRate")),__param$3(2,exportable_1$5.Parameter("_accuracy")),__metadata$5("design:paramtypes",[Number,Number,Number])],t)}(base_filter_1$4.default);topk.default=TopK;var minHash={},__extends$3=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__decorate$4=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__metadata$4=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param$2=commonjsGlobal$1&&commonjsGlobal$1.__param||function(e,t){return function(r,n){t(r,n,e)}},__read=commonjsGlobal$1&&commonjsGlobal$1.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},__spread=commonjsGlobal$1&&commonjsGlobal$1.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e},__importDefault$4=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(minHash,"__esModule",{value:!0});var base_filter_1$3=__importDefault$4(baseFilter),exportable_1$4=exportable,utils_1$3=utils$2,lodash_1$1=lodash.exports,EmptyMinHashError=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$3(t,e),t}(Error);function applyHashFunction(e,t){return(t.a*e+t.b)%t.c}var MinHash=function(e){function t(t,r){var n=e.call(this)||this;return n._nbHashes=t,n._hashFunctions=r,n._signature=utils_1$3.allocateArray(n._nbHashes,1/0),n}return __extends$3(t,e),Object.defineProperty(t.prototype,"nbHashes",{get:function(){return this._nbHashes},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return this._signature[0]===1/0},t.prototype.add=function(e){for(var t=0;t<this._nbHashes;t++)this._signature[t]=Math.min(this._signature[t],applyHashFunction(e,this._hashFunctions[t]))},t.prototype.bulkLoad=function(e){for(var t=this,r=function(r){var o=e.map((function(e){return applyHashFunction(e,t._hashFunctions[r])}));n._signature[r]=Math.min.apply(Math,__spread([n._signature[r]],o))},n=this,o=0;o<this._nbHashes;o++)r(o)},t.prototype.compareWith=function(e){if(this.isEmpty()||e.isEmpty())throw new EmptyMinHashError("Cannot compute a Jaccard similairty with a MinHash that contains no values");return lodash_1$1.intersection(this._signature,e._signature).length/this._nbHashes},__decorate$4([exportable_1$4.Field(),__metadata$4("design:type",Number)],t.prototype,"_nbHashes",void 0),__decorate$4([exportable_1$4.Field(),__metadata$4("design:type",Array)],t.prototype,"_hashFunctions",void 0),__decorate$4([exportable_1$4.Field(),__metadata$4("design:type",Array)],t.prototype,"_signature",void 0),t=__decorate$4([exportable_1$4.AutoExportable("MinHash",["_seed"]),__param$2(0,exportable_1$4.Parameter("_nbHashes")),__param$2(1,exportable_1$4.Parameter("_hashFunctions")),__metadata$4("design:paramtypes",[Number,Array])],t)}(base_filter_1$3.default);minHash.MinHash=MinHash;var minHashFactory={};Object.defineProperty(minHashFactory,"__esModule",{value:!0});var min_hash_1$1=minHash,lodash_1=lodash.exports;function isPrime(e){if(2!==e&&e%2==0)return!1;for(var t=2;t<Math.sqrt(e);t++)if(e%t==0)return!1;return!0}function closestPrime(e){for(var t=0;;){if(isPrime(e+t))return e+t;t++}}var MinHashFactory=function(){function e(e,t){this._nbHashes=e,this._maxValue=t,this._hashFunctions=[];for(var r=closestPrime(this._maxValue),n=0;n<this._nbHashes;n++){var o=lodash_1.random(0,this._maxValue,!1),i=lodash_1.random(0,this._maxValue,!1);this._hashFunctions.push({a:o,b:i,c:r})}}return e.prototype.create=function(){return new min_hash_1$1.MinHash(this._nbHashes,this._hashFunctions)},e}();minHashFactory.default=MinHashFactory;var cuckooFilter={},bucket={};function eq(e,t){return e===t||e!=e&&t!=t}var lodash_eq=eq,INFINITY=1/0,MAX_INTEGER=17976931348623157e292,NAN=NaN,symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function baseFindIndex(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function baseIndexOf(e,t,r){if(t!=t)return baseFindIndex(e,baseIsNaN,r);for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function baseIsNaN(e){return e!=e}var objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max;function indexOf(e,t,r){var n=e?e.length:0;if(!n)return-1;var o=null==r?0:toInteger(r);return o<0&&(o=nativeMax(n+o,0)),baseIndexOf(e,t,o)}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toFinite(e){return e?(e=toNumber(e))===INFINITY||e===-INFINITY?(e<0?-1:1)*MAX_INTEGER:e==e?e:0:0===e?e:0}function toInteger(e){var t=toFinite(e),r=t%1;return t==t?r?t-r:t:0}function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(reTrim,"");var r=reIsBinary.test(e);return r||reIsOctal.test(e)?freeParseInt(e.slice(2),r?2:8):reIsBadHex.test(e)?NAN:+e}var lodash_indexof=indexOf,__decorate$3=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__metadata$3=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__importDefault$3=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},__importStar=commonjsGlobal$1&&commonjsGlobal$1.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(bucket,"__esModule",{value:!0});var lodash_eq_1=__importDefault$3(lodash_eq),lodash_indexof_1=__importDefault$3(lodash_indexof),utils=__importStar(utils$2),exportable_1$3=exportable,exportable_2=exportable,Bucket=function(){function e(e){this._elements=utils.allocateArray(e,null),this._size=e,this._length=0}var t;return t=e,Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.isFree=function(){return this._length<this._size},e.prototype.nextEmptySlot=function(){return lodash_indexof_1.default(this._elements,null)},e.prototype.at=function(e){return this._elements[e]},e.prototype.add=function(e){return!(null===e||!this.isFree())&&(this.set(this.nextEmptySlot(),e),this._length++,!0)},e.prototype.remove=function(e){var t=lodash_indexof_1.default(this._elements,e);return!(t<=-1)&&(this.unset(t),!0)},e.prototype.has=function(e){return lodash_indexof_1.default(this._elements,e)>-1},e.prototype.set=function(e,t){this._elements[e]=t},e.prototype.unset=function(e){this._elements[e]=null,this._length--},e.prototype.swapRandom=function(e,t){void 0===t&&(t=Math.random);var r=utils.randomInt(0,this._length-1,t),n=this._elements[r];return this._elements[r]=e,n},e.prototype.swap=function(e,t){var r=this._elements[e];return this._elements[e]=t,r},e.prototype.equals=function(e){return this._size===e.size&&this._length===e.length&&this._elements.every((function(t,r){return lodash_eq_1.default(e.at(r),t)}))},e=t=__decorate$3([exportable_1$3.Exportable({export:exportable_2.cloneObject("Bucket","_size","_elements"),import:function(e){if(e.type,!("_elements"in e))throw new Error("Cannot create a Bucket from a JSON export which does not represent a bucket");var r=new t(e._size);return e._elements.forEach((function(e,t){null!==e&&(r._elements[t]=e,r._length++)})),r}}),__metadata$3("design:paramtypes",[Number])],e)}();bucket.default=Bucket;var __extends$2=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__decorate$2=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__metadata$2=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__importDefault$2=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cuckooFilter,"__esModule",{value:!0});var base_filter_1$2=__importDefault$2(baseFilter),bucket_1=__importDefault$2(bucket),exportable_1$2=exportable,utils_1$2=utils$2;function computeFingerpintLength(e,t){var r=Math.ceil(Math.log2(1/t)+Math.log2(2*e));return Math.ceil(r/4)}var CuckooFilter=function(e){function t(t,r,n,o){void 0===o&&(o=500);var i=e.call(this)||this;return i._filter=utils_1$2.allocateArray(t,(function(){return new bucket_1.default(n)})),i._size=t,i._bucketSize=n,i._fingerprintLength=r,i._length=0,i._maxKicks=o,i}var r;return __extends$2(t,e),r=t,t.create=function(e,t,n,o){void 0===n&&(n=4),void 0===o&&(o=500);var i=computeFingerpintLength(n,t),a=Math.ceil(e/n/.955);return new r(a,i,n,o)},t.from=function(e,t,n,o){void 0===n&&(n=4),void 0===o&&(o=500);var i=Array.from(e),a=r.create(i.length,t,n,o);return i.forEach((function(e){return a.add(e)})),a},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullSize",{get:function(){return this.size*this.bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fingerprintLength",{get:function(){return this._fingerprintLength},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucketSize",{get:function(){return this._bucketSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxKicks",{get:function(){return this._maxKicks},enumerable:!0,configurable:!0}),t.prototype.add=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=this._locations(e);if(this._filter[n.firstIndex].isFree())this._filter[n.firstIndex].add(n.fingerprint);else{if(!this._filter[n.secondIndex].isFree()){for(var o=this.random()<.5?n.firstIndex:n.secondIndex,i=n.fingerprint,a=[],s=0;s<this._maxKicks;s++){var u=utils_1$2.randomInt(0,this._filter[o].length-1,this.random),c=this._filter[o].at(u);a.push([o,u,c]),this._filter[o].set(u,i),i=c;var l=utils_1$2.hashAsInt(i,this.seed,64);if(o=Math.abs(o^Math.abs(l))%this._filter.length,this._filter[o].isFree())return this._filter[o].add(i),this._length++,!0}if(!r)for(var f=a.length-1;f>=0;f--){var h=a[f];this._filter[h[0]].set(h[1],h[2])}if(t)throw new Error('The Cuckoo Filter is full, cannot insert element "'+e+'"');return!1}this._filter[n.secondIndex].add(n.fingerprint)}return this._length++,!0},t.prototype.remove=function(e){var t=this._locations(e);return this._filter[t.firstIndex].has(t.fingerprint)?(this._filter[t.firstIndex].remove(t.fingerprint),this._length--,!0):!!this._filter[t.secondIndex].has(t.fingerprint)&&(this._filter[t.secondIndex].remove(t.fingerprint),this._length--,!0)},t.prototype.has=function(e){var t=this._locations(e);return this._filter[t.firstIndex].has(t.fingerprint)||this._filter[t.secondIndex].has(t.fingerprint)},t.prototype.rate=function(){var e=this._computeHashTableLoad(),t=this._fingerprintLength/e.load;return Math.pow(2,Math.log2(2*this._bucketSize)-e.load*t)},t.prototype._computeHashTableLoad=function(){var e=this._filter.length*this._bucketSize,t=this._filter.reduce((function(e,t){return e+t.length}),0);return{used:t,free:e-t,size:e,load:t/e}},t.prototype._locations=function(e){var t=utils_1$2.hashIntAndString(e,this.seed,16,64),r=t.int;if(this._fingerprintLength>t.string.length)throw new Error("The fingerprint length ("+this._fingerprintLength+") is higher than the hash length ("+t.string.length+"). Please reduce the fingerprint length or report if it is an unexpected behavior.");var n=t.string.substring(0,this._fingerprintLength),o=Math.abs(r),i=Math.abs(utils_1$2.hashAsInt(n,this.seed,64)),a=Math.abs(o^i);return{fingerprint:n,firstIndex:o%this._size,secondIndex:a%this._size}},t.prototype.equals=function(e){for(var t=0,r=!0;r&&t<this._filter.length;){var n=this._filter[t];e._filter[t].equals(n)||(r=!1),t++}return r},t=r=__decorate$2([exportable_1$2.Exportable({export:exportable_1$2.cloneObject("CuckooFilter","_size","_fingerprintLength","_length","_maxKicks","_filter","_seed"),import:function(e){if(!("CuckooFilter"===e.type&&"_size"in e&&"_fingerprintLength"in e&&"_length"in e&&"_maxKicks"in e&&"_filter"in e&&"_seed"in e))throw new Error("Cannot create a CuckooFilter from a JSON export which does not represent a cuckoo filter");var t=new r(e._size,e._fingerprintLength,e._bucketSize,e._maxKicks);return t._length=e._length,t._filter=e._filter.map((function(e){var t=new bucket_1.default(e._size);return e._elements.forEach((function(e,r){null!==e&&(t._elements[r]=e,t._length++)})),t})),t.seed=e.seed,t}}),__metadata$2("design:paramtypes",[Number,Number,Number,Number])],t)}(base_filter_1$2.default);cuckooFilter.default=CuckooFilter;var invertibleBloomLookupTables={},cell={},__extends$1=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__decorate$1=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__metadata$1=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param$1=commonjsGlobal$1&&commonjsGlobal$1.__param||function(e,t){return function(r,n){t(r,n,e)}},__importDefault$1=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cell,"__esModule",{value:!0});var buffer_1$1=buffer$2,utils_1$1=utils$2,exportable_1$1=exportable,base_filter_1$1=__importDefault$1(baseFilter),inspect=Symbol.for("nodejs.util.inspect.custom"),Cell=function(e){function t(t,r,n){var o=e.call(this)||this;return o._idSum=t,o._hashSum=r,o._count=n,o}var r;return __extends$1(t,e),r=t,t.empty=function(){return new r(buffer_1$1.Buffer.allocUnsafe(0).fill(0),buffer_1$1.Buffer.allocUnsafe(0).fill(0),0)},t.prototype[inspect]=function(){return"Cell:<"+JSON.stringify(this._idSum.toJSON().data)+", "+JSON.stringify(this._hashSum.toJSON().data)+", "+this._count+">"},Object.defineProperty(t.prototype,"idSum",{get:function(){return this._idSum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hashSum",{get:function(){return this._hashSum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.add=function(e,t){this._idSum=utils_1$1.xorBuffer(this._idSum,e),this._hashSum=utils_1$1.xorBuffer(this._hashSum,t),this._count++},t.prototype.xorm=function(e){return new r(utils_1$1.xorBuffer(this._idSum,e.idSum),utils_1$1.xorBuffer(this._hashSum,e.hashSum),this._count-e.count)},t.prototype.isEmpty=function(){return this._idSum.equals(buffer_1$1.Buffer.from(""))&&this._hashSum.equals(buffer_1$1.Buffer.from(""))&&0===this._count},t.prototype.equals=function(e){return this._count===e.count&&this._idSum.equals(e.idSum)&&this._hashSum.equals(e.hashSum)},t.prototype.isPure=function(){if(this.isEmpty()||1!==this._count&&-1!==this._count)return!1;var e=utils_1$1.hashTwiceAsString(JSON.stringify(this._idSum.toJSON()),this.seed);return this._hashSum.equals(buffer_1$1.Buffer.from(e.first))},__decorate$1([exportable_1$1.Field((function(e){return e.toString()}),buffer_1$1.Buffer.from),__metadata$1("design:type",Object)],t.prototype,"_idSum",void 0),__decorate$1([exportable_1$1.Field((function(e){return e.toString()}),buffer_1$1.Buffer.from),__metadata$1("design:type",Object)],t.prototype,"_hashSum",void 0),__decorate$1([exportable_1$1.Field(),__metadata$1("design:type",Number)],t.prototype,"_count",void 0),t=r=__decorate$1([exportable_1$1.AutoExportable("Cell",["_seed"]),__param$1(0,exportable_1$1.Parameter("_idSum")),__param$1(1,exportable_1$1.Parameter("_hashSum")),__param$1(2,exportable_1$1.Parameter("_count")),__metadata$1("design:paramtypes",[Object,Object,Number])],t)}(base_filter_1$1.default);cell.default=Cell;var __extends=commonjsGlobal$1&&commonjsGlobal$1.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),__decorate=commonjsGlobal$1&&commonjsGlobal$1.__decorate||function(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},__metadata=commonjsGlobal$1&&commonjsGlobal$1.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__param=commonjsGlobal$1&&commonjsGlobal$1.__param||function(e,t){return function(r,n){t(r,n,e)}},__generator=commonjsGlobal$1&&commonjsGlobal$1.__generator||function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},__importDefault=commonjsGlobal$1&&commonjsGlobal$1.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(invertibleBloomLookupTables,"__esModule",{value:!0});var buffer_1=buffer$2,base_filter_1=__importDefault(baseFilter),cell_1$1=__importDefault(cell),exportable_1=exportable,utils_1=utils$2,formulas_1=formulas,InvertibleBloomFilter=function(e){function t(t,r){void 0===r&&(r=3);var n=e.call(this)||this;if(void 0===buffer_1.Buffer)throw new Error('No native Buffer implementation bound in your JavaScript env. If you are in a Web browser, consider importing the polyfill "feross/buffer" (https://github.com/feross/buffer).');if(r<=0)throw new Error("The hashCount must be a non-zero, positive integer");return n._size=t,n._hashCount=r,n._elements=utils_1.allocateArray(n._size,(function(){return cell_1$1.default.empty()})),n}var r;return __extends(t,e),r=t,t.create=function(e,t){var n=formulas_1.optimalFilterSize(e,t),o=formulas_1.optimalHashes(n,e);return new r(n,o)},t.from=function(e,t){var n=Array.from(e),o=r.create(n.length,t);return n.forEach((function(e){return o.add(e)})),o},Object.defineProperty(t.prototype,"hashCount",{get:function(){return this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._elements.reduce((function(e,t){return e+t.count}),0)/this._hashCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this._elements},enumerable:!0,configurable:!0}),t.prototype.add=function(e){for(var t=utils_1.allInOneHashTwice(JSON.stringify(e.toJSON()),this.seed),r=utils_1.getDistinctIndices(t.string.first,this._size,this._hashCount,this.seed),n=0;n<this._hashCount;++n)this._elements[r[n]].add(e,buffer_1.Buffer.from(t.string.first))},t.prototype.remove=function(e){for(var t=utils_1.allInOneHashTwice(JSON.stringify(e.toJSON()),this.seed),r=utils_1.getDistinctIndices(t.string.first,this.size,this._hashCount,this.seed),n=0;n<this._hashCount;++n)this._elements[r[n]]=this._elements[r[n]].xorm(new cell_1$1.default(buffer_1.Buffer.from(e),buffer_1.Buffer.from(t.string.first),1));return!0},t.prototype.has=function(e){for(var t=utils_1.allInOneHashTwice(JSON.stringify(e.toJSON()),this.seed),r=utils_1.getDistinctIndices(t.string.first,this.size,this._hashCount,this.seed),n=0;n<this._hashCount;++n){if(0===this._elements[r[n]].count)return!1;if(1===this._elements[r[n]].count)return!!this._elements[r[n]].idSum.equals(e)}return!0},t.prototype.listEntries=function(){var e=this,t=[];return function(){var r,n,o;return __generator(this,(function(i){switch(i.label){case 0:r=function(r){var n;return __generator(this,(function(o){switch(o.label){case 0:return(n=e._elements[r]).count>0&&-1===t.findIndex((function(e){return e.equals(n.idSum)}))?e.has(n.idSum)?(t.push(n.idSum),[4,n.idSum]):[3,2]:[3,3];case 1:return o.sent(),[3,3];case 2:return[2,{value:!1}];case 3:return[2]}}))},n=0,i.label=1;case 1:return n<e._elements.length-1?[5,r(n)]:[3,4];case 2:if("object"==typeof(o=i.sent()))return[2,o.value];i.label=3;case 3:return n++,[3,1];case 4:return[2,!0]}}))}()},t.prototype.substract=function(e){if(this.size!==e.size)throw new Error("The two Invertible Bloom Filters must be of the same size");var t=new r(e._size,e._hashCount);t.seed=this.seed;for(var n=0;n<this.size;++n)t._elements[n]=this._elements[n].xorm(e._elements[n]);return t},t.prototype.equals=function(e){if(e._size!==this._size||e._hashCount!==this._hashCount||e.seed!==this.seed)return!1;for(var t=0;t<e._elements.length;++t)if(!e._elements[t].equals(this._elements[t]))return!1;return!0},t.prototype.decode=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);for(var r=[],n=null,o=0;o<this._elements.length;++o)(n=this._elements[o]).isPure()&&r.push(o);for(;0!==r.length;){var i=(n=this._elements[r.pop()]).idSum,a=n.count;if(n.isPure()){if(1===a)e.push(i);else{if(-1!==a)throw new Error("Please report, not possible");t.push(i)}var s=utils_1.allInOneHashTwice(JSON.stringify(i.toJSON()),this.seed),u=utils_1.getDistinctIndices(s.string.first,this._size,this._hashCount,this.seed);for(o=0;o<u.length;++o)this._elements[u[o]]=this._elements[u[o]].xorm(new cell_1$1.default(i,buffer_1.Buffer.from(s.string.first),a)),this._elements[u[o]].isPure()&&r.push(u[o])}}return this._elements.findIndex((function(e){return!e.isEmpty()}))>-1?{success:!1,reason:{cell:n,iblt:this},additional:e,missing:t}:{success:!0,additional:e,missing:t}},__decorate([exportable_1.Field(),__metadata("design:type",Number)],t.prototype,"_size",void 0),__decorate([exportable_1.Field(),__metadata("design:type",Number)],t.prototype,"_hashCount",void 0),__decorate([exportable_1.Field(void 0,(function(e){return e.map((function(e){var t=new cell_1$1.default(buffer_1.Buffer.from(e._idSum),buffer_1.Buffer.from(e._hashSum),e._count);return t.seed=e._seed,t}))})),__metadata("design:type",Array)],t.prototype,"_elements",void 0),t=r=__decorate([exportable_1.AutoExportable("InvertibleBloomFilter",["_seed"]),__param(0,exportable_1.Parameter("_size")),__param(1,exportable_1.Parameter("_hashCount")),__metadata("design:paramtypes",[Number,Number])],t)}(base_filter_1.default);invertibleBloomLookupTables.default=InvertibleBloomFilter,Object.defineProperty(api,"__esModule",{value:!0});var bloom_filter_1=bloomFilter,BloomFilter=api.BloomFilter=bloom_filter_1.default,counting_bloom_filter_1=countingBloomFilter;api.CountingBloomFilter=counting_bloom_filter_1.default;var partitioned_bloom_filter_1=partitionedBloomFilter;api.PartitionedBloomFilter=partitioned_bloom_filter_1.default;var count_min_sketch_1=countMinSketch;api.CountMinSketch=count_min_sketch_1.default;var hyperloglog_1=hyperloglog;api.HyperLogLog=hyperloglog_1.default;var topk_1=topk;api.TopK=topk_1.default;var min_hash_1=minHash;api.MinHash=min_hash_1.MinHash;var min_hash_factory_1=minHashFactory;api.MinHashFactory=min_hash_factory_1.default;var cuckoo_filter_1=cuckooFilter;api.CuckooFilter=cuckoo_filter_1.default;var invertible_bloom_lookup_tables_1=invertibleBloomLookupTables;api.InvertibleBloomFilter=invertible_bloom_lookup_tables_1.default;var cell_1=cell;api.Cell=cell_1.default;const FILTER_SIZE=1024,HASH_COUNT=16,SATURATION_THRESHOLD=320,createBare=async e=>{const t="0".repeat(FILTER_SIZE/4);return addToBare(t,e)},addToBare=async(e,t)=>{const r=fromHex(e),n=await hash$1.sha256Str(t);return r.add(n),await toHex(r)},addRevision=async(e,t,r)=>await addToBare(e,`${r}${t}`),toPrivateName=async e=>{const t=await saturateFilter(fromHex(e));return toHash(t)},toHash=async e=>{const t=new Uint8Array(e.toBytes()),r=await hash$1.sha256(t);return fromBytes(r)},saturateFilter=async(e,t=SATURATION_THRESHOLD)=>{if(t>8*e.toBytes().byteLength)throw new Error("threshold is bigger than filter size");if(countOnes(e)>=t)return e;const r=e.toBytes();let n=r;do{const t=await hash$1.sha256(n);e.add(fromBytes(t)),n=t}while(bufEquals(r,e.toBytes()));return saturateFilter(e,t)},countOnes=e=>{const t=new Uint32Array(e.toBytes());let r=0;for(let n=0;n<t.length;n++)r+=bitCount32(t[n]);return r},toHex=e=>fromBytes(e.toBytes()),fromHex=e=>{const t=toBytes(e);return BloomFilter.fromBytes(t,HASH_COUNT)},bufEquals=(e,t)=>{if(e.byteLength!==t.byteLength)return!1;const r=new Uint8Array(e),n=new Uint8Array(t);for(let o=0;o<r.length;o++)if(r[o]!==n[o])return!1;return!0},bitCount32=e=>{const t=e-(e>>1&1431655765),r=(858993459&t)+(t>>2&858993459);return 16843009*(r+(r>>4)&252645135)>>24},addNode=async(e,t,r)=>{const{cid:n,size:o}=await putEncryptedFile(t,r),i=await addRevision(t.bareNameFilter,r,t.revision),a=await toPrivateName(i);if(await e.add(a,n),isPrivateFileInfo(t)){const r=await addToBare(t.bareNameFilter,t.key),n=await addRevision(r,t.key,t.revision),o=await toPrivateName(n);await e.add(o,t.content)}const[s,u]=isPrivateFileInfo(t)?[{},!0]:[t.skeleton,!1];return{cid:n,name:a,key:r,size:o,isFile:u,skeleton:s}},readNode=async(e,t)=>{const r=await catAndDecode(e,t);if(!isDecryptedNode(r))throw new Error(`Could not parse a valid filesystem object, ${e}`);return r},getByName=async(e,t,r)=>{const n=await e.get(t);return null===n?null:getByCID(n,r)},getByCID=async(e,t)=>await readNode(e,t),getByLatestName=async(e,t,r)=>{const n=await e.get(t);return null===n?null:getLatestByCID(e,n,r)},getLatestByCID=async(e,t,r)=>{const n=await getByCID(t,r),o=await findLatestRevision(e,n.bareNameFilter,r,n.revision);return o?.cid?await getByCID(o?.cid,r):n},getLatestByBareNameFilter=async(e,t,r)=>{const n=await addRevision(t,r,1),o=await toPrivateName(n);return getByLatestName(e,o,r)},findLatestRevision=async(e,t,r,n)=>{let o=n,i=null,a=0,s=null;for(;null===i;){const u=n+Math.pow(2,a),c=await getRevision(e,t,r,u);null!==c?(s=c,o=u):i=u,a++}for(;o<i-1;){const n=Math.floor((i+o)/2),a=await getRevision(e,t,r,n);null!==a?(s=a,o=n):i=n}return s},getRevision=async(e,t,r,n)=>{const o=await addRevision(t,r,n),i=await toPrivateName(o),a=await e.get(i);return a?{cid:a,name:i,number:n}:null};class BaseFile{constructor(e){this.content=e}async put(){const{cid:e}=await this.putDetailed();return e}async updateContent(e){return this.content=e,this}}class BareFile extends BaseFile{static create(e){return new BareFile(e)}static async fromCID(e){const t=await getFile(e);return new BareFile(t)}static instanceOf(e){return isObject$1(e)&&void 0!==e.content}async put(){const{cid:e}=await this.putDetailed();return e}async putDetailed(){return putFile$1(await normalizeFileContent(this.content))}}class BaseTree{constructor(e){this.version=e}async put(){const{cid:e}=await this.putDetailed();return e}async ls(e){const t=await this.get(e);if(null===t)throw new Error("Path does not exist");if(isFile(t))throw new Error("Can not `ls` a file");return t.getLinks()}async cat(e){const t=await this.get(e);if(null===t)throw new Error("Path does not exist");if(!isFile(t))throw new Error("Can not `cat` a directory");return t.content}async mkdir(e){return this.mkdirRecurse(e,(()=>this.put()))}async mkdirRecurse(e,t){const[r,...n]=e;if(!r)throw new Error("Invalid path: empty");const o=await this.getOrCreateDirectChild(r,t);if(isFile(o))throw new Error(`There is a file along the given path: ${log$1(e)}`);return n.length&&await o.mkdirRecurse(n,(()=>this.updateDirectChild(o,r,t))),this}async add(e,t){return await this.addRecurse(e,t,(()=>this.put())),this}async addRecurse(e,t,r){const[n,...o]=e;if(!n)throw new Error("Invalid path: empty");if(0===o.length)await this.createOrUpdateChildFile(t,n,r);else{const i=await this.getOrCreateDirectChild(n,r);if(isFile(i))throw new Error(`There is a file along the given path: ${log$1(e)}`);await i.addRecurse(o,t,(async()=>{await this.updateDirectChild(i,n,r)}))}return this}async rm(e){return await this.rmRecurse(e,(()=>this.put())),this}async rmRecurse(e,t){const[r,...n]=e;if(!r)throw new Error("Invalid path: empty");if(0===n.length)this.removeDirectChild(r),t&&await t();else{const o=await this.getDirectChild(r);if(null===o)throw new Error("Invalid path: does not exist");if(isFile(o))throw new Error(`There is a file along the given path: ${log$1(e)}`);await o.rmRecurse(n,(async()=>{await this.updateDirectChild(o,r,t)}))}return this}async mv(e,t){const r=await this.get(e);if(null===r)throw new Error(`Path does not exist: ${log$1(e)}`);if(t.length<1)throw new Error(`Path does not exist: ${log$1(t)}`);const n=t.slice(0,-1);let o=await this.get(n);if(o){if(isFile(o))throw new Error(`Can not \`mv\` to a file: ${log$1(n)}`)}else await this.mkdir(n),o=await this.get(n);return await this.rm(e),await[...t].reverse().reduce(((e,r,n)=>e.then((async e=>{const o=t.slice(0,-(n+1)),i=o.length?await this.get(o):this;if(i&&!isFile(i))return await i.updateDirectChild(e,r,null),i;throw new Error("Failed to update tree while moving node")}))),Promise.resolve(r)),this}async exists(e){return null!==await this.get(e)}read(e){return this.get(e)}write(e,t){return this.add(e,t)}async getOrCreateDirectChild(e,t){const r=await this.getDirectChild(e);return null!==r?r:this.createChildTree(e,t)}}class BareTree extends BaseTree{constructor(e){super(v0),this.links=e,this.children={}}static async empty(){return new BareTree({})}static async fromCID(e){const t=await getLinks(e);return new BareTree(t)}static fromLinks(e){return new BareTree(e)}async createChildTree(e,t){const r=await BareTree.empty(),n=this.children[e];if(n){if(BareFile.instanceOf(n))throw new Error(`There is a file at the given path: ${e}`);return n}return await this.updateDirectChild(r,e,t),r}async createOrUpdateChildFile(e,t,r){const n=await this.getDirectChild(t);let o;if(null===n)o=await BareFile.create(e);else{if(!BareFile.instanceOf(n))throw new Error(`There is already a directory with that name: ${t}`);o=await n.updateContent(e)}return await this.updateDirectChild(o,t,r),o}async putDetailed(){return putLinks(this.links)}async putAndUpdateLink(e,t,r){const n=await e.putDetailed();return this.updateLink(t,n),r&&await r(),this}async updateDirectChild(e,t,r){return this.children[t]=e,this.putAndUpdateLink(e,t,r)}removeDirectChild(e){return delete this.links[e],this.children[e]&&delete this.children[e],this}async getDirectChild(e){if(this.children[e])return this.children[e];const t=this.links[e]||null;if(null===t)return null;const r=t.isFile?await BareFile.fromCID(t.cid):await BareTree.fromCID(t.cid);return this.children[e]?this.children[e]:(this.children[e]=r,r)}async get(e){const[t,...r]=e;if(!t)return this;const n=await this.getDirectChild(t);return r.length?null===n||isFile(n)?null:n.get(r):n}updateLink(e,t){const{cid:r,size:n,isFile:o}=t;return this.links[e]=make(e,r,o,n),this}getLinks(){return this.links}}const nibbles={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,a:!0,b:!0,c:!0,d:!0,e:!0,f:!0},isNibble=e=>!0===nibbles[e];class MMPT{constructor(e){this.links=e,this.children={}}static create(){return new MMPT({})}static async fromCID(e){const t=await getSimpleLinks(e);return new MMPT(t)}async putDetailed(){return putLinks(this.links)}async put(){const{cid:e}=await this.putDetailed();return e}async add(e,t){if(!isNibble(e[0]))throw new Error("Not a valid name, must be hexadecimal");const r=this.nextTreeOrSiblingName(e);if(e===r);else if(null===r)this.links[e]=make(e,t,!0,0);else if(1===r.length){const n=await this.getDirectChild(r);await n.add(e.slice(1),t),await this.putAndUpdateChildLink(r)}else{const n=this.addEmptyChild(e[0]),o=this.links[r].cid;this.removeChild(r),await Promise.all([n.add(e.slice(1),t),n.add(r.slice(1),o)]),await this.putAndUpdateChildLink(e[0])}}async putAndUpdateChildLink(e){const t=this.links[e]?.cid,{cid:r,size:n}=await this.children[e].putDetailed(),o=this.links[e]?.cid;if(t!=o)return await this.putAndUpdateChildLink(e);this.links[e]=make(e,r,!1,n)}addEmptyChild(e){const t=MMPT.create();return this.children[e]=t,t}async get(e){const t=this.nextTreeName(e);if(null===t)return null;if(t.length>1)return this.links[t].cid;return(await this.getDirectChild(t)).get(e.slice(1))}async exists(e){return null!==await this.get(e)}async members(){return(await Promise.all(Object.values(this.links).map((async({name:e,cid:t})=>{if(e.length>1)return[{name:e,cid:t}];const r=await MMPT.fromCID(t);return(await r.members()).map((t=>({...t,name:e+t.name})))})))).reduce(((e,t)=>e.concat(t)))}async getDirectChild(e){if(this.children[e])return this.children[e];const t=await MMPT.fromCID(this.links[e].cid);return this.children[e]?this.children[e]:(this.children[e]=t,t)}removeChild(e){delete this.links[e],this.children[e]&&delete this.children[e]}directChildExists(e){return void 0!==this.links[e]||void 0!==this.children[e]}nextTreeName(e){return this.directChildExists(e[0])?e[0]:this.directChildExists(e)?e:null}nextTreeOrSiblingName(e){const t=e[0];return this.directChildExists(t)?t:Object.keys(this.links).find((e=>t===e[0]))||null}}class PublicHistory{constructor(e){this.node=e}back(e=-1){const t=Math.abs(Math.min(e,-1));return Array.from({length:t},((e,t)=>t)).reduce((e=>e.then((e=>e?PublicHistory._getPreviousVersion(e):null))),Promise.resolve(this.node))}async prior(e){return PublicHistory._prior(this.node,e)}async list(e=5){const{acc:t}=await Array.from({length:e},((e,t)=>t)).reduce(((e,t)=>e.then((({node:e,acc:r})=>e?PublicHistory._getPreviousVersion(e).then((n=>({node:n,acc:[...r,{delta:-(t+1),timestamp:e.header.metadata.unixMeta.mtime}]}))):Promise.resolve({node:null,acc:r})))),PublicHistory._getPreviousVersion(this.node).then((e=>({node:e,acc:[]}))));return t}static async _getPreviousVersion(e){return e.header.previous?e.constructor.fromCID(e.header.previous):Promise.resolve(null)}static async _prior(e,t){if(e.header.metadata.unixMeta.mtime<t)return e;const r=await PublicHistory._getPreviousVersion(e);return r?PublicHistory._prior(r,t):null}}class PublicFile extends BaseFile{constructor({content:e,header:t,cid:r}){super(e),this.cid=r,this.header=t,this.history=new PublicHistory(this)}static instanceOf(e){return isObject$1(e)&&void 0!==e.content&&isFileHeader(e.header)}static async create(e){return new PublicFile({content:e,header:{metadata:empty(!0)},cid:null})}static async fromCID(e){const t=await get$1(e);return PublicFile.fromInfo(t,e)}static async fromInfo(e,t){const{userland:r,metadata:n,previous:o}=e,i=await getFile(r);return new PublicFile({content:i,header:{metadata:n,previous:o},cid:t})}async putDetailed(){const e=await putFile(this.content,updateMtime(this.header.metadata),this.cid);return this.cid=e.cid,e}}const getPath=(e,t)=>{const r=e[t[0]]||null,n=nextNonEmpty(t);return null===r||null===n?r:getPath(r.subSkeleton,n)};function nextNonEmpty(e){const t=e.slice(1);return t.length<1?null:t}class PublicTree extends BaseTree{constructor({links:e,header:t,cid:r}){super(t.metadata.version),this.children={},this.cid=r,this.links=e,this.header=t,this.history=new PublicHistory(this)}static async empty(){return new PublicTree({links:{},header:{metadata:empty(!1),skeleton:{}},cid:null})}static async fromCID(e){const t=await get$1(e);if(!isTreeInfo(t))throw new Error(`Could not parse a valid public tree at: ${e}`);return PublicTree.fromInfo(t,e)}static async fromInfo(e,t){const{userland:r,metadata:n,previous:o,skeleton:i}=e,a=await getLinks(r);return new PublicTree({links:a,header:{metadata:n,previous:o,skeleton:i},cid:t})}static instanceOf(e){return isLinks(e.links)&&isTreeHeader(e.header)}async createChildTree(e,t){const r=await PublicTree.empty(),n=this.children[e];if(n){if(PublicFile.instanceOf(n))throw new Error(`There is a file at the given path: ${e}`);if(PublicTree.instanceOf(n))return n;throw new Error(`Not a public tree at the given path: ${e}`)}return await this.updateDirectChild(r,e,t),r}async createOrUpdateChildFile(e,t,r){const n=await this.getDirectChild(t);let o;if(null===n)o=await PublicFile.create(e);else{if(!PublicFile.instanceOf(n))throw new Error(`There is already a directory with that name: ${t}`);o=await n.updateContent(e)}return await this.updateDirectChild(o,t,r),o}async putDetailed(){const e=await putTree(this.links,this.header.skeleton,this.header.metadata,this.cid);return this.header.previous=this.cid||void 0,this.cid=e.cid,e}async updateDirectChild(e,t,r){this.children[t]=e;const n=await e.putDetailed();return this.updateLink(t,n),r&&await r(),this}removeDirectChild(e){return delete this.links[e],delete this.header.skeleton[e],this.children[e]&&delete this.children[e],this}async getDirectChild(e){if(this.children[e])return this.children[e];const t=this.header.skeleton[e]||null;if(null===t)return null;const r=t.isFile?await PublicFile.fromCID(t.cid):await PublicTree.fromCID(t.cid);return this.children[e]?this.children[e]:(this.children[e]=r,r)}async get(e){if(e.length<1)return this;const t=getPath(this.header.skeleton,e);if(null===t)return null;const r=await get$1(t.cid);return isFileInfo(r)?PublicFile.fromInfo(r,t.cid):PublicTree.fromInfo(r,t.cid)}getLinks(){return Object.values(this.links).reduce(((e,t)=>({...e,[t.name]:{...t,isFile:this.header.skeleton[t.name]?.isFile}})),{})}updateLink(e,t){const{cid:r,metadata:n,userland:o,size:i,isFile:a,skeleton:s}=t;return this.links[e]=make(e,r,!1,i),this.header.skeleton[e]={cid:r,metadata:n,userland:o,subSkeleton:s,isFile:a},this.header.metadata.unixMeta.mtime=Date.now(),this}}class PrivateHistory{constructor(e){this.node=e}async back(e=-1){const t=Math.min(e,-1),r=this.node.header?.revision;return r&&await this._getRevision(r+t)||null}async prior(e){return this.node.header.metadata.unixMeta.mtime<e?this.node:this._prior(this.node.header.revision-1,e)}async list(e=5){const t=this.node.header.revision;return Promise.all(Array.from({length:e},((e,r)=>{const n=r+1;return this._getRevisionInfoFromNumber(t-n).then((e=>({revisionInfo:e,delta:-n})))}))).then((e=>e.filter((e=>!!e.revisionInfo)))).then((e=>e.map((e=>{const t=e.revisionInfo.metadata.unixMeta.mtime;return{delta:e.delta,timestamp:t}}))))}async _getRevision(e){const t=await this._getRevisionInfoFromNumber(e);return t&&await this.node.constructor.fromInfo(this.node.mmpt,this.node.key,t)}_getRevisionInfo(e){return readNode(e.cid,this.node.key)}async _getRevisionInfoFromNumber(e){const{key:t,mmpt:r}=this.node,{bareNameFilter:n}=this.node.header,o=await getRevision(r,n,t,e);return o&&this._getRevisionInfo(o)}async _prior(e,t){const r=await this._getRevisionInfoFromNumber(e);return r?.revision?r.metadata.unixMeta.mtime<t?this._getRevision(r.revision):this._prior(r.revision-1,t):null}}class PrivateFile extends BaseFile{constructor({content:e,mmpt:t,key:r,header:n}){super(e),this.header=n,this.history=new PrivateHistory(this),this.key=r,this.mmpt=t}static instanceOf(e){return isObject$1(e)&&void 0!==e.content&&void 0!==e.mmpt&&isPrivateFileInfo(e.header)}static async create(e,t,r,n){const o=await addToBare(r,n),i=await aes.genKeyStr(),a=await putEncryptedFile(t,i);return new PrivateFile({content:t,mmpt:e,key:n,header:{bareNameFilter:o,key:i,revision:1,metadata:empty(!0),content:a.cid}})}static async fromBareNameFilter(e,t,r){const n=await getLatestByBareNameFilter(e,t,r);return this.fromInfo(e,r,n)}static async fromLatestName(e,t,r){const n=await getByLatestName(e,t,r);return PrivateFile.fromInfo(e,r,n)}static async fromName(e,t,r){const n=await getByName(e,t,r);return PrivateFile.fromInfo(e,r,n)}static async fromInfo(e,t,r){if(!isPrivateFileInfo(r))throw new Error("Could not parse a valid private file using the given key");const n=await getEncryptedFile(r.content,r.key);return new PrivateFile({content:n,key:t,mmpt:e,header:r})}async getName(){const{bareNameFilter:e,revision:t}=this.header,r=await addRevision(e,this.key,t);return toPrivateName(r)}async updateParentNameFilter(e){return this.header.bareNameFilter=await addToBare(e,this.header.key),this}async updateContent(e){const t=await putEncryptedFile(e,this.header.key);return this.content=e,this.header={...this.header,revision:this.header.revision+1,content:t.cid},this}async putDetailed(){return addNode(this.mmpt,{...this.header,metadata:updateMtime(this.header.metadata)},this.key)}}class PrivateTree extends BaseTree{constructor({mmpt:e,key:t,header:r}){super(v1),this.children={},this.header=r,this.history=new PrivateHistory(this),this.key=t,this.mmpt=e}static instanceOf(e){return isObject$1(e)&&void 0!==e.mmpt&&isPrivateTreeInfo(e.header)}static async create(e,t,r){const n=r?await addToBare(r,t):await createBare(t);return new PrivateTree({mmpt:e,key:t,header:{metadata:empty(!1),bareNameFilter:n,revision:1,links:{},skeleton:{}}})}static async fromBaseKey(e,t){const r=await createBare(t);return this.fromBareNameFilter(e,r,t)}static async fromBareNameFilter(e,t,r){const n=await getLatestByBareNameFilter(e,t,r);return this.fromInfo(e,r,n)}static async fromLatestName(e,t,r){const n=await getByLatestName(e,t,r);return this.fromInfo(e,r,n)}static async fromName(e,t,r){const n=await getByName(e,t,r);return this.fromInfo(e,r,n)}static async fromInfo(e,t,r){if(!isPrivateTreeInfo(r))throw new Error("Could not parse a valid private tree using the given key");return new PrivateTree({mmpt:e,key:t,header:r})}async createChildTree(e,t){const r=await aes.genKeyStr(),n=await PrivateTree.create(this.mmpt,r,this.header.bareNameFilter),o=this.children[e];if(o){if(PrivateFile.instanceOf(o))throw new Error(`There is a file at the given path: ${e}`);return o}return await this.updateDirectChild(n,e,t),n}async createOrUpdateChildFile(e,t,r){const n=await this.getDirectChild(t);let o;if(null===n){const t=await aes.genKeyStr();o=await PrivateFile.create(this.mmpt,e,this.header.bareNameFilter,t)}else{if(!PrivateFile.instanceOf(n))throw new Error(`There is already a directory with that name: ${t}`);o=await n.updateContent(e)}return await this.updateDirectChild(o,t,r),o}async putDetailed(){const e=Object.assign({},this.header);return addNode(this.mmpt,e,this.key)}async updateDirectChild(e,t,r){await e.updateParentNameFilter(this.header.bareNameFilter),this.children[t]=e;const n=await e.putDetailed();return this.updateLink(t,n),r&&await r(),this}removeDirectChild(e){return this.header={...this.header,revision:this.header.revision+1,links:removeKeyFromObj(this.header.links,e),skeleton:removeKeyFromObj(this.header.skeleton,e)},this.children[e]&&delete this.children[e],this}async getDirectChild(e){if(this.children[e])return this.children[e];const t=this.header.links[e];if(void 0===t)return null;const r=t.isFile?await PrivateFile.fromLatestName(this.mmpt,t.pointer,t.key):await PrivateTree.fromLatestName(this.mmpt,t.pointer,t.key);return this.children[e]?this.children[e]:(this.children[e]=r,r)}async getName(){const{bareNameFilter:e,revision:t}=this.header,r=await addRevision(e,this.key,t);return toPrivateName(r)}async updateParentNameFilter(e){return this.header.bareNameFilter=await addToBare(e,this.key),this}async get(e){if(0===e.length)return this;const[t,...r]=e,n=this.header.skeleton[t];if(void 0===n)return null;const o=await this.getRecurse(n,r);return null===o?null:isPrivateFileInfo(o.node)?PrivateFile.fromInfo(this.mmpt,o.key,o.node):PrivateTree.fromInfo(this.mmpt,o.key,o.node)}async getRecurse(e,t){const[r,...n]=t;if(void 0===r)return{key:e.key,node:await getLatestByCID(this.mmpt,e.cid,e.key)};const o=e.subSkeleton[r];if(void 0!==o)return this.getRecurse(o,n);const i=await getLatestByCID(this.mmpt,e.cid,e.key);if(!isPrivateTreeInfo(i))return null;const a=i.skeleton[r];return void 0===a?null:this.getRecurse(a,n)}getLinks(){return mapObj(this.header.links,(e=>{const{key:t,...r}=e;return{...r}}))}updateLink(e,t){const r=Date.now(),{cid:n,size:o,key:i,isFile:a,skeleton:s}=t,u=t.name;return this.header.links[e]={name:e,key:i,pointer:u,size:o,isFile:a,mtime:mtimeFromMs(r)},this.header.skeleton[e]={cid:n,key:i,subSkeleton:s},this.header.revision=this.header.revision+1,this.header.metadata.unixMeta.mtime=r,this}}class RootTree{constructor({links:e,mmpt:t,privateLog:r,publicTree:n,prettyTree:o,privateNodes:i}){this.links=e,this.mmpt=t,this.privateLog=r,this.publicTree=n,this.prettyTree=o,this.privateNodes=i}static async empty({rootKey:e}){const t=await PublicTree.empty(),r=await BareTree.empty(),n=MMPT.create(),o=toPosix(directory(Branch.Private)),i=await PrivateTree.create(n,e,null);await i.put();const a=new RootTree({links:{},mmpt:n,privateLog:[],publicTree:t,prettyTree:r,privateNodes:{[o]:i}});return await RootTree.storeRootKey(e),a.setVersion(v1),await Promise.all([a.updatePuttable(Branch.Public,t),a.updatePuttable(Branch.Pretty,r),a.updatePuttable(Branch.Private,n)]),a}static async fromCID({cid:e,permissions:t}){const r=await getLinks(e),n=t?await permissionKeys(t):[],o=r[Branch.Public]?.cid||null,i=null===o?await PublicTree.empty():await PublicTree.fromCID(o),a=r[Branch.Pretty]?await BareTree.fromCID(r[Branch.Pretty].cid):await BareTree.empty(),s=r[Branch.Private]?.cid||null;let u,c;null===s?(u=await MMPT.create(),c={}):(u=await MMPT.fromCID(s),c=await loadPrivateNodes(n,u));const l=r[Branch.PrivateLog]?.cid,f=l?await dagGet(l).then((e=>e.Links.map(fromDAGLink))).then((e=>e.sort(((e,t)=>parseInt(e.name,10)-parseInt(t.name,10))))):[];return new RootTree({links:r,mmpt:u,privateLog:f,publicTree:i,prettyTree:a,privateNodes:c})}async put(){const{cid:e}=await this.putDetailed();return e}async putDetailed(){return putLinks(this.links)}updateLink(e,t){const{cid:r,size:n,isFile:o}=t;return this.links[e]=make(e,r,o,n),this}async updatePuttable(e,t){return this.updateLink(e,await t.putDetailed())}static async storeRootKey(e){const t=directory(Branch.Private),r=await readKey({path:t});await keystore.importSymmKey(e,r)}findPrivateNode(e){return findPrivateNode(this.privateNodes,e)}async addPrivateLogEntry(e){const t=[...this.privateLog];let r=Math.max(0,t.length-1),n=t[r]?.cid?(await cat(t[r].cid)).split(","):[];n.length+1>RootTree.LOG_CHUNK_SIZE&&(r+=1,n=[]);const o=await hash$1.sha256Str(e),i=[...n,o],a=await putFile$1(i.join(","));t[r]={name:r.toString(),cid:a.cid,size:a.size};const s=await dagPutLinks(t.map(toDAGLink));this.updateLink(Branch.PrivateLog,{cid:s.cid,isFile:!1,size:await size(s.cid)}),this.privateLog=t}async setVersion(e){const t=await putFile$1(toString(e));return this.updateLink(Branch.Version,t)}}async function findBareNameFilter(e,t){const r=await bareNameFilter({path:t}),n=await getItem(r);if(n)return n;const[o,i]=findPrivateNode(e,t);if(!i)return null;const a=unwrap(t).slice(unwrap(o).length);return PrivateFile.instanceOf(i)?0===a.length?i.header.bareNameFilter:null:(i.exists(a)||(isDirectory(t)?await i.mkdir(a):await i.add(a,"")),i.get(a).then((e=>e?e.header.bareNameFilter:null)))}function findPrivateNode(e,t){const r=e[toPosix(t)];if(r)return[t,r];const n=parent(t);return n?findPrivateNode(e,n):[t,null]}function loadPrivateNodes(e,t){return sortedPathKeys(e).reduce(((e,{path:r,key:n})=>e.then((async e=>{let o;const i=unwrap(r);if(1===i.length&&i[0]===Branch.Private)o=await PrivateTree.fromBaseKey(t,n);else{const i=await findBareNameFilter(e,r);if(!i)throw new Error(`Was trying to load the PrivateTree for the path \`${r}\`, but couldn't find the bare name filter for it.`);o=isDirectory(r)?await PrivateTree.fromBareNameFilter(t,i,n):await PrivateFile.fromBareNameFilter(t,i,n)}const a=toPosix(r);return{...e,[a]:o}}))),Promise.resolve({}))}async function permissionKeys(e){return paths(e).reduce((async(e,t)=>{if(isBranch(Branch.Public,t))return e;const r=await readKey({path:t}),n={path:t,key:await keystore.exportSymmKey(r)};return e.then((e=>[...e,n]))}),Promise.resolve([]))}function sortedPathKeys(e){return e.sort(((e,t)=>toPosix(e.path).localeCompare(toPosix(t.path))))}RootTree.LOG_CHUNK_SIZE=1020;const FS_CID_LOG_PREFIX="webnative.wnfs_cid_log";function key(){return FS_CID_LOG_PREFIX+"-"+setup$1.endpoints.lobby}async function get(){return await getItem(key())||[]}async function index$4(e){const t=await get();return[t.indexOf(e),t.length]}async function newest(){return(await get())[0]}async function add(e){const t=[e,...await get()].slice(0,1e3);await setItem(key(),t)}async function clear(){await removeItem(key())}function log(...e){setup$1.debug&&console.log(...e)}var index$3=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",dictionary:dictionary,build:build,decode:decode,encode:encode$1,encodeHeader:encodeHeader,encodePayload:encodePayload,isExpired:isExpired,isValid:isValid,rootIssuer:rootIssuer,sign:sign});const EMPTY_CID="Qmc5m94Gu7z62RC8waSKkZUrCCBJPyHbkpmGzEePxy2oXJ";async function lookup(e){const t=await lookupOnFisson(e);if(t===EMPTY_CID)return null;if(null!==t)return t;try{const t=await lookupDnsLink(e+".files."+setup$1.endpoints.user);return t===EMPTY_CID?null:t}catch(r){throw console.error(r),new Error("Could not locate user root in dns")}}async function lookupOnFisson(e){try{const t=await fetch(`${setup$1.endpoints.api}/user/data/${e}`,{cache:"reload"}),r=await t.json();if(!isCID(r))throw new Error("Did not receive a CID");return r}catch(t){return log("Could not locate user root on Fission server: ",t.toString()),null}}async function update(e,t){const r=setup$1.endpoints.api;return log(" Updating your DNSLink:",e),await fetchWithRetry(`${r}/user/data/${e}`,{headers:async()=>({authorization:`Bearer ${encode$1(await build({audience:await did$1(),issuer:await write(),potency:"APPEND",proof:t,resource:decode(t).payload.rsc}))}`}),retries:100,retryDelay:5e3,retryOn:[502,503,504]},{method:"PATCH"}).then((t=>(t.status<300?log(" DNSLink updated:",e):log(" Failed to update DNSLink for:",e),{success:t.status<300}))).catch((t=>(log(" Failed to update DNSLink for:",e),console.error(t),{success:!1})))}async function fetchWithRetry(e,t,r,n=0){const o=await t.headers(),i=await fetch(e,{...r,headers:{...r.headers,...o}});if(t.retryOn.includes(i.status)){if(n<t.retries)return await new Promise(((o,i)=>setTimeout((()=>fetchWithRetry(e,t,r,n+1).then(o,i)),t.retryDelay)));throw new Error("Too many retries for fetch")}return i}var dataRoot=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",lookup:lookup,lookupOnFisson:lookupOnFisson,update:update});class NoPermissionError extends Error{constructor(e){super(e),this.name="NoPermissionError"}}var errors=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",NoPermissionError:NoPermissionError});class FileSystem{constructor({root:e,permissions:t,localOnly:r}){this.localOnly=r||!1,this.proofs={},this.publishHooks=[],this.root=e,this._publishWhenOnline=[],this._publishing=!1,this._whenOnline=this._whenOnline.bind(this),this._beforeLeaving=this._beforeLeaving.bind(this);const n=globalThis;n.filesystems=n.filesystems||[],n.filesystems.push(this),t&&t.app&&t.app.creator&&t.app.name&&(this.appPath=appPath(t));const o=throttle(3e3,!1,((e,t)=>{if(globalThis.navigator.onLine)return this._publishing=[e,!0],update(e,t).then((()=>{this._publishing&&this._publishing[0]===e&&(this._publishing=!1)}));this._publishWhenOnline.push([e,t])}),!1);this.publishHooks.push((async e=>{await add(e),log(" Adding to the CID ledger:",e)})),this.publishHooks.push(o),this.localOnly||(globalThis.addEventListener("online",this._whenOnline),globalThis.addEventListener("beforeunload",this._beforeLeaving))}static async empty(e={}){const{permissions:t,localOnly:r}=e,n=e.rootKey||await aes.genKeyStr(),o=await RootTree.empty({rootKey:n});return new FileSystem({root:o,permissions:t,localOnly:r})}static async fromCID(e,t={}){const{permissions:r,localOnly:n}=t,o=await RootTree.fromCID({cid:e,permissions:r});return new FileSystem({root:o,permissions:r,localOnly:n})}deactivate(){if(this.localOnly)return;const e=globalThis;e.filesystems=e.filesystems.filter((e=>e!==this)),e.removeEventListener("online",this._whenOnline),e.removeEventListener("beforeunload",this._beforeLeaving)}async ls(e){if(isFile$1(e))throw new Error("`ls` only accepts directory paths");return this.runOnNode(e,!1,((e,t)=>{if(isFile(e))throw new Error("Tried to `ls` a file");return e.ls(t)}))}async mkdir(e,t={}){if(isFile$1(e))throw new Error("`mkdir` only accepts directory paths");return await this.runOnNode(e,!0,((e,t)=>{if(isFile(e))throw new Error("Tried to `mkdir` a file");return e.mkdir(t)})),t.publish&&await this.publish(),this}async add(e,t,r={}){if(isDirectory(e))throw new Error("`add` only accepts file paths");return await this.runOnNode(e,!0,(async(e,r)=>isFile(e)?e.updateContent(t):e.add(r,t))),r.publish&&await this.publish(),this}async cat(e){if(isDirectory(e))throw new Error("`cat` only accepts file paths");return this.runOnNode(e,!1,(async(e,t)=>isFile(e)?e.content:e.cat(t)))}async read(e){if(isDirectory(e))throw new Error("`read` only accepts file paths");return this.cat(e)}async write(e,t,r={}){if(isDirectory(e))throw new Error("`write` only accepts file paths");return this.add(e,t,r)}async exists(e){return this.runOnNode(e,!1,(async(e,t)=>!!isFile(e)||e.exists(t)))}async get(e){return this.runOnNode(e,!1,(async(e,t)=>isFile(e)?e:e.get(t)))}async mv(e,t){const r=isSameBranch(e,t);if(!isSameKind(e,t)){const r=kind(e),n=kind(t);throw new Error(`Can't move to a different kind of path, from is a ${r} and to is a ${n}`)}if(!r)throw new Error("`mv` is only supported on the same tree for now");if(await this.exists(t))throw new Error("Destination already exists");return await this.runOnNode(e,!0,((e,r)=>{if(isFile(e))throw new Error("Tried to `mv` within a file");const[n,...o]=unwrap(t);return e.mv(r,o)})),this}async rm(e){return await this.runOnNode(e,!0,((e,t)=>{if(isFile(e))throw new Error("Cannot `rm` a file you've asked permission for");return e.rm(t)})),this}async publish(){const e=Array.from(Object.entries(this.proofs));this.proofs={};const t=await this.root.put();return e.forEach((([e,r])=>{this.publishHooks.forEach((e=>e(t,r)))})),t}async runOnNode(e,t,r){const n=unwrap(e),o=n[0],i=n.slice(1),a=t?"make changes to":"query";if(!this.localOnly){const t=await lookupFilesystemUcan(e),r=t&&decode(t);if(!t||!r||isExpired(r)||!r.signature)throw new NoPermissionError(`I don't have the necessary permissions to ${a} the file system at "${toPosix(e)}"`);this.proofs[r.signature]=t}let s,u;if(o===Branch.Public)s=await r(this.root.publicTree,i),t&&PublicTree.instanceOf(s)&&(u=await r(this.root.prettyTree,i),this.root.publicTree=s,this.root.prettyTree=u,await Promise.all([this.root.updatePuttable(Branch.Public,this.root.publicTree),this.root.updatePuttable(Branch.Pretty,this.root.prettyTree)]));else if(o===Branch.Private){const[o,i]=this.root.findPrivateNode(e);if(!i)throw new NoPermissionError(`I don't have the necessary permissions to ${a} the file system at "${toPosix(e)}"`);if(s=await r(i,n.slice(unwrap(o).length)),t&&(PrivateTree.instanceOf(s)||PrivateFile.instanceOf(s))){this.root.privateNodes[toPosix(o)]=s,await s.put(),await this.root.updatePuttable(Branch.Private,this.root.mmpt);const e=await this.root.mmpt.put();await this.root.addPrivateLogEntry(e)}}else{if(o===Branch.Pretty&&t)throw new Error("The pretty path is read only");if(o!==Branch.Pretty)throw new Error("Not a valid FileSystem path");s=await r(this.root.prettyTree,i)}return s}_whenOnline(){const e=[...this._publishWhenOnline];this._publishWhenOnline=[],e.forEach((([e,t])=>{this.publishHooks.forEach((r=>r(e,t)))}))}_beforeLeaving(e){const t="Are you sure you want to leave? We don't control the browser so you may lose your data.";if(this._publishing||this._publishWhenOnline.length)return(e||globalThis.event).returnValue=t,t}}function appPath(e){if(!e.app)throw Error("Only works with app permissions");const t=appDataPath(e.app);return e=>e?combine(t,e):t}async function loadFileSystem(e,t,r){let n,o;if(!(t=t||await authenticatedUsername$1()||void 0))throw new Error("User hasn't authenticated yet");await store([]);const i=navigator.onLine?await lookup(t):null,[a,s]=i?await index$4(i):[-1,0];if(navigator.onLine)if(i)if(0===a)n=i,log(" DNSLink is up to date:",n);else if(a>0){n=await newest();log(" DNSLink is outdated ("+(1===a?"1 newer local entry":a+" newer local entries")+"), using local CID:",n)}else n=i,await add(n),log(" DNSLink is newer:",n);else n=await newest(),n?log(" No DNSLink, using local CID:",n):log(" Creating a new file system");else n=await newest();const u=e||void 0;if(o=n?await FileSystem.fromCID(n,{permissions:u}):null,o)return o;if(!r)throw new Error("Can't make new filesystem without a root AES key");return o=await FileSystem.empty({permissions:u,rootKey:r}),await addSampleData(o),o}async function addSampleData(e){await e.mkdir({directory:[Branch.Private,"Apps"]}),await e.mkdir({directory:[Branch.Private,"Audio"]}),await e.mkdir({directory:[Branch.Private,"Documents"]}),await e.mkdir({directory:[Branch.Private,"Photos"]}),await e.mkdir({directory:[Branch.Private,"Video"]}),await e.publish()}async function authenticatedUsername(){return authenticatedUsername$1()}async function leave({withoutRedirect:e}={}){await removeItem(USERNAME_STORAGE_KEY),await clearStorage(),await clear(),await keystore.clear(),(globalThis.filesystems||[]).forEach((e=>e.deactivate())),!e&&globalThis.location&&(globalThis.location.href=setup$1.endpoints.lobby)}async function redirectToLobby(e,t,r){const n=e?.app,o=e?.fs,i=e?.platform,a=e?.raw,s=await exchange(),u=await write(),c=!!document.body.querySelector("iframe#webnative-ipfs")&&"function"==typeof SharedWorker,l=[["didExchange",s],["didWrite",u],["redirectTo",t=t||window.location.href],["sdk",VERSION.toString()],["sharedRepo",c?"t":"f"]].concat(n?[["appFolder",`${n.creator}/${n.name}`]]:[],o?.private?o.private.map((e=>["privatePath",toPosix(e,{absolute:!0})])):[],o?.public?o.public.map((e=>["publicPath",toPosix(e,{absolute:!0})])):[],a?[["raw",urlEncode(JSON.stringify(a))]]:[],r?Object.entries(r):[]).concat((()=>{const e=i?.apps;switch(typeof e){case"string":return[["app",e]];case"object":return e.map((e=>["app",e]));default:return[]}})());window.location.href=setup$1.endpoints.lobby+"?"+l.map((([e,t])=>encodeURIComponent(e)+"="+encodeURIComponent(t))).join("&")}async function index$1(){const e=setup$1.endpoints.api,t=await lookupAppUcan("*");if(null===t)throw"Could not find your local UCAN";const r=encode$1(await build({audience:await did$1(),issuer:await write(),proof:t,potency:null})),n=await fetch(`${e}/app`,{method:"GET",headers:{authorization:`Bearer ${r}`}}),o=await n.json();return Object.values(o).filter((e=>e.urls.length>0)).map((({urls:e,insertedAt:t,modifiedAt:r})=>({domains:e,insertedAt:t,modifiedAt:r})))}async function create(e){const t=setup$1.endpoints.api,r=await lookupAppUcan("*");if(null===r)throw"Could not find your local UCAN";const n=encode$1(await build({audience:await did$1(),issuer:await write(),proof:r,potency:null})),o=isString(e)?`${t}/app?subdomain=${encodeURIComponent(e)}`:`${t}/app`,i=await fetch(o,{method:"POST",headers:{authorization:`Bearer ${n}`}}),a=await i.json(),s=(new Date).toISOString();return{domains:[a],insertedAt:s,modifiedAt:s}}async function deleteByDomain(e){const t=setup$1.endpoints.api,r=await lookupAppUcan(e);if(null===r)throw new Error("Could not find your local UCAN");const n=encode$1(await build({audience:await did$1(),issuer:await write(),proof:r,potency:null})),o=await fetch(`${t}/app`,{method:"GET",headers:{authorization:`Bearer ${n}`}}),i=await o.json(),a=Object.entries(i).find((([t,r])=>r.urls.includes(e)));if(null==a)throw new Error(`Couldn't find an app with domain ${e}`);await fetch(`${t}/app/${encodeURIComponent(a[0])}`,{method:"DELETE",headers:{authorization:`Bearer ${n}`}})}async function publish(e,t){const r=setup$1.endpoints.api,n=await lookupAppUcan(e);if(null===n)throw"Could not find your local UCAN";const o=encode$1(await build({audience:await did$1(),issuer:await write(),proof:n,potency:null})),i=`${r}/app/${e}/${t}`;await fetch(i,{method:"PATCH",headers:{authorization:`Bearer ${o}`}})}var index$2=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",index:index$1,create:create,deleteByDomain:deleteByDomain,publish:publish});const USERNAME_BLOCKLIST=["fission","ipfs","ipns","did","id","identity",".htaccess","htaccess",".htpasswd","htpasswd",".well-known","well-known","400","401","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","421","422","423","424","426","428","429","431","500","501","502","503","504","505","506","507","508","509","510","511","_domainkey","about","about-us","abuse","access","account","accounts","ad","add","admin","administration","administrator","ads","ads.txt","advertise","advertising","aes128-ctr","aes128-gcm","aes192-ctr","aes256-ctr","aes256-gcm","affiliate","affiliates","ajax","alert","alerts","alpha","amp","analytics","api","app","app-ads.txt","apps","asc","assets","atom","auth","authentication","authorize","autoconfig","autodiscover","avatar","backup","banner","banners","bbs","beta","billing","billings","blog","blogs","board","bookmark","bookmarks","broadcasthost","business","buy","cache","calendar","campaign","captcha","careers","cart","cas","categories","category","cdn","cgi","cgi-bin","chacha20-poly1305","change","channel","channels","chart","chat","checkout","clear","client","close","cloud","cms","com","comment","comments","community","compare","compose","config","connect","contact","contest","cookies","copy","copyright","count","cp","cpanel","create","crossdomain.xml","css","curve25519-sha256","customer","customers","customize","dashboard","db","deals","debug","delete","desc","destroy","dev","developer","developers","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha1","disconnect","discuss","dns","dns0","dns1","dns2","dns3","dns4","docs","documentation","domain","download","downloads","downvote","draft","drop","ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","edit","editor","email","enterprise","error","errors","event","events","example","exception","exit","explore","export","extensions","false","family","faq","faqs","favicon.ico","features","feed","feedback","feeds","file","files","filter","follow","follower","followers","following","fonts","forgot","forgot-password","forgotpassword","form","forms","forum","forums","friend","friends","ftp","get","git","go","graphql","group","groups","guest","guidelines","guides","head","header","help","hide","hmac-sha","hmac-sha1","hmac-sha1-etm","hmac-sha2-256","hmac-sha2-256-etm","hmac-sha2-512","hmac-sha2-512-etm","home","host","hosting","hostmaster","htpasswd","http","httpd","https","humans.txt","icons","images","imap","img","import","index","info","insert","investors","invitations","invite","invites","invoice","is","isatap","issues","it","jobs","join","js","json","keybase.txt","learn","legal","license","licensing","like","limit","live","load","local","localdomain","localhost","lock","login","logout","lost-password","m","mail","mail0","mail1","mail2","mail3","mail4","mail5","mail6","mail7","mail8","mail9","mailer-daemon","mailerdaemon","map","marketing","marketplace","master","me","media","member","members","message","messages","metrics","mis","mobile","moderator","modify","more","mx","mx1","my","net","network","new","news","newsletter","newsletters","next","nil","no-reply","nobody","noc","none","noreply","notification","notifications","ns","ns0","ns1","ns2","ns3","ns4","ns5","ns6","ns7","ns8","ns9","null","oauth","oauth2","offer","offers","online","openid","order","orders","overview","owa","owner","page","pages","partners","passwd","password","pay","payment","payments","photo","photos","pixel","plans","plugins","policies","policy","pop","pop3","popular","portal","portfolio","post","postfix","postmaster","poweruser","preferences","premium","press","previous","pricing","print","privacy","privacy-policy","private","prod","product","production","profile","profiles","project","projects","public","purchase","put","quota","recover","recovery","redirect","reduce","refund","refunds","register","registration","remove","replies","reply","report","request","request-password","reset","reset-password","response","return","returns","review","reviews","robots.txt","root","rootuser","rsa-sha2-2","rsa-sha2-512","rss","rules","sales","save","script","sdk","search","secure","security","select","services","session","sessions","settings","setup","share","shift","shop","signin","signup","site","sitemap","sites","smtp","sort","source","sql","ssh","ssh-rsa","ssl","ssladmin","ssladministrator","sslwebmaster","stage","staging","stat","static","statistics","stats","status","store","style","styles","stylesheet","stylesheets","subdomain","subscribe","sudo","super","superuser","support","survey","sync","sysadmin","system","tablet","tag","tags","team","telnet","terms","terms-of-use","test","testimonials","theme","themes","today","tools","topic","topics","tour","training","translate","translations","trending","trial","true","umac-128","umac-128-etm","umac-64","umac-64-etm","undefined","unfollow","unlike","unsubscribe","update","upgrade","usenet","user","username","users","uucp","var","verify","video","view","void","vote","vpn","webmail","webmaster","website","widget","widgets","wiki","wpad","write","www","www-data","www1","www2","www3","www4","you","yourname","yourusername","zlib"];async function isUsernameAvailable(e){return!(await fetch(`${setup$1.endpoints.api}/user/data/${e}`)).ok}function isUsernameValid(e){return!e.startsWith("-")&&!e.endsWith("-")&&!e.startsWith("_")&&/^[a-zA-Z0-9_-]+$/.test(e)&&!USERNAME_BLOCKLIST.includes(e.toLowerCase())}async function createAccount(e){const t=setup$1.endpoints.api,r=encode$1(await build({audience:await did$1(),issuer:await write()}));return{success:(await fetch(`${t}/user`,{method:"PUT",headers:{authorization:`Bearer ${r}`,"content-type":"application/json"},body:JSON.stringify(e)})).status<300}}async function resendVerificationEmail(){const e=setup$1.endpoints.api,t=Object.values(getDictionary())[0];if(null===t)throw"Could not find your local UCAN";const r=encode$1(await build({audience:await did$1(),issuer:await write(),proof:t,potency:null}));return{success:(await fetch(`${e}/user/email/resend`,{method:"POST",headers:{authorization:`Bearer ${r}`}})).status<300}}function storeFileSystemRootKey(e){return RootTree.storeRootKey(e)}var index=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",createAccount:createAccount,resendVerificationEmail:resendVerificationEmail,storeFileSystemRootKey:storeFileSystemRootKey,isUsernameAvailable:isUsernameAvailable,isUsernameValid:isUsernameValid});function debug({enabled:e}){return setup$1.debug=e,setup$1.debug}function shouldPin({enabled:e}){return setup$1.shouldPin=e,setup$1.shouldPin}function endpoints(e){return setup$1.endpoints={...setup$1.endpoints,...e},{...setup$1.endpoints}}var setup=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",debug:debug,shouldPin:shouldPin,endpoints:endpoints,setDependencies:setDependencies}),Scenario,Scenario2,InitialisationError,InitialisationError2;async function initialise(e){const t=(e=e||{}).permissions||null,{autoRemoveUrlParams:r=!0,rootKey:n}=e,o=async r=>!1===e.loadFileSystem?void 0:await loadFileSystem(t,r,n);if(!1===globalThis.isSecureContext)throw InitialisationError.InsecureContext;if(!1===await isSupported())throw InitialisationError.UnsupportedBrowser;const i=new URL(window.location.href),a=i.searchParams.get("authorised"),s=i.searchParams.get("cancelled");if(a){const e="t"===i.searchParams.get("newUser"),n=i.searchParams.get("username")||"";return await importClassifiedInfo("via-postmessage"===a?await getClassifiedViaPostMessage():await cat(a)),await setItem(USERNAME_STORAGE_KEY,n),r&&(i.searchParams.delete("authorised"),i.searchParams.delete("newUser"),i.searchParams.delete("username"),history.replaceState(null,document.title,i.toString())),t&&!1===await validateSecrets(t)?(console.warn("Unable to validate filesystem secrets"),scenarioNotAuthorised(t)):t&&!1===validatePermissions(t)?(console.warn("Unable to validate UCAN permissions"),scenarioNotAuthorised(t)):scenarioAuthSucceeded(t,e,n,await o(n))}if(s){const e=(()=>{switch(s){case"DENIED":return"User denied authorisation";default:return"Unknown reason"}})();return scenarioAuthCancelled(t,e)}await store([]);const u=await authenticatedUsername$1();if(u&&t){const e=await validateSecrets(t),r=validatePermissions(t);return e&&r?scenarioContinuation(t,u,await o(u)):scenarioNotAuthorised(t)}return u?scenarioContinuation(t,u,await o(u)):scenarioNotAuthorised(t)}async function isSupported(){return localforage$1.supports(localforage$1.INDEXEDDB)&&await new Promise((e=>{const t=indexedDB.open("testDatabase");t.onsuccess=()=>e(!0),t.onerror=()=>e(!1)}))}Scenario2=Scenario||(Scenario={}),Scenario2.NotAuthorised="NOT_AUTHORISED",Scenario2.AuthSucceeded="AUTH_SUCCEEDED",Scenario2.AuthCancelled="AUTH_CANCELLED",Scenario2.Continuation="CONTINUATION",InitialisationError2=InitialisationError||(InitialisationError={}),InitialisationError2.InsecureContext="INSECURE_CONTEXT",InitialisationError2.UnsupportedBrowser="UNSUPPORTED_BROWSER";const fs=FileSystem;function scenarioAuthSucceeded(e,t,r,n){return{scenario:Scenario.AuthSucceeded,permissions:e,authenticated:!0,throughLobby:!0,fs:n,newUser:t,username:r}}function scenarioAuthCancelled(e,t){return{scenario:Scenario.AuthCancelled,permissions:e,authenticated:!1,throughLobby:!0,cancellationReason:t}}function scenarioContinuation(e,t,r){return{scenario:Scenario.Continuation,permissions:e,authenticated:!0,newUser:!1,throughLobby:!1,fs:r,username:t}}function scenarioNotAuthorised(e){return{scenario:Scenario.NotAuthorised,permissions:e,authenticated:!1}}async function importClassifiedInfo(e){const t=JSON.parse(e),r=await keystore.decrypt(t.sessionKey),n=await aes.decryptGCM(t.secrets,r,t.iv),o=JSON.parse(n),i=o.fs,a=o.ucans;await Promise.all(Object.entries(i).map((async([e,{bareNameFilter:t,key:r}])=>{const n=fromPosix(e),o=await readKey({path:n}),i=await bareNameFilter({path:n});await keystore.importSymmKey(r,o),await setItem(i,t)}))),await store(a)}async function getClassifiedViaPostMessage(){const e=await new Promise((e=>{const t=document.createElement("iframe");t.id="webnative-secret-exchange",t.style.width="0",t.style.height="0",t.style.border="none",t.style.display="none",document.body.appendChild(t),t.onload=()=>{e(t)},t.src=`${setup$1.endpoints.lobby}/exchange.html`}));try{const t=new Promise(((e,t)=>{window.addEventListener("message",(function r(n){window.removeEventListener("message",r),n.data?e(n.data):t(new Error("Can't import UCANs & readKey(s): Missing data"))}))}));if(null==e.contentWindow)throw new Error("Can't import UCANs & readKey(s): No access to its contentWindow");const r={webnative:"exchange-secrets",didExchange:await exchange()};return e.contentWindow.postMessage(r,e.src),await t}finally{document.body.removeChild(e)}}async function validateSecrets(e){return paths(e).reduce(((e,t)=>e.then((async e=>{if(!1===e)return e;if(isBranch(Branch.Public,t))return e;const r=await readKey({path:t});return await keystore.keyExists(r)}))),Promise.resolve(!0))}var webnative=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",get Scenario(){return Scenario},get InitialisationError(){return InitialisationError},initialise:initialise,initialize:initialise,isSupported:isSupported,fs:fs,apps:index$2,dataRoot:dataRoot,did:did,errors:errors,lobby:index,path:path,setup:setup,ucan:index$3,dns:index$7,ipfs:ipfs,keystore:keystore$1,machinery:index$5,crypto:crypto$4,cbor:cborg,authenticatedUsername:authenticatedUsername,leave:leave,redirectToLobby:redirectToLobby,loadFileSystem:loadFileSystem,VERSION:VERSION}),funnel={},require$$0=getAugmentedNamespace(webnative);!function(e){const t={incoming:"webnativeRequest",outgoing:"webnativeResponse"};var r,n;r="undefined"!=typeof self?self:commonjsGlobal$1,n=function(e,r){let n;const o=()=>n;e.request=function({app:e,request:i,getFs:a=o,portNames:s=t}){switch(i.context){case"WEBNATIVE":return function({app:e,portNames:t,request:o}){Promise.resolve(r[o.method](...o.arguments)).then((r=>{switch(o.method){case"redirectToLobby":return;case"loadFileSystem":n=r;break;case"initialise":n=r.fs;default:e.ports[t.outgoing]&&e.ports[t.outgoing].send({tag:o.tag,error:null,method:o.method,data:r,context:o.context})}})).catch((r=>{e.ports[t.outgoing]&&e.ports[t.outgoing].send({tag:o.tag,error:r.message||r,method:o.method,data:null,context:o.context})}))}({app:e,portNames:s,request:i});case"WNFS":return function({app:e,getFs:t,portNames:r,request:n}){const o=n.method.replace(/_utf8$/,"");"write"===n.method&&(n.arguments=[n.arguments[0],Uint8Array.from(n.arguments[1])]),Promise.resolve(t()).then((e=>e[o](...n.arguments))).then((t=>{e.ports[r.outgoing]&&e.ports[r.outgoing].send({tag:n.tag,error:null,method:n.method,data:t.root?null:t.buffer?Array.from(t):t,context:n.context})})).catch((t=>{e.ports[r.outgoing]&&e.ports[r.outgoing].send({tag:n.tag,error:t.message||t,method:n.method,data:null,context:n.context})}))}({app:e,getFs:a,portNames:s,request:i})}return{getFs:a,portNames:s}},e.setup=function({app:n,getFs:i=o,portNames:a=t,webnative:s}){if(s&&(r=s),!r)throw new Error("Failed to load webnative");if(n.ports&&n.ports[a.incoming])return n.ports[a.outgoing]||console.warn(`Not sending webnative responses back to your Elm app, because the outgoing port named "${a.outgoing}" was not found. Could be that you haven't used the port yet, dead code elimination.`),n.ports[a.incoming].subscribe((t=>{e.request({request:t,app:n,getFs:i,portNames:a})})),{getFs:i,portNames:a};console.warn(`Couldn't find the incoming Elm port for webnative named "${a.incoming}". Could be that you haven't used the port yet, dead code elimination.`)}},"string"!=typeof e.nodeName?n(e,require$$0):n(r.webnativeElm={},r.webnative)}(funnel);export{debug as d,funnel as f,leave as l,webnative as w};
